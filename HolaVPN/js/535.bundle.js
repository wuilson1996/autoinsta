// LICENSE_CODE ZON
"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[535],{2535:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{init:()=>init});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4850);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5380);var react_dom__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);var _util_url_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5305);var _util_url_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_util_url_js__WEBPACK_IMPORTED_MODULE_2__);var _util_etask_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6386);var _util_etask_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_util_etask_js__WEBPACK_IMPORTED_MODULE_3__);var _bext_vpn_ui_ui_lib_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2075);var _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6357);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5250);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6__);var _bext_vpn_ui_page_lib_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(726);
// LICENSE_CODE ZON
function _extends(){_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const{useState,useEffect}=react__WEBPACK_IMPORTED_MODULE_0___default();const{T,Mitm_btn}=_bext_vpn_ui_ui_lib_js__WEBPACK_IMPORTED_MODULE_4__["default"];const perr=(id,info)=>_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].perr(id,info,{},true);const Report_problem=()=>{let href=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].hola_url()+"/premium_support?ref=ext_report_problem";return react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"section report-problem"},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",{className:"title",href},react__WEBPACK_IMPORTED_MODULE_0___default().createElement(T,null,"Report a problem")))};const Mitm=()=>{const[root_url,set_root_url]=useState("");const[tab_id,set_tab_id]=useState();const[country,set_country]=useState("us");useEffect((()=>{let qs=_util_url_js__WEBPACK_IMPORTED_MODULE_2___default().qs_parse(window.location.search.replace(/^\?/,""));set_root_url(qs.root_url);if(!+qs.tab_id){perr("mitm_ui_missing_tab_id");window.close()}set_tab_id(+qs.tab_id);if(qs.country)set_country(qs.country)}),[]);const get_user_info=()=>({user:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].get_user(),is_plus:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].get_is_premium()});const[user_info,set_user_info]=useState(get_user_info());useEffect((()=>{perr("mitm_show");const update_user=()=>set_user_info(get_user_info());const beforeunload=()=>ignore();_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].on("user_changed",update_user);window.addEventListener("beforeunload",beforeunload);return()=>{_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].off("user_changed",update_user);window.removeEventListener("beforeunload",beforeunload)}}),[]);const approve=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){perr("mitm_manual_approved");yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].mitm_set_unblock(root_url,tab_id);if(yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].need_trial(root_url)){let next_trial_ts=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].get_next_trial_ts(root_url);if(!next_trial_ts||next_trial_ts<_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].now())yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].start_trial(root_url)}yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].unblock_action({country,src:"mitm",url:_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6___default().root2url(root_url),mitm:true});yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].reload_tab(tab_id);yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].focus_on_tab(tab_id);window.close()}));const ignore=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){perr("mitm_manual_ignore");yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].mitm_set_ignore(root_url,tab_id);yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].focus_on_tab(tab_id);window.close()}));const title=react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0___default().createElement("b",null,root_url)," ",T("is blocked in your country or office"));const buttons=[react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Mitm_btn,{root_url,enable:false,on_click:ignore,key:"no"}),react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Mitm_btn,{root_url,enable:true,on_click:approve,key:"yes"})];return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_bext_vpn_ui_page_lib_js__WEBPACK_IMPORTED_MODULE_7__.f6,_extends({},user_info,{cls:"mitm"}),react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Report_problem,null),react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_bext_vpn_ui_page_lib_js__WEBPACK_IMPORTED_MODULE_7__.$0,{title,cls:"mitm-section"},buttons),";")};const init=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){yield(0,_bext_vpn_ui_page_lib_js__WEBPACK_IMPORTED_MODULE_7__.VV)();let root=react_dom__WEBPACK_IMPORTED_MODULE_1___default().createRoot(document.querySelector(".react-root"));root.render(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Mitm,null))}))},726:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$0:()=>Section,VV:()=>init_api,f6:()=>Page_layout});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4850);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(793);var classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__);var _util_etask_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6386);var _util_etask_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_util_etask_js__WEBPACK_IMPORTED_MODULE_2__);var _bext_vpn_ui_ui_lib_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2075);var _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6357);
// LICENSE_CODE ZON
const{T}=_bext_vpn_ui_ui_lib_js__WEBPACK_IMPORTED_MODULE_3__["default"];const Header=props=>{let logo_url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__["default"].hola_url()+"/?utm_source=holaext&utm_content=settings";let cp_url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__["default"].hola_url()+"/cp?utm_source=holaext&utm_content=settings";let login_url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__["default"].hola_url()+"/signin?utm_source=holaext&utm_content=settings";let logo_cls="logo "+(props.is_plus?"logo-plus":"logo-free");return react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"header"},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"header-left"},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"spacer"}),react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",{className:logo_cls,target:"_blank",rel:"noopener noreferrer",href:logo_url})),react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"header-content"},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"title"},props.title),!props.is_plus&&react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"upgrade-btn"},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",{href:"",onClick:()=>_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__["default"].open_plus_page("","ext_settings_upgrade")},react__WEBPACK_IMPORTED_MODULE_0___default().createElement(T,null,"Upgrade to Premium")))),react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"header-right"},props.user&&react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",{className:"user-name",target:"_blank",rel:"noopener noreferrer",href:cp_url},props.user.displayName),!props.user&&react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",{className:"login-btn",target:"_blank",rel:"noopener noreferrer",href:login_url},"Sign in"),react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"spacer"})))};const Page_layout=({user,is_plus,title,cls,children,trial})=>react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("page-layout",cls)},react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Header,{user,is_plus,title}),react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"content"},children));const Section=props=>react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("section",props.cls)},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"title",onClick:props.on_click},props.title),react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"card"},props.children));const init_api=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_2___default()((function*(){window.addEventListener("beforeunload",uninit);yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__["default"].init()}));const uninit=()=>_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__["default"].uninit()}}]);
//# sourceMappingURL=https://hola.org/be_source_map/1.230.678/535.bundle.js.map?build=nopeer_v3