// LICENSE_CODE ZON
(self["webpackChunk"]=self["webpackChunk"]||[]).push([[75],{1328:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./af.json":[9546,832],"./ar.json":[3182,832],"./az.json":[3237,832],"./be.json":[3199,832],"./bg.json":[1480,832],"./bn.json":[7825,832],"./bs.json":[402,832],"./ca.json":[6874,832],"./cs.json":[1723,832],"./cy.json":[928,832],"./da.json":[5320,832],"./de.json":[4232,832],"./el.json":[1213,832],"./en.json":[3846],"./es.json":[5679,832],"./et.json":[6710,832],"./eu.json":[3436,832],"./fa.json":[681,832],"./fi.json":[2144,832],"./fr.json":[4553,832],"./ga.json":[8069,832],"./gl.json":[3610,832],"./gu.json":[3526,832],"./he.json":[5640,832],"./hi.json":[353,832],"./hr.json":[4037,832],"./ht.json":[5933,832],"./hu.json":[9753,832],"./hy.json":[7066,832],"./id.json":[9408,832],"./is.json":[8698,832],"./it.json":[4539,832],"./ja.json":[306,832],"./ka.json":[743,832],"./km.json":[9895,832],"./kn.json":[6523,832],"./ko.json":[1338,832],"./ku.json":[470,832],"./lt.json":[7778,832],"./lv.json":[6093,832],"./mk.json":[4890,832],"./mr.json":[8811,832],"./ms.json":[4578,832],"./mt.json":[3633,832],"./my.json":[3876,832],"./nl.json":[7271,832],"./no.json":[9958,832],"./pl.json":[3542,832],"./pt.json":[3964,832],"./pt_BR.json":[9392,832],"./ro.json":[7148,832],"./ru.json":[6089,832],"./sk.json":[1196,832],"./sl.json":[9575,832],"./sq.json":[6326,832],"./sr.json":[6586,832],"./sv.json":[2326,832],"./sw.json":[826,832],"./ta.json":[9204,832],"./te.json":[2582,832],"./th.json":[3654,832],"./tl.json":[1361,832],"./tr.json":[9935,832],"./uk.json":[5971,832],"./ur.json":[3740,832],"./vi.json":[3259,832],"./zh_CN.json":[657,832],"./zh_TW.json":[9142,832]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req)){return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+req+"'");e.code="MODULE_NOT_FOUND";throw e}))}var ids=map[req],id=ids[0];return Promise.all(ids.slice(1).map(__webpack_require__.e)).then((()=>__webpack_require__.t(id,3|16)))}webpackAsyncContext.keys=()=>Object.keys(map);webpackAsyncContext.id=1328;module.exports=webpackAsyncContext},6969:(module,exports,__webpack_require__)=>{"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;// LICENSE_CODE ZON
!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8763),__webpack_require__(541),__webpack_require__(7345),__webpack_require__(5250),__webpack_require__(4118),__webpack_require__(6386),__webpack_require__(1291),__webpack_require__(9824),__webpack_require__(9641)],__WEBPACK_AMD_DEFINE_RESULT__=function(_,Backbone,be_util,be_vpn_util,zconf,etask,zutil,zerr,conf){const is_bg=be_vpn_util.is_bg();const listener_prefix="l"+(is_bg?"b":"p");const E={};const manifest=be_util.get_manifest();function _destroy(o){try{o.destroy()}catch(err){try{console.error("error in destroy %s",err.stack||err)}catch(_err){}throw err}}const is_object=obj=>obj!=null&&(typeof obj=="object"||obj instanceof Object);const is_array=obj=>Array.isArray(obj)||obj instanceof Array;const _clone_deep=obj=>{let ret;if(is_array(obj)){ret=new Array(obj.length);let n=obj.length;for(let i=0;i<n;i++)ret[i]=is_object(obj[i])?_clone_deep(obj[i]):obj[i];return ret}else if(obj instanceof Date)return new Date(obj);else if(obj instanceof RegExp)return new RegExp(obj);else if(obj instanceof Function)return obj;ret={};for(let i in obj)ret[i]=is_object(obj[i])?_clone_deep(obj[i]):obj[i];return ret};const clone_deep=obj=>is_bg&&conf.firefox_web_ext&&is_object(obj)?_clone_deep(obj):obj;E.model=Backbone.Model.extend({defaults:function(){this._listenerId=_.uniqueId(listener_prefix);if(this._defaults)this._defaults.call(this);this.on("destroy",(function(){this.off();this.stopListening();this.destroyed=true}))},_destroy:function(){_destroy(this)},sync:function(){},assert_inited:function(){be_vpn_util.assert(this.get("inited"),new Error("not inited"))},on_init:function(events,cb){this.on(events,cb);cb.call(this)},listen_to:function(other,events,cb){this.listenTo(other,events,cb);cb.call(this)},fcall:function(a0,a1){return this[a0].apply(this,clone_deep(a1))},ecall:function(a0,a1){return this[a0].apply(this,clone_deep(a1))},safe_set:function(change){var diff=this.changedAttributes(change);if(!diff)return;this.set(diff,{silent:true});_.each(diff,(function(val,key){try{this.trigger("change:"+key)}catch(err){be_util.perr("be_safe_set_err",{key,val},{err,rate_limit:{count:1}});console.error("error in change listener %s",err.stack||err)}}),this);try{this.trigger("change")}catch(e){be_util.perr("be_safe_set_err",{},{err:e,rate_limit:{count:1}});console.error("error in change listener %s",e.stack||e)}},set:function(attributes,options){if(typeof options=="object")options=_.clone(options);Backbone.Model.prototype.set.apply(this,[attributes,options])},assert_no_listeners:function(){if(!this._events||!Object.keys(this._events).length)return;if(Object.keys(this._events).length>1||Object.keys(this._events)[0]!="destroy"){console.error("%s: assert_no_listeners _events %s",this.model_name,Object.keys(this._events));if(zutil.is_mocha())throw new Error("has listeners")}}});let backbone_max_listeners_limit=11;let leak_warn=(obj,events)=>{if(!obj._events)return;if(typeof events=="object")events=Object.keys(events);else events=events.split(/\s+/);for(let event of events){let a=obj._events[event];if(!a||a.length<backbone_max_listeners_limit)continue;console.error("%s: too many event listeners %s %s",obj.model_name,a.length,event);be_util.perr("be_backbone_max_listeners_"+backbone_max_listeners_limit,{count:a.length,module:obj.model_name,event,bt:zerr.get_stack_trace()},{rate_limit:{count:1}});backbone_max_listeners_limit*=10;if(zutil.is_mocha())throw new Error(obj.model_name+" too many listeners")}};if(manifest&&!manifest.update_url||zutil.is_mocha()){E.model.prototype.on=function(events){leak_warn(this,events);return Backbone.Model.prototype.on.apply(this,arguments)};E.model.prototype.listenTo=function(other,events){leak_warn(other,events);return Backbone.Model.prototype.listenTo.apply(this,arguments)}}E.task_model=E.model.extend({defaults:function(){if(this._defaults)this._defaults.call(this);this.queue=[];this.on("destroy",(function(){clearTimeout(this.queue_timer);delete this.queue;this.off();this.stopListening();this.destroyed=true}))},assert_inited:function(){be_vpn_util.assert(this.get("inited"),new Error("not inited"));be_vpn_util.assert(this.queue,new Error("in destroy"))},set_busy:function(opt){this.assert_inited();be_vpn_util.assert(this.get("status")!="error",new Error("set_busy in error"));if(this.get("status")=="ready"||!this.get("status")||this.in_clr_busy){this.in_clr_busy=false;this.set("status_opt",opt);this.set("status","busy");return true}return false},update_progress:function(opt){this.set("status_opt",opt)},clr_busy:function(){this.assert_inited();be_vpn_util.assert(this.get("status")!="error",new Error("clr_busy in error"));if(!this.queue.length){this.unset("status_opt");return this.set("status","ready")}this.queue_timer=setTimeout(function(){this.in_clr_busy=true;this.trigger.apply(this,this.queue.shift())}.bind(this),0)},clr_task:function(task){this.assert_inited();this.queue=_.filter(this.queue,(function(o){return!_.isEqual(o,task)}))},clr_task_by_id:function(id){this.assert_inited();this.queue=_.filter(this.queue,(function(o){return o[0]!=id}))},set_err:function(){this.assert_inited();be_vpn_util.assert(this.get("status")=="busy",new Error("set_err but not busy"));clearTimeout(this.queue_timer);this.queue=[];this.in_clr_busy=0;this.unset("status_opt");return this.set("status","error")},schedule:function(task){this.assert_inited();be_vpn_util.assert(this.get("status")=="busy",new Error("schedule but not busy"));this.queue.push(task)},schedule_clr:function(task){this.clr_task(task);return this.schedule(task)},recover:function(){this.assert_inited();be_vpn_util.assert(this.get("status")=="error",new Error("recover but not in error"));this.unset("status_opt");this.set("status","",{silent:true});return this.trigger("recover")}});return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},1211:(module,exports,__webpack_require__)=>{"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;// LICENSE_CODE ZON
!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(6386),__webpack_require__(9824),__webpack_require__(57),__webpack_require__(6969),__webpack_require__(177),__webpack_require__(8763),__webpack_require__(9369),__webpack_require__(901),__webpack_require__(1291),__webpack_require__(5250),__webpack_require__(7345)],__WEBPACK_AMD_DEFINE_RESULT__=function(etask,zerr,be_msg,be_backbone,be_chrome,_,be_transport,user_agent,zutil,be_vpn_util,be_util){const chrome=self.chrome;const v3=be_util.is_v3;const is_tpopup_window=be_vpn_util.get_tpopup_mode()=="window";const E=new(be_backbone.model.extend({model_name:"browser",_defaults:function(){this.msg=new be_msg;this.on("destroy",(()=>E.uninit()))}}));if(zutil.is_mocha()){chrome.browserAction={setIcon:()=>{},setBadgeText:()=>{},setBadgeBackgroundColor:()=>{}};chrome.windows={getLastFocused:()=>{},onFocusChanged:{addListener:()=>{},removeListener:()=>{}}};chrome.storage={local:{get:()=>{},set:()=>{},remove:()=>{}}};chrome.tabs={update:()=>{},reload:()=>{},query:()=>{},get:()=>{},onFocusChanged:{addListener:()=>{},removeListener:()=>{}},onCreated:{addListener:()=>{},removeListener:()=>{}},onUpdated:{addListener:()=>{},removeListener:()=>{}},onActivated:{addListener:()=>{},removeListener:()=>{}},onRemoved:{addListener:()=>{},removeListener:()=>{}},onReplaced:{addListener:()=>{},removeListener:()=>{}}}}E.uninit=()=>{if(!E.inited)return;if(zutil.is_mocha()){be_chrome.uninit();E.msg.uninit()}else{be_chrome._destroy();E.msg._destroy()}E.inited=false};E.init=opt=>{if(E.inited)return;E.inited=true;E.browser_version=user_agent.guess_browser().version;E.os=user_agent.guess().os;opt=opt||{};E.msg.init(get_transport(),{context:opt.context!==undefined?opt.context:{}});E.rpc=!be_vpn_util.is_bg()?E.rpc_types.chrome_msg:E.rpc_types.chrome_native;E.rpc.init()};function get_transport(){if(be_vpn_util.is_bg()||is_tpopup_window)return be_transport.chrome_tabs(chrome);return be_transport.tpopup(chrome,zutil.get(self,"hola.tpopup_opt.tab_id",-1))}E.rpc_types={chrome_native:{init:function(){if(this.inited)return;this.inited=true;be_chrome.init(E.msg);be_chrome.impl.init();E.runtime.id=be_chrome.impl.id;E.runtime.url=be_chrome.impl.url;E.runtime.manifest=be_chrome.impl.manifest},call_api:function(obj,sub,func,args,cb,ms,error_cb){var _this=this,_cb=!cb?null:function(){E.runtime.last_error=_this.last_error=chrome.runtime.lastError;return cb.apply(null,arguments)};return be_chrome.impl.call_api(obj,sub,func,args,_cb)},add_listener:(obj,sub,cb,opt,extra)=>be_chrome.impl.add_listener(obj,sub,cb,opt,extra),del_listener:(obj,sub,cb)=>be_chrome.impl.del_listener(obj,sub,cb)},chrome_msg:{init:function(){if(this.inited)return;this.inited=true;be_chrome.init(E.msg);E.rpc.call_api("impl","","init",[],(function(o){E.runtime.id=o.id;E.runtime.manifest=o.manifest;if(E.runtime.url=o.url)return;E.runtime.url=chrome?"chrome-extension://"+o.id:"resource://"+o.id.replace("@","-at-").toLowerCase()+"/hola_firefox_ext"}))},call_api:function(obj,sub,func,args,cb,ms,error_cb,skip_resp){var _this=this;return E.msg.send({msg:"call_api",obj,sub,func,args,has_cb:!!cb,skip_resp},(function(ret){if(!cb)return;E.runtime.last_error=_this.last_error=ret.last_error;if(ret.error){if(error_cb)error_cb(ret);return}cb.apply(null,ret.args)}),ms)},add_listener:(obj,sub,cb)=>E.msg.add_listener({obj,sub},cb),del_listener:(obj,sub,cb)=>E.msg.del_listener({obj,sub},cb)}};E.tabs={disconnect:(tab_id,cb)=>{E.rpc.call_api("tabs","","disconnect",[tab_id],cb)},is_connected:tab_id=>!!E.msg.tab_connections[tab_id],get_tab_connections:tab_id=>E.msg.tab_connections[tab_id]};E.runtime={};E.backbone={client:{obj:{}},server:{obj:{},cb:{}}};E.backbone.client.ping=function(id,ms,cb){E.rpc.call_api("backbone","server","ping",[id],cb,ms,cb)};E.backbone.client.start=function(id){zerr.debug("backbone.client.start "+id);var o=this.obj[id],_this=this;zerr.assert(!o,"client "+id+" already started");o=this.obj[id]=new be_backbone.model;E.msg.on_backbone_event=function(info){var o=_this.obj[info.id];if(!o)return;var ename=info.ename;if(ename.includes("change:")){var attr=ename.replace("change:",""),val=info.args[0];o.set(attr,val)}else o.trigger.apply(o,[ename].concat(info.args))};o.fcall=(func,args)=>E.rpc.call_api("backbone.server.obj."+id,"fcall",func,args);o.ecall=(func,args)=>etask((function*(){const ret=yield etask.cb_apply(E.rpc,".call_api",["backbone.server.obj."+id,"ecall",func,args]);be_vpn_util.assert(!zutil.get(ret,"_error"),zutil.get(ret,"_error"));return ret}));E.rpc.call_api("backbone","server","connect",[id],(function(ret){var o=_this.obj[id];if(!o)return zerr("client %s got connected after stop",id);if(ret.error)return zerr("backbone.client.start error: "+ret.error);o.set(ret.attributes);o.set("_backbone_client_started",true)}));return o};E.backbone.client.stop=function(id){zerr.debug("backbone.client.stop "+id);var o=this.obj[id];zerr.assert(o,"client "+id+" not started");E.rpc.call_api("backbone","server","disconnect",[id,o.get("_backbone_client_id")],null,null,null,true);o._destroy();delete this.obj[id]};E.backbone.server.start=function(obj,id){zerr.debug("backbone.server.start "+id+" cid "+obj.cid);zerr.assert(!this.obj[id],"server "+id+" already started");this.obj[id]=obj};E.backbone.server.stop=function(id){zerr.debug("backbone.server.stop "+id);var o=this.obj[id];zerr.assert(o,"server "+id+" not started");delete this.obj[id]};if(v3)E.init();return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},177:(module,exports,__webpack_require__)=>{"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;// LICENSE_CODE ZON
!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8763),__webpack_require__(6386),__webpack_require__(6969),__webpack_require__(9824),__webpack_require__(1291),__webpack_require__(5250),__webpack_require__(7345)],__WEBPACK_AMD_DEFINE_RESULT__=function(_,etask,be_backbone,zerr,zutil,be_vpn_util,be_util){const v3=be_util.is_v3;const chrome=!be_vpn_util.is_tpopup()&&self.chrome;const noop=()=>{};const E=new(be_backbone.model.extend({model_name:"chrome",_defaults:function(){this.on("destroy",(function(){E.uninit()}))}}));E.init=msg=>{if(E.inited||!be_vpn_util.is_bg())return;E.inited=true;E.listeners={"":{}};E.msg=msg;E.msg.on_req=on_req;E.msg.on_add_listener=on_add_listener;E.msg.on_del_listener=on_del_listener;E.msg.on_connect=on_connect;E.msg.on_disconnect=on_disconnect};E.uninit=()=>{if(!E.inited)return;E.msg.on_req=undefined;E.msg.on_add_listener=undefined;E.msg.on_del_listener=undefined;E.msg.on_connect=undefined;E.msg.on_disconnect=undefined};function on_req(j){var req=j.msg;switch(req.msg){case"call_api":var cb=!req.has_cb?null:function(){E.msg.resp(j,{args:_.toArray(arguments),last_error:!chrome?0:chrome.runtime.lastError})};E.impl.call_api(req.obj,req.sub,req.func,req.args,cb,j);if(!req.has_cb&&!req.skip_resp)E.msg.resp(j,{args:[]});break}}function on_add_listener(j){var req=j.msg,id=j.id,cid=j._connection_id||"";var cb=function(){E.msg.send_event(j,_.toArray(arguments))};cb.__j=j;var l=E.listeners[cid];if(!l)return zerr("add: listeners for "+cid+" not inited");zerr.assert(!l[id],"add: listener "+id+" already exists");l[id]=cb;E.impl.add_listener(req.obj,req.sub,cb)}function on_del_listener(j){var req=j.msg,id=j.id,cid=j._connection_id||"";var l=E.listeners[cid];if(!l)return zerr("del: listeners for "+cid+" not inited");var cb=l[id];zerr.assert(cb,"del: listener "+id+" not found");E.impl.del_listener(req.obj,req.sub,cb);delete l[id]}function on_connect(cid){if(E.listeners[cid]){if(!v3)zerr("connect: listeners for "+cid+" already inited");return}E.listeners[cid]={}}function on_disconnect(cid){var l=E.listeners[cid];if(!l)return zerr("disc: listeners for "+cid+" not inited");_.each(zutil.clone(l),(function(e,i){var t;if(t=e.__j)on_del_listener(t);else if(t=e.__backbone)del_backbone_listener(t.id,cid,t.backbone_client_id)}));zerr.assert(_.isEmpty(l),"listeners not empty");delete E.listeners[cid]}function del_backbone_listener(id,connection_id,backbone_client_id){var o=get_backbone_obj(id);var l=E.listeners[connection_id];if(!l){return zerr("del_backbone: listeners for "+connection_id+" not inited")}var cb=l[backbone_client_id];delete l[backbone_client_id];if(!o)return;E.stopListening(o,"all",cb)}function join_dot(obj,sub,func){return _.compact(arguments).join(".")}function get_obj(root,obj,sub){let a=obj.split(".").concat(sub||[]),o=root,i;for(i=0;i<a.length&&o;i++)o=o[a[i]];return i<a.length?null:o}function get_backbone_obj(id){var main=self.be_bg_main;return main&&main.be_browser.backbone.server.obj[id]}function perr(id,info,opt,new_name){let perr_func=zutil.get(self,"be_bg_main.be_util.perr");if(perr_func)return perr_func(id,info,opt,new_name);zerr("perr "+id+" "+(info?info:"")+(opt.err?"\n"+zerr.e2s(opt.err):""))}let sent;function _perr(obj,sub,func,args,err){if(sent)return console.error("skip be_msg_err %s",err);var err_info=err?err.hola_info:undefined;perr("be_msg_err",{method:join_dot(obj,sub,func),args,err_info},{err});sent=true}E.impl={};E.impl.init=function(){if(this.inited)return;this.inited=true;if(!chrome)return;this.id=chrome.runtime.id;this.url=chrome.runtime.getURL("").slice(0,-1);this.manifest=chrome.runtime.getManifest()};E.impl["impl.init"]=chrome&&function(args,cb){this.init();if(cb)cb({id:this.id,url:this.url,manifest:this.manifest})};E.impl["tpopup.set_dont_show_again"]=function(args){if(!self.be_bg_main||!self.be_bg_main.be_info)return zerr("no be_bg_main or be_info");self.be_bg_main.be_info.set_dont_show_again(args[0])};E.impl["tpopup.send_tpopup_msg"]=function(args){chrome.tabs.sendMessage(args[0],args[1])};E.impl["tpopup.trigger"]=function(args){if(!self.be_bg_main||!self.be_bg_main.be_tpopup)return;self.be_bg_main.be_tpopup.trigger(args[0],args[1])};E.impl["be_premium.login_popup_done"]=function(args){if(!self.be_bg_main||!self.be_bg_main.be_premium)return;self.be_bg_main.be_premium.login_popup_done()};E.impl["tpopup.perr"]=function(args){perr(args[1],args[2],args[3],true)};E.impl["backbone.server.connect"]=function(args,cb,j){cb=cb||noop;var id=args[0],o=get_backbone_obj(id),cid=j._connection_id||"";if(!o)return;var attr=o.attributes;var bcid=attr._backbone_client_id=_.uniqueId("bbl");var l=E.listeners[cid];if(!l)return zerr("connect: listeners for "+cid+" not inited");zerr.assert(!l[bcid],"backbone listener for"+bcid+" already exists");var _cb=l[bcid]=function(ename){var _args=[];if(ename.includes("change:"))_args=[o.get(ename.replace("change:",""))];else if(ename!="change")_args=[].slice.call(arguments,1);E.msg.send_backbone_event(j,{id,ename,args:_args})};_cb.__backbone={id,backbone_client_id:bcid};E.listenTo(o,"all",_cb);cb({attributes:attr})};E.impl["backbone.server.disconnect"]=function(args,cb,j){del_backbone_listener(args[0],j._connection_id||"",args[1]);if(cb)cb({})};E.impl["backbone.server.ping"]=function(args,cb,j){cb=cb||noop;var id=args[0],o=get_backbone_obj(id);if(o)cb({})};E.impl.call_api=function(obj,sub,func,args,cb,j){try{var o;if(obj.startsWith("backbone.server.obj.")){cb=cb||noop;var id=obj.replace("backbone.server.obj.","");o=get_backbone_obj(id);if(!o)return;if(sub=="ecall"){return etask([function(){return o.ecall(func,args)},function(){cb.apply(null,arguments)},function catch$(err){cb({_error:""+err});_perr(obj,sub,func,args,err)}])}o[sub].call(o,func,args);cb({});return}var s=join_dot(obj,sub,func);if(_.isFunction(this[s])){if(zerr.is.info())zerr.info(s+"("+zerr.json(args).substr(0,100)+")");return void this[s].call(this,args,cb,j)}o=get_obj(chrome,obj,sub);if(!o||!o[func])return _perr(obj,sub,func,args,new Error("not found"));return o[func].apply(o,args.concat(cb||[]))}catch(e){_perr(obj,sub,func,args,e)}};E.impl.add_listener=function(obj,sub,cb,opt,extra){try{var s=join_dot(obj,sub,"add_listener");if(_.isFunction(this[s])){zerr.info(s+"()");return void this[s].call(this,cb,opt,extra)}var o=get_obj(chrome,obj,sub);if(!o||!o.addListener)return _perr(obj,sub,"add_listener",new Error("not found"));if(!opt)return o.addListener(cb);o.addListener(cb,opt,extra)}catch(e){_perr(obj,sub,"add_listener",{opt,extra},e)}};E.impl.del_listener=function(obj,sub,cb){try{var s=join_dot(obj,sub,"del_listener");if(_.isFunction(this[s])){zerr.info(s+"()");return void this[s].call(this,cb)}var o=get_obj(chrome,obj,sub);if(!o||!o.removeListener)return _perr(obj,sub,"del_listener");o.removeListener(cb)}catch(e){_perr(obj,sub,"del_listener",[],e)}};return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},57:(module,exports,__webpack_require__)=>{"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;// LICENSE_CODE ZON
!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8763),__webpack_require__(6969),__webpack_require__(5250),__webpack_require__(9824),__webpack_require__(6545),__webpack_require__(7345)],__WEBPACK_AMD_DEFINE_RESULT__=function(_,be_backbone,be_vpn_util,zerr,array,be_util){const v3=be_util.is_v3;const E=be_backbone.model.extend({model_name:"msg",_defaults:function(){this.id=1;this.unique=Math.random();this.queue={};this.listeners={};this.connections={};this.tab_connections={};this.on("destroy",(function(){this.uninit()}))},unique_id:function(){return this.unique+"_"+this.id++},init:function(transport,opt){if(this.inited)return;this.inited=true;this.opt=opt||{};this.context=this.opt.context;this.transport=transport;this._on_msg=this.on_msg.bind(this);this.transport.add_listener(this._on_msg);if(!this.transport.add_connection_listener||!be_vpn_util.is_bg())return;this._on_connection=this.on_connection.bind(this);this.transport.add_connection_listener(this._on_connection)},uninit:function(){if(!this.inited)return;this.transport.remove_listener(this._on_msg);if(this._on_connection)this.transport.remove_connection_listener(this._on_connection);_.each(this.connections,(function(port){port.disconnect()}));this.inited=false},disconnect:function(tid,cid){var cids=cid?[cid]:(this.tab_connections[tid]||[]).slice();cids.forEach((function(_cid){this.connections[_cid].disconnect();this._after_disconnect(_cid,tid)}),this)},send:function(msg,cb,ms){var j={id:this.unique_id(),msg,cb};this.queue[j.id]=j;if(ms)j.timer=be_vpn_util.set_timeout((()=>this.cancel_send(j.id)),ms);this.transport.send({type:"be_msg_req",id:j.id,msg,context:this.context})},resp:function(j,ret){this.transport.send({type:"be_msg_resp",id:j.id,ret,_tab_id:j._tab_id,_connection_id:j._connection_id,context:j.context})},cancel_send:function(id){var j=this.queue[id];if(!j)return;j.timer=be_vpn_util.clear_timeout(j.timer);if(j.cb)j.cb({error:"cancel_send"});delete this.queue[id]},add_listener:function(msg,cb){be_vpn_util.assert(!cb.__listener_id,new Error("listener_id "+cb.__listener_id+" already exists"));cb.__listener_id=this.unique_id();var j={id:cb.__listener_id,msg,cb};this.listeners[j.id]=j;this.transport.send({type:"be_msg_add_listener",id:j.id,msg,context:this.context})},del_listener:function(msg,cb){const id=cb.__listener_id;be_vpn_util.assert(id,new Error("no listener id"));delete this.listeners[id];delete cb.__listener_id;this.transport.send({type:"be_msg_del_listener",id,msg,context:this.context})},send_event:function(j,args){this.transport.send({type:"be_msg_event",id:j.id,args,_tab_id:j._tab_id,_connection_id:j._connection_id,context:j.context})},send_backbone_event:function(j,info){this.transport.send({type:"be_msg_backbone_event",info,_tab_id:j._tab_id,_connection_id:j._connection_id,context:j.context})},on_connection:function(port){const connection_id=port.name;let tab_id=port.sender.tab&&port.sender.tab.id;if(v3&&!tab_id)tab_id=-1;this.add_connection(port,connection_id,tab_id);if(this.on_connect)this.on_connect(connection_id);const on_disconnect=()=>{delete_timer();port.onMessage.removeListener(on_message);this._after_disconnect(connection_id,tab_id)};const force_reconnect=()=>{zerr.notice("force reconnect: "+connection_id);port.onDisconnect.removeListener(on_disconnect);port.onMessage.removeListener(on_message);delete_timer(port);port.disconnect()};const on_message=msg=>zerr.debug("port message",connection_id,msg.msg);const delete_timer=()=>{if(port._timer){clearTimeout(port._timer);delete port._timer}};port.onDisconnect.addListener(on_disconnect);port.onMessage.addListener(on_message);if(v3&&connection_id.includes(":tpopup:"))port._timer=setTimeout(force_reconnect,250*1e3,port)},on_msg:function(msg){var j;if(!this.transport.is_valid(msg))return;var data=this.transport.get_data(msg);if(!data)return;switch(data.type){case"be_msg_req":if(!this.on_req)return;return this.on_req(data);case"be_msg_resp":j=this.queue[data.id];if(!j)return;j.timer=be_vpn_util.clear_timeout(j.timer);if(j.cb)j.cb(data.ret);delete this.queue[data.id];return;case"be_msg_add_listener":if(!this.on_add_listener)return;return this.on_add_listener(data);case"be_msg_del_listener":if(this.on_del_listener)return;return this.on_del_listener(data);case"be_msg_event":j=this.listeners[data.id];if(!j)return;j.cb.apply(null,data.args);return;case"be_msg_backbone_event":if(!this.on_backbone_event)return;return this.on_backbone_event(data.info);case"be_msg_connect":var _this=this;var port={name:data._connection_id,sender:{tab:{id:data._tab_id}},disconnect:()=>{_this.send({msg:"call_api",obj:"firefox",sub:"workers",func:"disconnect",args:[data._connection_id]})}};this.add_connection(port,data._connection_id,data._tab_id);if(this.on_connect)this.on_connect(data._connection_id);return;case"be_msg_disconnect":_this._after_disconnect(data._connection_id,data._tab_id);return}},add_connection:function(port,cid,tid){zerr.info("accepted connection "+cid+" from tab "+tid);if(!cid)return zerr("add_connection without connection_id");if(this.connections[cid]){if(v3)zerr.notice(`connection: ${cid} reconnected`);else zerr(`connection ${cid} already exists`);return}this.connections[cid]=port;if(!tid)return zerr.notice("not a tab connection: "+cid);this.tab_connections[tid]=this.tab_connections[tid]||[];this.tab_connections[tid].push(cid)},del_connection:function(cid,tid){zerr.info("connection "+cid+" from tab "+tid+" disconnected");if(!cid)return zerr("del_connection without connection_id");if(!this.connections[cid])return zerr("no connection with id: "+cid);delete this.connections[cid];if(!tid)return zerr.notice("not a tab connection: "+cid);var tab_conn=this.tab_connections[tid];if(!tab_conn||!tab_conn.includes(cid))return zerr("no connection "+cid+" for tab "+tid);array.rm_elm(tab_conn,cid);if(!tab_conn.length)delete this.tab_connections[tid]},is_connected:function(tid){return!!this.tab_connections[tid]},_after_disconnect:function(cid,tid){this.del_connection(cid,tid);if(this.on_disconnect)this.on_disconnect(cid)}});return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},7619:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>State});var _util_etask_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6386);var _util_etask_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_util_etask_js__WEBPACK_IMPORTED_MODULE_0__);var _util_util_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1291);var _util_util_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_util_util_js__WEBPACK_IMPORTED_MODULE_1__);var _util_date_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(932);var _util_date_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_util_date_js__WEBPACK_IMPORTED_MODULE_2__);
// LICENSE_CODE ZON
const chrome=self.chrome;class State{constructor(name,def,opt){opt=opt||{};this.name=name;this.value=def;this.ttl=opt.ttl||_util_date_js__WEBPACK_IMPORTED_MODULE_2___default().ms.HOUR;this.storage=opt.persistent?chrome.storage.local:opt.persistent===false?chrome.storage.session:chrome.storage.session||chrome.storage.local}get(path,def){return _util_util_js__WEBPACK_IMPORTED_MODULE_1___default().get(this.value,path,def)}set(path,value){let _this=this;return _util_etask_js__WEBPACK_IMPORTED_MODULE_0___default()((function*(){_util_util_js__WEBPACK_IMPORTED_MODULE_1___default().set(_this.value,path,value);yield _this.save()}))}delete(path){let _this=this;return _util_etask_js__WEBPACK_IMPORTED_MODULE_0___default()((function*(){_util_util_js__WEBPACK_IMPORTED_MODULE_1___default().unset(_this.value,path);yield _this.save()}))}save(){if(_util_util_js__WEBPACK_IMPORTED_MODULE_1___default().is_mocha()||!this.storage)return;let _this=this;return _util_etask_js__WEBPACK_IMPORTED_MODULE_0___default()((function*(){yield _util_etask_js__WEBPACK_IMPORTED_MODULE_0___default().cb_apply(_this.storage,".set",[{[_this.name]:{ts:Date.now(),value:_this.value}}])}))}load(){if(_util_util_js__WEBPACK_IMPORTED_MODULE_1___default().is_mocha()||!this.storage)return;let _this=this;return _util_etask_js__WEBPACK_IMPORTED_MODULE_0___default()((function*(){let key=_this.name;let data=yield _util_etask_js__WEBPACK_IMPORTED_MODULE_0___default().cb_apply(_this.storage,".get",[key]);if(!data||!data[key])return;let{value,ts}=data[key];if(value&&Date.now()-ts<_this.ttl)_this.value=value}))}}},9369:(module,exports,__webpack_require__)=>{"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;// LICENSE_CODE ZON
!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8763),__webpack_require__(7345)],__WEBPACK_AMD_DEFINE_RESULT__=function(_,be_util){const E={errors:0};function wrap_cb(cb){return function(){try{return cb.apply(this,arguments)}catch(err){E.errors++;E.last_error=err;if(E.errors==1){console.error("transport error %o",err);be_util.perr("be_transport_err",{},{err})}}}}E.chrome_tabs=chrome=>({add_connection_listener:wrap_cb((cb=>{if(chrome.runtime)chrome.runtime.onConnect.addListener(cb)})),remove_connection_listener:wrap_cb((cb=>{if(chrome.runtime)chrome.runtime.onConnect.removeListener(cb)})),add_listener:wrap_cb((cb=>{if(chrome.runtime)chrome.runtime.onMessage.addListener(cb)})),remove_listener:wrap_cb((cb=>{if(chrome.runtime)chrome.runtime.onMessage.removeListener(cb)})),send:wrap_cb((data=>{data._type="tpopup";if((!data._tab_id||data._tab_id==-1)&&chrome.runtime)chrome.runtime.sendMessage(data);else chrome.tabs.sendMessage(data._tab_id,data)})),get_data:e=>e,is_valid:e=>e&&e._type=="tpopup"||e._type=="login_done_popup"});E.tpopup=(chrome,tab_id)=>{const connection_id=tab_id+":tpopup_int:"+_.random(Number.MAX_SAFE_INTEGER);let port=chrome.runtime.connect({name:connection_id});port.onDisconnect.addListener((function uninit(){port.onDisconnect.removeListener(uninit);port=null}));return{add_listener:wrap_cb((cb=>{if(chrome.runtime)chrome.runtime.onMessage.addListener(cb)})),remove_listener:wrap_cb((cb=>{if(chrome.runtime)chrome.runtime.onMessage.removeListener(cb)})),send:wrap_cb((data=>{if(!port)return;data._type="tpopup";data._tab_id=tab_id;data._connection_id=connection_id;if(chrome.runtime)chrome.runtime.sendMessage(data)})),get_data:e=>e,is_valid:e=>e&&e._tab_id==tab_id&&e._type=="tpopup"}};return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},7345:(module,exports,__webpack_require__)=>{"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;// LICENSE_CODE ZON
!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8763),__webpack_require__(9824),__webpack_require__(6386),__webpack_require__(932),__webpack_require__(4996),__webpack_require__(901),__webpack_require__(665),__webpack_require__(1032),__webpack_require__(1291),__webpack_require__(5250),__webpack_require__(843),__webpack_require__(2181),__webpack_require__(7619),__webpack_require__(5317),__webpack_require__(4118),__webpack_require__(9641)],__WEBPACK_AMD_DEFINE_RESULT__=function(_,zerr,etask,date,sprintf,user_agent,ajax,storage,zutil,be_vpn_util,svc_util,be_no_log,State,rate_limit,zconf,conf){if(ajax.default)ajax=ajax.default;const E={};const is_bg=be_vpn_util.is_bg();const chrome=self.chrome;const assign=Object.assign,if_set=zutil.if_set;let ajax_cb,bext_config_cb;be_no_log=be_no_log.default;State=State.default;let state,init_ts;const{www_host}=conf;E.is_v3=chrome.runtime.getManifest().manifest_version==3;E.os_guess=user_agent.guess();E.browser_guess=user_agent.guess_browser();E.os_win=()=>E.os_guess.os=="windows";E.os_mac=()=>E.os_guess.os=="macos";E.is_mobile=()=>E.os_guess.mobile;let _is_laptop;E.is_laptop=()=>_is_laptop;E.version=()=>zconf.ZON_VERSION;E.install_version=()=>{let ext=get_bg_module("be_ext");if(ext)return ext.get("install_version")};E.install_ts=()=>{let ext=get_bg_module("be_ext");return ext&&ext.get("install_ts")||Date.now()};E.last_install_ts=()=>{let ext=get_bg_module("be_ext");return ext&&ext.get("last_install_ts")||E.install_ts()};var check_opera=/\bOPR\b\/(\d+)/i;E.browser=()=>{if(E.browser_guess.hola_browser)return"hola";if(E.browser_guess.edge)return"edge";var ua=navigator.userAgent;var opera=check_opera.exec(ua);return conf.browser.firefox?"firefox":conf.browser.opera||opera&&opera[1]?"opera":"chrome"};E.qs_ajax=o=>{var info={ext_ver:E.version(),install_ver:E.install_version(),install_ts:E.install_ts(),browser:E.browser(),product:E.get_product(),src_country:storage.get("src_country")};if(zutil.is_mocha()){info.browser=undefined;info.install_ts=undefined}assign(info,o);for(var k in info){if(info[k]===undefined)delete info[k]}return info};let storage_perr_sent;storage.on_err=(api,key,err)=>{if(zutil.is_mocha())return;zerr("%s failed %s %s",api,key,zerr.e2s(err));if(storage_perr_sent)return;storage_perr_sent=true;E.perr("be_storage_err",api+" "+key,{err,rate_limit:{count:1}})};E.get_install_ms=()=>{let ts=E.install_ts();return ts?Date.now()-ts:0};E.get_ua_update_ms=()=>{let ts=storage.get_int("ua_update_ts");return ts?Date.now()-ts:0};const get_bg_module=name=>{if(!is_bg)return null;let bg_main=E.rmt||self.be_bg_main;return name=="be_bg_main"?bg_main:bg_main&&bg_main[name]};E.get_manifest=()=>{if(chrome.runtime&&chrome.runtime.getManifest)return chrome.runtime.getManifest()};const is_enabled_for_url=url=>{let be_vpn=get_bg_module("be_vpn");if(!url.match("^https?://.*"))url=`https://${url}/`;return be_vpn&&be_vpn.get_enabled_rule({url})};E.build_info=opt=>{let ext=get_bg_module("be_ext");let mode=get_bg_module("be_mode");let tabs=get_bg_module("be_tabs");let be_trial=get_bg_module("be_trial");let be_ab_test=get_bg_module("be_ab_test");let be_rule=get_bg_module("be_rule");let be_vpn=get_bg_module("be_vpn");let info={version:zconf.ZON_VERSION,local_ts:new Date,src_country:storage.get("src_country")};let manifest=E.get_manifest();if(manifest){info.manifest_version=manifest.version;info.manifest_ver=manifest.manifest_version}info.conf_stamp=E.CG("stamp");if(mode){if_set(mode.get("svc.version"),info,"svc_version");if_set(mode.get("svc.appid"),info,"svc_appid");if_set(mode.get("pending"),info,"svc_mode_pending");if_set(mode.get("svc.campaign"),info,"campaign");if_set(mode.get("svc.uuid"),info,"svc_uuid")}if(ext){if_set(ext.get("ext.active"),info,"ext.active");let suspended=ext.get("ext.suspended");if_set(suspended?suspended.permanent?"permanent":"temporary":"",info,"ext.suspended");if_set(ext.get("ext.conflict"),info,"ext_conflict");if_set(ext.get("no_permission"),info,"no_permission");if_set(ext.get("is_premium")&&1,info,"is_premium");if_set(ext.get("user_id"),info,"hola_uid_id");let hola_uid=ext.get("hola_uid");if(hola_uid)info.hola_uid_provider=hola_uid.split("/")[0];if_set(ext.get("session_key"),info,"session_key");if_set(ext.get("pap_a_aid"),info,"aff_id");let bext_config=ext.get("bext_config");if_set(zutil.get(bext_config,"version"),info,"conf_ver");if(be_trial){const total_watch_time=be_trial.get_param_from_state("total_watch_time");if(total_watch_time)info.trial_watch_time=date.dur_to_str(total_watch_time);if_set(be_trial.get_watch_time_ms()||undefined,info,"trial_watch_time_ms")}if(be_ab_test)if_set(be_ab_test.get_ab_test_str(),info,"ab_test");let f;if(f=ext.get("features"))assign(info,f)}let active_url;if(tabs){active_url=tabs.get("active.url");info.active_tab=tabs.get("active.id");if(tabs.get("active.incognito"))info.active_incognito=true}if(active_url&&be_rule){let rule=be_vpn.get_enabled_rule({url:active_url,tab_id:info.active_tab});if(rule){let root_url;let parsed=new URL(active_url);if(parsed.protocol=="chrome:"){root_url=parsed.protocol.replace(":","")+"."+parsed.hostname}else root_url=svc_util.get_root_url(active_url);if_set(root_url,info,"root_url");info.proxy_country=rule.country}else if_set(storage.get("last_root_url"),info,"last_root_url")}let enabled_for_browser=be_vpn&&be_vpn.is_enabled_for_browser();info.unblocking_mode=E.full_browser_mode()||enabled_for_browser?"browser":"tab";if_set(opt&&opt.is_tpopup,info,"is_tpopup");if(chrome)info.product_type=conf.type;info.id=zutil.get(chrome,"runtime.id");var browser=E.browser();var browser_ver=browser=="opera"?E.browser_guess.opera_version:E.browser_guess.version;info.browser=browser+" "+browser_ver;info.browser_build=conf.browser.name;info.platform=navigator.platform;info.user_agent=navigator.userAgent;if(self.hola){var now=Date.now();var install_ms;if(install_ms=E.get_install_ms()){info.install_ms=install_ms;info.install_time=date.ms_to_dur_interval(install_ms)}var update,diff;if((update=ext&&ext.get("update_ts"))&&(diff=now-update)<=date.ms.MIN){info.after_update=true;info.update_ms=diff}}info.last_install_ts=ext&&ext.get("last_install_ts");info.since_init_ms=Date.now()-init_ts;if(E.is_v3)info.since_state_init_ms=Date.now()-state.get("init_ts");return info};E.build=(opt,add_build)=>{const info=Object.assign(E.build_info(opt),add_build||{});let s="";for(let f in info)s+=(s&&"\n")+f+": "+info[f];return s};E.perr_id=(id,new_name)=>{if(new_name)return"vpn."+E.browser()+"."+id;if(!id.match(/^be_/))id="be_"+id;return id};function perr_send(id,info,opt){opt=zutil.clone(opt||{});var qs=opt.qs||{},data=opt.data||{};data.is_json=1;if(info&&typeof info!="string")info=zerr.json(info);var err=opt.err;if(err){if(!info)info=""+(err.message||zerr.json(err));else if(!opt.bt)opt.bt=""+(err.message||zerr.json(err));if(err.hola_info){opt.bt="status "+err.hola_info.status+" "+err.hola_info.method+" "+err.hola_info.url+" text "+(""+err.hola_info.response_text).substr(0,256)+"\n"+(opt.bt||"")}}data.info=info;qs.id=id;opt={url:conf.url_perr+"/perr",qs,data,method:"POST",json:1};return ajax_cb?ajax_cb(opt):ajax(opt)}function perr_install(perr_orig,pending){while(pending.length)perr_send.apply(null,pending.shift());return function(id,info,opt){perr_orig.apply(null,arguments);return perr_send(id,info,opt)}}function laptop_test(){_is_laptop=storage.get("is_laptop");if(!_is_laptop&&!E.is_mobile()&&navigator&&navigator.getBattery){navigator.getBattery().then((function(b){_is_laptop=!b.charging||b.chargingTime!=0;storage.set("is_laptop",_is_laptop)}))}}let reinited=false;E.is_bg_reinited=()=>reinited;E.init=()=>etask((function*(){init_ts=Date.now();if(E.is_v3){state=new State("util_state",{perr_rate_limit:{},perr_dropped:{},init_ts:null},{ttl:24*date.ms.HOUR,persistent:false});yield state.load();if(state.get("init_ts"))reinited=true;else yield state.set("init_ts",init_ts)}laptop_test();zerr.perr_install(perr_install)}));E.get_product=()=>conf.type;E.get_connection_type=()=>{const connection=navigator&&(navigator.connection||navigator.mozConnection||navigator.webkitConnection);return connection&&connection.type};E.get_device_type=()=>E.is_mobile()?"mobile":_is_laptop?"laptop":"desktop";const get_ext_opt=()=>({ext_ver:E.version(),install_ver:E.install_version()||E.version(),install_ts:E.install_ts(),src_country:storage.get("src_country"),browser:E.browser(),now:E.now()});E.get_site_key=root_url=>svc_util.get_site_key(E.get_bext_config(),get_ext_opt(),root_url);E.is_same_site=(root_url1,root_url2)=>{if(root_url1==root_url2)return true;let key1=E.get_site_key(root_url1),key2=E.get_site_key(root_url2);return!!(key1&&key2&&key1==key2)};E.get_site_conf=(root_url,path,def)=>svc_util.get_site_conf(E.get_bext_config(),get_ext_opt(),root_url,path,def);const get_tests_by_conf=(conf,path)=>{let conf2test=conf&&conf._conf2ab_test_;if(!conf2test||!path)return[];let key=path.split(".")[0];return conf2test[key]};E.get_trial_conf=(trial,path,def)=>{trial=trial||{};let tests=get_tests_by_conf(trial.conf,path)||[];for(let test of tests){if(ab_test_report)ab_test_report(test,path)}return path?zutil.get(trial.conf,path,def):trial.conf||def};let ab_test_report;E.set_ab_test_report_cb=cb=>ab_test_report=cb;E.get_suggestion_conf=(site_conf,src_country)=>{if(!site_conf)return;src_country=(src_country||"").toUpperCase();let suggestion_popup=site_conf.suggestion_popup||{};return suggestion_popup[src_country]===undefined?suggestion_popup["*"]:suggestion_popup[src_country]};E.convert_url2regex=(conf,name)=>{const rules=conf&&conf[name];if(!rules)return;conf[name]=rules.map((rule=>assign({},rule,{url:typeof rule.url=="string"?new RegExp(rule.url.replace(/\./g,"\\.").replace(/\*\*/,"*").replace(/^\*/,"").replace(/\*/g,".*")):rule.url})))};E.find_conf_rule_by_url=(conf,name,url)=>{const rules=conf&&conf[name];if(rules)return rules.find((r=>r.url&&r.url.test&&r.url.test(url)))};E.get_site_verify_conf=(root_url,url,country)=>{let verify;if(!(verify=E.get_site_conf(root_url,"verify")))return;let sv,site,name=verify[country]===undefined?"*":country;if(!(site=E.find_conf_rule_by_url(verify,name,url))&&(!(sv=verify[name])||!sv.find((v=>!v.url)))){return}let key=E.get_site_key(root_url),idx=key.indexOf("_");return assign({id:key.slice(0,idx!=-1?idx:undefined)},site)};E.get_dont_show_def_period=()=>E.CG("popup.dont_show_def_period","7d");E.reload_ext=(cb,period)=>{var info;period=period||date.ms.MIN;if(!(info=storage.get_json("reload_ext")))info={ts:Date.now(),count:0};var diff=Date.now()-info.ts;if(diff>period||diff<0){info.ts=Date.now();info.count=1}else if(info.count<2)info.count++;else return zerr("too many reload_ext "+info.count);storage.set_json("reload_ext",info);cb();return true};E.reload_ext_native=function(args){E.perr("be_runtime_reload_ext");storage.set("reload_ext_ts",Date.now());if(chrome.runtime.reload)return chrome.runtime.reload();var bg=chrome.extension.getBackgroundPage();bg.location.reload();if(self!=bg)self.close()};E.check_permission=name=>{if(!chrome||!chrome.permissions)return;return etask({name:"check_permission",cancel:true},(function*check_permission(){try{let info={origins:E.is_v3?["*://*/*"]:["<all_urls>"]};if(name)info.permissions=[name];chrome.permissions.contains(info,(res=>this.continue(res)));return yield this.wait()}catch(e){E.perr("check_permission_failed",{},{err:e})}}))};E.grant_permission=function(name){if(!chrome||!chrome.permissions)return;return etask({name:"grant_permission",cancel:true},(function*grant_permission(){try{chrome.permissions.request({permissions:[name],origins:E.is_v3?["*://*/*"]:["<all_urls>"]},(res=>this.continue(res)));return yield this.wait()}catch(e){E.perr("grant_permission_failed",{},{err:e})}}))};E.set_ajax_cb=cb=>{ajax_cb=cb};E.set_bext_config_cb=cb=>{bext_config_cb=cb};E.format_log=log=>{const skips=[/backbone\.\w+\./,/ajax.*(perr| url )/,/perr.*rate too high/,/connection.*tpopup(_int)?:[0-9]+/,/be_tab_unblocker.*chrome-extension/,/stop .*cws/,/: (tab:[\d-]+ )?[a-z.]*popup /,/fetch_rules/,/be_req_bw/,/update url .* is_vpn false/,/checking if site has high unblocking/,/impl\.init/,/be_(bw_)?req_err/,/not_working_trigger/,/be\.ccgi\.send/,/be_vpn_total_active_time/,/be_media_failure/];const formats=[{from:/(perr [\w.]+) .*$/,to:"$1"}];const format=line=>{let ret=line;formats.forEach((f=>{ret=ret.replace(f.from,f.to)}));return ret};const map=line=>{if(!/]$/.test(line))return format(line);let cnt=0,str;let args_len=line.split("").reverse().findIndex((c=>{if(c=='"')return void(str=!str);return!str&&(cnt+=c=="]"?1:c=="["?-1:0)==0}));if(args_len==-1)return format(line);args_len++;const fmt=line.slice(0,-args_len);try{const args=JSON.parse(line.slice(-args_len));line=sprintf.apply(null,[fmt].concat(args))}catch(e){line+=" (truncated)"}return format(line)};return(log||[]).map(map).filter((line=>!skips.find((s=>s.test(line)))))};function throttle_log(log,agg){const throttle=[{test:/tab_unblocker slow/,per:date.ms.MIN},{test:/media failure detected/,per:date.ms.SEC},{test:/popup not allowed/},{test:/tab already attached/},{test:/perr be_wrong_agent/}];return log.map((l=>{let t=throttle.find((_t=>_t.test.test(l)));if(!t)return l;let m,prefix=(m=l.match(/^\[[\w[\]]+\] /))&&m[0]||"";let _l=l.replace(prefix,"");let date_str=_l.substr(0,23),d=new Date(date_str);if(!t.last){t.last=d;t.count=0;return l}let count=++t.count;if(!t.per||agg&&d-t.last<t.per)return;t.last=d;t.count=0;return agg&&count>1?prefix+date_str+" x"+count+_l.substr(23):l})).filter((l=>l))}E.get_zerr_log=()=>zerr.log?E.format_log(zerr.log).slice(-zerr.log.max_size):[];E.get_log=(ui_log=[])=>{let idx=0;const be_ext=get_bg_module("be_ext");const is_premium=be_ext&&be_ext.get("is_premium");const map=f=>l=>({from:f,line:l,idx:idx++});const log=E.get_zerr_log().map(map(is_bg?"bg":"ui")).concat(ui_log.map(map("ui"))).sort(((a,b)=>a.from==b.from?a.idx-b.idx:a.line.localeCompare(b.line))).map((c=>"["+(is_premium?"P":"F")+"]["+c.from+"] "+c.line));return throttle_log(log,true)};E.perr_opt=(id,info,opt)=>{const bg_main=get_bg_module("be_bg_main");let{err,bt,filehead}=opt,ver=E.version();bt=bt||err&&zerr.e2s(err);if(err&&err.hola_info){bt="status "+err.hola_info.status+" "+err.hola_info.method+" "+err.hola_info.url+" text "+(""+err.hola_info.response_text).substr(0,256)+"\n"+bt}if(err&&err.etask)opt.err=_.omit(err,"etask");let qs={id,ext_ver:ver,product:E.get_product(),browser:E.browser()};if(opt.with_log)filehead=(filehead||"")+"\n"+E.get_log(opt.ui_log);if(info&&typeof info=="object"){info=assign({},info);const url_keys=["root_url","root_url_prev","tab_url","page_url","top_url"];for(let key of url_keys){if(info[key]&&typeof info[key]=="string"&&!is_enabled_for_url(info[key])){delete info[key]}}}opt.data={bt,info,filehead,ver,build:E.build({is_tpopup:opt.is_tpopup},opt.build)};qs.uuid=bg_main&&bg_main.get("uuid")||storage.get("uuid");opt.qs=qs;let err_re=/err|slow|problem|fail|bad|mismatch|invalid|wrong|missing/;opt.level=opt.level||(err||bt||id.match(err_re)?zerr.L.ERR:zerr.L.NOTICE);return{id,info,opt}};let perr_cb;E.set_perr_cb=cb=>perr_cb=cb;E.trigger_user_message=id=>{const ext=get_bg_module("be_ext");if(!ext)return;const valid_user_message=ext.get("valid_user_message")||[];let valid_till=-1;const is_msg_triggered=valid_user_message.find((vm=>{const trigger=vm.trigger;if(!trigger)return false;const events=vm.trigger.events;if(!events)return false;const found=events.indexOf(id)>-1;if(found)valid_till=trigger.expires?Date.now()+trigger.expires:-1;return found}));if(!is_msg_triggered)return;const um=storage.get_json("user_message_show")||[];const um_shown=storage.get_json("user_message_shown")||[];if(um_shown.indexOf(is_msg_triggered.id)>=0)return;const m_exist=um.find((one=>one.id==is_msg_triggered.id));if(m_exist){m_exist.ts=Date.now();m_exist.valid_till=valid_till}else{um.push(Object.assign({},is_msg_triggered,{ts:Date.now(),valid_till}))}const n_um=um.slice();storage.set_json("user_message_show",n_um);ext.set("user_message_show",n_um)};E.perr=(id,info,opt,new_name)=>be_no_log.enabled(id)?null:etask((function*(){info=info||{};opt=opt||{};id=E.perr_id(id,new_name);let conf_rate_limit=E.CG(`perr_rate_limit.${id}`);if(conf_rate_limit){opt.rate_limit=opt.rate_limit||{};opt.rate_limit.count=conf_rate_limit}if(E.is_v3&&state){let _rate_limit=opt.rate_limit||{};opt.rate_limit=false;let ms=_rate_limit.ms||date.ms.HOUR,count=_rate_limit.count||10;let{disable_drop_count}=_rate_limit;let rl=state.get(`perr_rate_limit.${id}`)||{};let dropped=state.get(`perr_dropped.${id}`)||0;let drop=!rate_limit(rl,ms,count);yield state.set(`perr_rate_limit.${id}`,rl);if(drop){yield state.set(`perr_dropped.${id}`,dropped+1);zerr("perr %s %s rate too high %s %d %d",id,zerr.json(info),zerr.json(rl),ms,count);return}if(dropped){yield state.set(`perr_dropped.${id}`,0);if(!disable_drop_count&&info&&typeof info!="string")info.w=dropped}}const bg_main=get_bg_module("be_bg_main");if(conf.check_agree_ts&&!(bg_main&&bg_main.get("agree_ts")))return void zerr("no agree_ts, skip perr %s",id);let browser_test=storage.get_json("test_from_browser_ab");if(!browser_test)browser_test={};if(!opt.build)opt.build={};const www_tests=yield be_vpn_util.get_www_tests();opt.build=Object.assign({},opt.build,www_tests,browser_test);let perr_opt=E.perr_opt(id,info,opt);if(zutil.is_mocha())return;let res=yield zerr.perr(id,perr_opt.info,perr_opt.opt);if(perr_cb)perr_cb(res);E.trigger_user_message(id);return res}));E.get_bext_config=()=>bext_config_cb?bext_config_cb():storage.get_json("bext_config_last");E.CG=(path,def)=>zutil.get(E.get_bext_config(),path,def);E.check_min_ver=min_ver=>svc_util.check_min_ver(E.version(),min_ver);E.check_min_install_ver=min_ver=>svc_util.check_min_install_ver(E.install_version()||E.version(),min_ver);E.check_min_install_ts=ts=>svc_util.check_min_install_ts(E.install_ts(),ts);E.check_min_tfi=tfi=>!tfi||Date.now()-E.install_ts()>tfi;E.is_conf_allowed=(on,id)=>{let random;if(!on)return false;id=id||"ext_rand_id";if(!(random=+storage.get(id)))storage.set(id,random=Math.random());return random<on};E.proxy_error_ui_enabled=type=>{const c=E.CG("proxy_error_ui")||{};return!!(E.check_min_ver(c.min_ver)&&c[type])};E.set_hola_org_cookie=(name,value)=>chrome.cookies.set({url:`https://${www_host}`,domain:`.${www_host}`,name,value});E.del_hola_org_cookie=name=>{try{chrome.cookies.remove({url:`https://${www_host}`,name})}catch(e){console.error(`falied to rm ${www_host} cookes %s`,e)}};let now_cb;E.set_now_cb=cb=>now_cb=cb;E.now=()=>now_cb?now_cb():Date.now();E.get_dpi=()=>{try{let div=document.createElement("div");div.style.width="1in";document.body.appendChild(div);let ppi=document.defaultView.getComputedStyle(div,null).getPropertyValue("width");document.body.removeChild(div);return parseFloat(ppi)||96}catch(e){console.error("failed to get dpi %s",e);return 96}};E.set_full_browser_mode=value=>storage.set("full_browser_mode",value);E.full_browser_mode=()=>storage.get_json("full_browser_mode");E.init();return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},665:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _util_etask_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6386);var _util_etask_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_util_etask_js__WEBPACK_IMPORTED_MODULE_0__);var _util_date_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(932);var _util_date_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_util_date_js__WEBPACK_IMPORTED_MODULE_1__);var _util_escape_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4336);var _util_escape_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_util_escape_js__WEBPACK_IMPORTED_MODULE_2__);var _util_zerr_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9824);var _util_zerr_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_util_zerr_js__WEBPACK_IMPORTED_MODULE_3__);var events__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8425);var events__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_4__);
// LICENSE_CODE ZON
const E=do_fetch;const assign=Object.assign;E.events=new(events__WEBPACK_IMPORTED_MODULE_4___default().EventEmitter);E.json=function(opt){return do_fetch(assign({},opt,{json:1}))};E.abort=function(aj){aj.goto("abort")};function do_fetch(opt){let{retry,data,url,perr,qs,method="GET",timeout=20*_util_date_js__WEBPACK_IMPORTED_MODULE_1___default().ms.SEC,slow=2*_util_date_js__WEBPACK_IMPORTED_MODULE_1___default().ms.SEC}=opt;let response_etag,response_status;let t0=Date.now();let response;let controller=new self.AbortController;return _util_etask_js__WEBPACK_IMPORTED_MODULE_0___default()([function(){const tout_id=setTimeout((()=>controller.abort("timeout")),timeout);if(method=="GET"&&data){qs=data;data=undefined}const headers=new self.Headers(opt.headers);url=_util_escape_js__WEBPACK_IMPORTED_MODULE_2___default().uri(opt.url,_util_escape_js__WEBPACK_IMPORTED_MODULE_2___default().qs(qs));let body;if(data&&!headers.has("Content-Type")&&!(data instanceof FormData)&&typeof data=="object"){body=JSON.stringify(data);headers.append("Content-Type","application/json; charset=UTF-8")}else body=data;fetch(url,{method,body,signal:controller.signal,headers,credentials:opt.with_credentials?"include":"same-origin"}).then((res=>{clearTimeout(tout_id);response=res;if(!res.ok){this.throw(new Error(`${res.status} ${res.statusText}`));return}response_etag=res.headers.get("etag");response_status=res.status;let server_ts=+res.headers.get("x-hola-ts");if(server_ts)E.events.emit("server_ts",server_ts);let conf_ver=+res.headers.get("x-hola-conf-ver");if(conf_ver)E.events.emit("conf_ver",conf_ver);const cont_type=response.headers.get("content-type");this.continue(opt.json||cont_type&&cont_type.includes("application/json")?res.json():res.text())})).catch((err=>{clearTimeout(tout_id);this.throw(err instanceof Error?err:new Error(""+err))}));return this.wait()},function catch$(err){response=response||{};let status=response.status;let status_text=response.statusText;let response_text=response.responseText;_util_zerr_js__WEBPACK_IMPORTED_MODULE_3___default()("fetch failed url "+url+" data "+_util_zerr_js__WEBPACK_IMPORTED_MODULE_3___default().json(data).substr(0,200)+" status: "+status+" "+status_text+"\nresponseText: "+(response_text||"").substr(0,200));if(retry)return this.return(do_fetch(assign({},opt,{retry:retry-1})));if(err instanceof Error&&err.hola_info)throw err;if(status_text=="timeout")E.events.emit("timeout",this);if(opt.no_throw)return this.return({err,status});err.hola_info={url,method,status};throw err},function(respose_data){let t=Date.now()-t0;_util_zerr_js__WEBPACK_IMPORTED_MODULE_3___default()[t>slow?"err":"debug"]("fetch "+(t>slow?"SLOW ":"ok ")+t+"ms url "+url);if(t>slow&&perr&&!url.includes("client_cgi/perr")){perr({id:"be_ajax_slow",info:`${t}ms ${url}`,rate_limit:{count:1}})}if(opt.full_response){return this.return({data:respose_data,etag:response_etag,status:response_status})}return this.return(respose_data)},function abort(){controller.abort()}])}const __WEBPACK_DEFAULT_EXPORT__=E},2181:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _util_storage_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1032);var _util_storage_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_util_storage_js__WEBPACK_IMPORTED_MODULE_0__);var _util_util_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1291);var _util_util_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_util_util_js__WEBPACK_IMPORTED_MODULE_1__);
// LICENSE_CODE ZON
const E={};let status_cb,no_log_for_plus,no_log_for_uid={};let allowed_perrs={be_install:true,be_update:true};let cached=_util_storage_js__WEBPACK_IMPORTED_MODULE_0___default().get_json("no_log")||{};let enabled=cached.enabled;let is_plus=cached.is_plus;let uuid=cached.uuid;const invalidate=()=>{let no_log=!!(uuid&&uuid in no_log_for_uid?no_log_for_uid[uuid]:is_plus&&no_log_for_plus);if(enabled!==no_log){enabled=no_log;if(status_cb)status_cb(enabled)}_util_storage_js__WEBPACK_IMPORTED_MODULE_0___default().set_json("no_log",{enabled,is_plus,uuid})};E.set_plus=_is_plus=>{if(_is_plus===undefined||_is_plus===is_plus)return;is_plus=_is_plus;invalidate()};E.set_config=conf=>{no_log_for_plus=conf.no_log_for_plus;no_log_for_uid=conf.no_log_for_uid||{};allowed_perrs=_util_util_js__WEBPACK_IMPORTED_MODULE_1___default().bool_lookup(conf.no_log_perrs||[]);invalidate()};E.set_uuid=_uuid=>{if(_uuid===undefined||_uuid===uuid)return;uuid=_uuid;invalidate()};E.set_status_cb=cb=>{status_cb=cb;cb(enabled)};E.enabled=perr_id=>enabled&&!(perr_id&&allowed_perrs[perr_id]);const __WEBPACK_DEFAULT_EXPORT__=E},1032:(module,exports,__webpack_require__)=>{"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;// LICENSE_CODE ZON
!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(6386)],__WEBPACK_AMD_DEFINE_RESULT__=(etask=>{const E={},{chrome}=self;let init_et,inited,data={};const storage_get=arg=>etask.cb_apply(chrome.storage.local,".get",[arg]);const storage_set=arg=>etask.cb_apply(chrome.storage.local,".set",[arg]);const storage_remove=arg=>etask.cb_apply(chrome.storage.local,".remove",[arg]);const storage_clear=()=>etask.cb_apply(chrome.storage.local,".clear",[]);E.init=()=>{if(inited)return;if(init_et)return init_et;chrome.storage.onChanged.addListener(((changes,namespace)=>{if(namespace!="local")return;for(let[key,val]of Object.entries(changes))data[key]=val.newValue}));init_et=etask((function*(){this.finally((()=>{init_et=null;inited=true}));yield migrate();data=(yield storage_get(null))||{}}));return init_et};const migrate=()=>etask((function*(){if(!self.localStorage)return;let current_data=(yield storage_get(null))||{};if(current_data._storage_migrated)return;let keys=Object.keys(localStorage);let migrared_data={};for(let key of keys){if(!(key in current_data))migrared_data[key]=localStorage.getItem(key)}migrared_data._storage_migrated=true;yield storage_set(migrared_data)}));E.on_err=()=>{};E.set=(key,val)=>{if(data[key]==val)return;data[key]=val;return storage_set({[key]:val})};E.get=key=>data[key];E.get_int=key=>+E.get(key)||0;E.clr=key=>{delete data[key];return storage_remove(key)};E.clr_all=()=>{data={};return storage_clear()};E.set_json=(key,val)=>{try{return E.set(key,JSON.stringify(val||null))}catch(e){E.on_err("storage_set_json",key,e)}};E.get_json=key=>{var val=E.get(key);if(!val)return val;try{val=JSON.parse(val)}catch(e){console.log("err "+e)}return val};E.init();return E}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},5250:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON
"use strict";(function(){const is_node=typeof module=="object"&&module.exports&&module.children;if(!is_node);else;!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(6386),__webpack_require__(5305),__webpack_require__(1291),__webpack_require__(3958),__webpack_require__(9824),__webpack_require__(843),__webpack_require__(1889)],__WEBPACK_AMD_DEFINE_RESULT__=function(etask,zurl,zutil,pcountries,zerr,svc_util,hash){const E={};let conf;E.assert=(exp,err,msg)=>{if(exp)return;zerr("assert failed exp %s err %s msg %s",exp,err,msg);err=err||exp;throw err instanceof Error?err:new Error(err)};E.assert_bg=f=>zerr.assert(E.is_bg(),`file ${f} can only be included in background`);E.assert_ui=f=>zerr.assert(!E.is_bg(),`file ${f} can only be included in ui`);E.new_etask=n=>etask(n,(function*new_etask(){yield this.wait()}));E.set_timeout=(cb,t,opt)=>{opt=opt||{};const name="set_timeout_"+(opt.name||cb.name||"unknown");const sp=etask((function*set_timeout(){this.name=name;yield etask.sleep(t);cb()}));if(opt.sp)opt.sp.spawn(sp);return sp};E.set_interval=(cb,t,opt)=>{opt=opt||{};const name="set_interval_"+(opt.name||cb.name||"unknown");const sp=etask((function*set_interval(){this.name=name;while(true){yield etask.sleep(t);cb()}}));if(opt.sp)opt.sp.spawn(sp);return sp};E.clear_timeout=E.clear_interval=et=>{if(et)et.return()};E.is_all_browser=rule=>rule&&rule.name=="all_browser";E.is_debug_peer=rule=>rule&&rule.name=="debug_peer";E.set_conf=c=>conf=c;E.is_skip_url=url=>{if(!url)return true;const protocol=zurl.get_proto(url),host=zurl.get_host(url);if(zurl.is_ip_port(host)||protocol.search(/^(http|https)$/)==-1||host=="localhost"||!zurl.is_valid_domain(host)){return true}return zurl.is_hola_domain(host)&&!/(access|unblock)\/([^/]*)\/using\/.*/.test(url)};E.is_google=root_url=>root_url&&(root_url.split(".")[0]=="google"||root_url.split(".")[1]=="google");E.is_stub_url=(url,is_premium)=>E.is_skip_url(url)||!is_premium&&E.is_google(svc_util.get_root_url(url));E.is_youtube=root_url=>root_url&&(root_url.split(".")[0]=="youtube"||root_url.split(".")[1]=="youtube");E.get_rules=(_rules,url,ignore)=>{url=url||"";var _r,rules,ret=[],r_enabled=null;if(!_rules||!(rules=_rules.unblocker_rules))return[];for(_r in rules){var r=rules[_r];if(!r.supported)continue;if(!ignore&&r.enabled&&E.is_all_browser(r))return[r];var urls=r.root_url;if(urls&&urls.some((rurl=>{try{return url.match(rurl)}catch(e){}}))){if(r.enabled)r_enabled=r;else ret.push(r)}}if(r_enabled)ret.unshift(r_enabled);return ret};E.get_tld_country=(host,strict_match)=>{if(!host)return"";var tld=zurl.get_top_level_domain(host);if(!tld)return"";tld=tld.toUpperCase();if(!strict_match&&tld=="COM")return"US";if(tld=="UK")tld="GB";var skip_domain=["TV","FM","IO","AM"];if(skip_domain.includes(tld))return"";if(!pcountries.proxy_countries.bext.includes(tld))return"";return tld};E.get_popular_country_old=opt=>{var c0,c1,tld=E.get_tld_country(opt.host);var p={};c0=tld||"US";c1=c0=="US"?"GB":"US";p[c0]={proxy_country:c0,rating:.02};p[c1]={proxy_country:c1,rating:.01};var rule_ratings=opt.rule_ratings||[];rule_ratings.forEach((country_ratings=>{if(country_ratings.rating<.1)return;var country=country_ratings.proxy_country.toUpperCase();var ratings={proxy_country:country,rating:country_ratings.rating};p[country]=ratings}));var popular_array=[];zutil.forEach(p,(r=>{popular_array.push(r)}));popular_array.sort(((a,b)=>a.rating-b.rating>0?-1:1));return popular_array};E.get_popular_country=opt=>{let domain_country=E.get_tld_country(opt.host,true);let popular_obj={};(opt.rule_ratings||[]).forEach((country_ratings=>{if(country_ratings.rating<.1)return;const proxy_country=country_ratings.proxy_country.toUpperCase();popular_obj[proxy_country]={proxy_country,rating:country_ratings.rating}}));if(domain_country){popular_obj[domain_country]={proxy_country:domain_country,rating:1.01};const c1=domain_country=="US"?"GB":"US";if(!popular_obj[c1])popular_obj[c1]={proxy_country:c1,rating:.01}}else{const c0="US",c1="GB";if(!popular_obj[c0]||popular_obj[c0].rating<1)popular_obj[c0]={proxy_country:c0,rating:.99};if(!popular_obj[c1])popular_obj[c1]={proxy_country:c1,rating:.01}}let popular_array=Object.values(popular_obj);popular_array.sort(((a,b)=>a.rating-b.rating>0?-1:1));return popular_array};E.must_verify_email=user=>user&&user.emails&&!user.verified;E.get_rule_min_fmt=rule=>zutil.pick(rule||{},"name","country");E.is_tpopup=()=>{if(E.is_bg())return false;if(E.get_tpopup_mode()=="window")return true;try{return self!=self.top}catch(e){return true}};E.is_bg=()=>location.pathname=="/js/bg.html"||location.pathname=="/js/bg.bg.bundle.js";E.is_new_tab=url=>url=="chrome://newtab/";E.is_browser_internal_url=url=>!!url.match("^(chrome|opera|edge|hola|about):");E.root2url=root_url=>"http://"+root_url+"/";E.get_tpopup_type=()=>zutil.get(self,"hola.tpopup_opt.type");E.get_tpopup_mode=()=>zutil.get(self,"hola.tpopup_opt.mode");E.get_peer_filter_opt=s=>{if(!s)return;let res={},g={};let allowed={country:{match:/[a-z]{2}/,group:1},asn:{match:/\d+(-\d+)*/,group:1},cid:{match:/\w+_\d+\.\d+\.\d+\.\d+_\d+/,group:2},ip:{match:/\d+\.\d+\.\d+\.\d+/,group:3}};s=s.split(",");for(let e of s){let o=e.split(":");if(!allowed[o[0]]||!o[1]||!allowed[o[0]].match.test(o[1]))return;res[o[0]]=o[1];g[allowed[o[0]].group]=true}return Object.keys(g).length==1&&res};E.get_user_name=opt=>{let res="user-uuid-"+opt.uuid+(opt.asnum&&opt.peer_country?"-asnum-"+opt.asnum+"-peer_country-"+opt.peer_country:opt.asnum?"-asnum-"+opt.asnum:opt.cid?"-peer_cid-"+opt.cid:opt.peer_ip?"-peer_ip-"+opt.peer_ip:"");if(opt.is_premium!==undefined)res+="-is_prem-"+(opt.is_premium?"1":"0");return res};E.get_cookies=domain=>etask((function*(){if(!self.chrome||!self.chrome.cookies)return null;return(yield etask.cb_apply(self.chrome.cookies,".getAll",[{domain}]))||[]}));E.get_cookie=(domain,name)=>etask((function*(){if(!self.chrome||!self.chrome.cookies)return null;let res=yield etask.cb_apply(self.chrome.cookies,".get",[{url:`https://${domain}`,name}]);return(res||{}).value}));E.get_hola_cookie=name=>etask((function*(){for(const d of zurl.hola_domains){const cookie=yield E.get_cookie(d,name);if(cookie)return cookie}}));E.get_hola_cookies=names=>etask((function*(){const res={},cookies={};for(const name of names){for(let d of zurl.hola_domains){d="."+d;if(!cookies[d]){cookies[d]={};const _cookies=yield E.get_cookies(d);if(_cookies){for(const c of _cookies)cookies[d][c.name]=c.value}}if(cookies[d]&&cookies[d][name]&&!res[name])res[name]=cookies[d][name]}}return res}));E.get_www_tests=()=>etask((function*(){let ui_testing=yield E.get_hola_cookie("ui_testing");try{ui_testing=JSON.parse(decodeURIComponent(ui_testing))}catch(e){ui_testing={}}const res={};for(let[k,v]of Object.entries(ui_testing)){if(k.endsWith("_conf"))continue;const conf=ui_testing[`${k}_conf`];if(conf&&conf.ext&&conf.on>0&&conf.on<1){res[k]=v;if(conf.name)res[conf.name]=v}}return res}));return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},3958:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON
"use strict";(function(){var is_node=typeof module=="object"&&module.exports&&module.children;if(!is_node);else;!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(1291)],__WEBPACK_AMD_DEFINE_RESULT__=function(zutil){var E={};E.ports_offset=24e3;E.ports={af:{port:0},ax:{port:1},al:{port:2},dz:{port:3},as:{port:4},ad:{port:5},ao:{port:6},ai:{port:7},aq:{port:8},ag:{port:9},ar:{port:10},am:{port:11},aw:{port:12},au:{port:13},at:{port:14},az:{port:15},bs:{port:16},bh:{port:17},bd:{port:18},bb:{port:19},by:{port:20},be:{port:21},bz:{port:22},bj:{port:23},bm:{port:24},bt:{port:25},bo:{port:26},bq:{port:27},ba:{port:28},bw:{port:29},bv:{port:30},br:{port:31},io:{port:32},bn:{port:33},bg:{port:34},bf:{port:35},bi:{port:36},kh:{port:37},cm:{port:38},ca:{port:39},cv:{port:40},ky:{port:41},cf:{port:42},td:{port:43},cl:{port:44},cn:{port:45},cx:{port:46},cc:{port:47},co:{port:48},km:{port:49},cg:{port:50},cd:{port:51},ck:{port:52},cr:{port:53},ci:{port:54},hr:{port:55},cu:{port:56},cw:{port:57},cy:{port:58},cz:{port:59},dk:{port:60},dj:{port:61},dm:{port:62},do:{port:63},ec:{port:64},eg:{port:65},sv:{port:66},gq:{port:67},er:{port:68},ee:{port:69},et:{port:70},fk:{port:71},fo:{port:72},fj:{port:73},fi:{port:74},fr:{port:75},gf:{port:76},pf:{port:77},tf:{port:78},ga:{port:79},gm:{port:80},ge:{port:81},de:{port:82},gh:{port:83},gi:{port:84},gr:{port:85},gl:{port:86},gd:{port:87},gp:{port:88},gu:{port:89},gt:{port:90},gg:{port:91},gn:{port:92},gw:{port:93},gy:{port:94},ht:{port:95},hm:{port:96},va:{port:97},hn:{port:98},hk:{port:99},hu:{port:100},is:{port:101},in:{port:102},id:{port:103},ir:{port:104},iq:{port:105},ie:{port:106},im:{port:107},il:{port:108},it:{port:109},jm:{port:110},jp:{port:111},je:{port:112},jo:{port:113},kz:{port:114},ke:{port:115},ki:{port:116},kp:{port:117},kr:{port:118},kw:{port:119},kg:{port:120},la:{port:121},lv:{port:122},lb:{port:123},ls:{port:124},lr:{port:125},ly:{port:126},li:{port:127},lt:{port:128},lu:{port:129},mo:{port:130},mk:{port:131},mg:{port:132},mw:{port:133},my:{port:134},mv:{port:135},ml:{port:136},mt:{port:137},mh:{port:138},mq:{port:139},mr:{port:140},mu:{port:141},yt:{port:142},mx:{port:143},fm:{port:144},md:{port:145},mc:{port:146},mn:{port:147},me:{port:148},ms:{port:149},ma:{port:150},mz:{port:151},mm:{port:152},na:{port:153},nr:{port:154},np:{port:155},nl:{port:156},nc:{port:157},nz:{port:158},ni:{port:159},ne:{port:160},ng:{port:161},nu:{port:162},nf:{port:163},mp:{port:164},no:{port:165},om:{port:166},pk:{port:167},pw:{port:168},ps:{port:169},pa:{port:170},pg:{port:171},py:{port:172},pe:{port:173},ph:{port:174},pn:{port:175},pl:{port:176},pt:{port:177},pr:{port:178},qa:{port:179},re:{port:180},ro:{port:181},ru:{port:182},rw:{port:183},bl:{port:184},sh:{port:185},kn:{port:186},lc:{port:187},mf:{port:188},pm:{port:189},vc:{port:190},ws:{port:191},sm:{port:192},st:{port:193},sa:{port:194},sn:{port:195},rs:{port:196},sc:{port:197},sl:{port:198},sg:{port:199},sx:{port:200},sk:{port:201},si:{port:202},sb:{port:203},so:{port:204},za:{port:205},gs:{port:206},ss:{port:207},es:{port:208},lk:{port:209},sd:{port:210},sr:{port:211},sj:{port:212},sz:{port:213},se:{port:214},ch:{port:215},sy:{port:216},tw:{port:217},tj:{port:218},tz:{port:219},th:{port:220},tl:{port:221},tg:{port:222},tk:{port:223},to:{port:224},tt:{port:225},tn:{port:226},tr:{port:227},tm:{port:228},tc:{port:229},tv:{port:230},ug:{port:231},ua:{port:232},ae:{port:233},gb:{port:234},us:{port:235},um:{port:236},uy:{port:237},uz:{port:238},vu:{port:239},ve:{port:240},vn:{port:241},vg:{port:242},vi:{port:243},wf:{port:244},eh:{port:245},ye:{port:246},zm:{port:247},zw:{port:248}};E.init=function(){var pc=E.proxy_countries={bext:[]};for(var key in E.ports)pc.bext.push(key.toUpperCase());var no_flag=zutil.bool_lookup("AX BL BQ BV IO CX CC CW FK "+"GF TF HM YT NU NF MP PN SH MF PM "+"SX GS SS SJ TK UM WF ZW GP RE AQ");E.proxy_countries.bext=E.proxy_countries.bext.filter((function(c){return!no_flag[c]}))};E.init();return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},6467:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON
"use strict";(function(){let is_node=typeof module=="object"&&module.exports;if(!is_node);else;!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(932),__webpack_require__(2569),__webpack_require__(1291)],__WEBPACK_AMD_DEFINE_RESULT__=((date,zcountry,zutil)=>{const E={t:{}};const{ms}=date;E.desktop_gateways=["paypal","paymill","avangate","bluesnap","paypal2","coupon","stripe"];E.mobile_gateways=["android","apple"];E.gateways=E.desktop_gateways.concat(E.mobile_gateways);E.grace=1;E.periods=["1 D","1 W","1 M","3 M","6 M","1 Y","2 Y","3 Y"];E.period_unit_to_ms={D:ms.DAY,W:7*ms.DAY,M:ms.MONTH,Y:ms.YEAR};E.period_unit_names={D:"day",W:"week",M:"month",Y:"year"};E.type2name={plus:"premium",ultra:"ultra"};E.get_country_code=membership=>{if(!membership)return;const country_name=membership.geo_country||membership.country;return zcountry.mixed2code(country_name)||country_name};E.get_gateways=type=>{if(!type)return[];switch(type){case"desktop":return E.desktop_gateways;case"mobile":return E.mobile_gateways;case"paypal":return["paypal","paypal2"]}return E.gateways.includes(type)?[type]:[]};E.get_period_ms=period=>{const{count,unit}=E.parse_period(period)||{};return count*E.period_unit_to_ms[unit]};E.get_offsets=d=>{const offsets={};for(const p of E.periods)offsets[p]=E.offset_by_period(d,p,-1);return offsets};E.offset_by_period=(d,period,factor=1)=>{d=date(d,true);const{count,unit}=E.parse_period(period)||{};switch(unit){case"D":d.setUTCDate(d.getUTCDate()+count*factor);return d;case"W":d.setUTCDate(d.getUTCDate()+7*count*factor);return d;case"M":{const day=d.getUTCDate();d.setUTCMonth(d.getUTCMonth()+count*factor);if(d.getUTCDate()!=day)d.setUTCDate(0);return d}case"Y":d.setUTCFullYear(d.getUTCFullYear()+count*factor);return d}};const get_end_by_period=(m,opt)=>{opt=opt||{};const test_iap=m.test&&is_app_store_iap(m);let end=m.period&&!test_iap?E.offset_by_period(opt.start||m.start,m.period):m.end||m.trial_end||m.grace_end;if(!end){throw new Error("Unexpected period: "+m.period+" ("+JSON.stringify(m)+")")}end=date(end);if(!opt.disable_grace){if(test_iap)end.setUTCMinutes(end.getUTCMinutes()+E.grace);else end.setUTCDate(end.getUTCDate()+E.grace)}return end};E.get_length_by_period=period=>{const start=Date.now();return get_end_by_period({period},{start})-start};E.get_dur=m=>get_end_by_period(m,{disable_grace:true})-date(m.start);E.get_end_by_period=get_end_by_period;E.get_end_date=m=>{const ends=[];if(m&&m.trial_end)ends.push(date(m.trial_end));if(m&&m.grace_end)ends.push(date(m.grace_end));if(m&&m.end)ends.push(date(m.end));if(m&&m.start&&m.period&&(!m.cancelled||!m.end)&&!E.is_trial(m)){const _end=get_end_by_period(m);if(_end)ends.push(_end)}if(!ends.length)return null;const res=date(Math.max.apply(null,ends));return res};E.is_active=m=>{const now=Date.now();if(!m)return false;if(m.trial_end&&now<=date(m.trial_end))return true;if(m.grace_end&&now<=date(m.grace_end))return true;if(m.end&&now<=date(m.end))return true;if(m.start&&m.period&&now<=get_end_by_period(m)&&!E.is_trial(m))return!m.cancelled||!m.end;return false};E.is_ultra=m=>E.is_active(m)&&m&&m.type=="ultra";E.is_lifetime=m=>m&&m.period=="100 Y";E.is_in_trial=m=>E.is_trial(m)&&Date.now()<date(m.trial_end||m.end);E.is_trial=(m,type)=>!!(m&&(m.trial_end&&(!type||type==(m.type||"start"))||m.plan=="trial"&&m.end));E.is_in_grace=m=>E.is_grace(m)&&Date.now()<date(m.grace_end);E.is_grace=(m,type)=>!!m&&!!m.grace_end&&(!type||type==(m.type||"start"));E.is_manual=m=>!!m&&m.plan=="manual";E.had_premium=history=>!!history&&history.some((m=>!E.is_trial(m)));E.had_trial=(history,type)=>!!history&&history.some((h=>E.is_trial(h,type)));E.had_grace=(history,type)=>!!history&&history.some((h=>E.is_grace(h,type)));E.trial_forbidden=(m,history,type)=>{if(E.is_in_trial(m))return"trial exists";if(E.is_trial(m,type))return"trial expired";if(E.is_active(m))return"already premium";if(E.had_premium(history))return"had premium";if(E.had_trial(history,type))return"had trial";return false};E.grace_period_forbidden=(m,history,type)=>{if(E.is_in_grace(m))return"grace exists";if(E.is_grace(m,type))return"grace expired";if(E.is_active(m))return"already premium";if(E.had_grace(history,type))return"had grace";return false};E.is_paid=m=>!!m&&!!m.gateway;E.is_paid_amount=m=>E.is_paid(m)&&(m.amount||m.amount_usd);E.is_expired=m=>{const end_date=E.get_end_date(m);return!!end_date&&Date.now()>end_date};E.classify=m=>{if(E.is_active(m))return E.is_in_trial(m)?"trial":"premium";if(E.is_expired(m))return E.is_trial(m)?"trial_expired":"premium_expired";return"free"};E.gen_email_hash=(email,md5)=>md5("hola unsubscribe "+email).substr(0,8);E.fmt_date=(d,fmt)=>d?date.strftime(fmt||"%o %B %Y",date(d)):"-";E.is_ios=m=>m.gateway=="apple"||m.product=="ios";E.is_mobile=m=>E.is_ios(m)||!!m.gateway&&!E.desktop_gateways.includes(m.gateway);E.is_desktop=m=>E.desktop_gateways.includes(m.gateway);E.get_plan_short_name=period=>{const{count,unit}=E.parse_period(period)||{};const period_name=E.period_unit_names[unit];let short_name={"1 D":"Daily","1 W":"Weekly","1 M":"Monthly","1 Y":"Yearly"}[period];if(!short_name){short_name=count+" "+period_name[0].toUpperCase()+period_name.substr(1);if(count>1)short_name+="s"}return short_name};E.get_period_with_price=m=>{if(m.plan=="signup_bonus")return"Signup bonus";if(m.period=="100 Y")return"Lifetime";const{count,unit}=E.parse_period(m.period)||{};if(m.gateway=="coupon"&&count)return count+"-"+E.period_unit_names[unit];const end=E.get_end_date(m);if(m.cancelled)return"Till "+E.fmt_date(end);const show_price=name=>{if(!m.amount)return name;const price=m.amount;const currency=m.currency;const vat=m.vat;const p=+(price/count).toFixed(2);const price_string=zcountry.format_price(currency,p);return name+", "+price_string+"/"+E.period_unit_names[unit]+(vat&&vat.percent?" (includes VAT "+vat.percent+"% "+zcountry.format_price(currency,vat.amount)+")":"")};switch(unit){case"W":if(count==1)return show_price("Weekly");return show_price(count+"-week");case"M":if(count==1)return show_price("Monthly");if(count==6)return show_price("Half-yearly");return show_price(count+"-month");case"Y":if(count==1)return show_price("Yearly");return show_price(count+"-year");case"D":return show_price(count+"-day")}if(!m.end)return m.grace_end?"updating":"-";return(m.gateway?"Till ":"Manual till ")+E.fmt_date(end)};E.get_per=(period,full)=>{const{count,unit}=E.parse_period(period)||{};const name=E.period_unit_names[unit];return count==1?(full?count+" ":"")+name:count+" "+name+"s"};E.sum_period=(p1,p2)=>{const{count:c1,unit:u1}=E.parse_period(p1)||{};const{count:c2,unit:u2}=E.parse_period(p2)||{};if(u1==u2)return`${c1+c2} ${u1}`;let c_min,c_max,u_min,u_max;const ums=E.period_unit_to_ms;if(ums[u1]>ums[u2]){c_max=c1;u_max=u1;c_min=c2;u_min=u2}else{c_max=c2;u_max=u2;c_min=c1;u_min=u1}if(u_min=="D")return c_min+c_max*ums[u_max]/ums.D+" D";if(u_min=="W")return c_min*7+c_max*ums[u_max]/ums.D+" D";if(u_min=="M")return c_min+c_max*12+" M"};E.period_start_str=m=>E.fmt_date(m.start);E.period_end_str=(m,fmt)=>{if(E.is_in_trial(m))return"Trial valid until "+E.fmt_date(m.trial_end);if(m.next_renewal_date)return E.fmt_date(m.next_renewal_date);if(m.cancelled||!m.period)return m.grace_end?"updating":"-";return E.fmt_date(m.end||E.offset_by_period(m.start,m.period),fmt)};E.is_unassoc_trial=m=>E.is_trial(m)&&E.is_ios(m);E.is_bonus=m=>m&&m.plan=="signup_bonus";E.payment_label=m=>{if(E.is_unassoc_trial(m)||E.is_bonus(m))return"-";switch(m.gateway){case"paypal":case"paypal2":return"PayPal";case"coupon":return"Coupon";case"paymill":return"Credit card ************"+(((m.paymill|{}).payment||{}).last4||"****");case"avangate":case"stripe":case"bluesnap":return"Credit card";case"apple":return"App Store";case"android":return"Google Play";default:return m.grace_end?"updating":m.plan=="manual"?"Other":"Google Play"}};E.gateway_id_path=gateway=>{switch(gateway){case"paypal":case"paypal2":return"paypal.subscr_id";case"coupon":return"coupon.code";case"bluesnap":return"bluesnap.subscr_id";case"stripe":return"stripe.subscr_id";case"apple":return"apple_ios.original_transaction_id";case"android":return"google_apk.purchase_token";case"avangate":return"avangate.subscr_ref";case"paymill":return"paymill.subscription_id";case"adyen":return"adyen.reference"}};E.get_paypal_id=m=>zutil.get(m,"paypal.subscr_id")||zutil.get(m,"paypal2.subscr_id")||zutil.get(m,"paypal.txn_id");E.parse_id=(subscr_id,gateway)=>{if(gateway=="bluesnap"&&subscr_id)return+subscr_id;return subscr_id};E.get_id=(m,gateway)=>{if(!m)return;if(m&&m.plan=="manual")return+date(m.start);gateway=gateway||m.gateway;switch(gateway){case"paypal":case"paypal2":return E.get_paypal_id(m);case"bluesnap_gpay":case"bluesnap_apm":case"bluesnap_applepay":case"bluesnap":return m.bluesnap&&(m.bluesnap.subscr_id||m.bluesnap.ref);case"apple":return zutil.get(m,"apple_ios.original_transaction_id")||zutil.get(m,"apple_ios.transaction_id");case"coupon":case"android":case"avangate":case"stripe":case"paymill":case"adyen":return zutil.get(m,E.gateway_id_path(gateway))}};E.get_gateway_name=(m,gateway)=>{gateway=gateway||m&&m.gateway;switch(gateway){case"bluesnap":if(zutil.get(m,"bluesnap.gpay"))gateway="bluesnap_gpay";else if(zutil.get(m,"bluesnap.applepay"))gateway="bluesnap_applepay";else if(!zutil.get(m,"bluesnap.subscr_id")&&zutil.get(m,"bluesnap.ref")){gateway="bluesnap_apm"}break;case"paypal":case"paypal2":gateway="paypal";break;case"avangate":case"stripe":case"apple":case"android":case"coupon":case"paymill":case"bluesnap_gpay":case"bluesnap_apm":case"bluesnap_applepay":case"adyen":break;default:if(m&&m.plan=="trial")gateway="trial";else if(m&&m.plan=="grace")gateway="grace";else if(m&&m.plan=="manual")gateway="manual";else gateway="unknown"}return gateway};E.get_full_id=(m,gateway,id)=>{id=id||E.get_id(m);if(!id)return;return E.get_gateway_name(m,gateway)+"-"+id};E.is_cancellable_mobile=m=>E.is_mobile(m)&&!E.is_unassoc_trial(m)&&(m.cancelled||m.cancellation_reason);E.is_cancellable=m=>!m.cancelled&&!E.is_cancellable_mobile(m)&&!E.is_unassoc_trial(m)&&!m.grace_end&&!E.is_bonus(m);E.get_plan_currency=(plan,currency)=>{if(!currency||!plan)return"USD";currency=currency.toUpperCase();if(currency=="USD")return"USD";if(!plan.currency||!plan.currency[currency.toLowerCase()])return"USD";return currency};E.get_price_plan=(plan,currency)=>{currency=(""+currency).toLowerCase();return currency=="usd"||!plan.currency||!plan.currency[currency]?plan:plan.currency[currency]};E.is_better=(m1,m2)=>{if(!m1)return false;if(!m2)return true;if(m1.type=="ultra"&&m2.type!="ultra")return true;if(m2.type=="ultra"&&m1.type!="ultra")return false;if(!m1.period&&m1.plan!="manual"&&m2.period)return false;if(!m2.period&&m2.plan!="manual"&&m1.period)return true;const start=Date.now();const end1=get_end_by_period(m1,{start,disable_grace:true});const end2=get_end_by_period(m2,{start,disable_grace:true});return end1>end2};E.is_more_actual=(m1,m2)=>{if(!m1)return false;if(!m2)return true;if(!m1.period&&m1.plan!="manual")return false;if(!m2.period&&m2.plan!="manual")return true;const end1=E.get_end_date(m1);const end2=E.get_end_date(m2);return end1>end2};E.find_last=(m,history,subscr_id)=>{if(m&&E.get_id(m)==subscr_id)return{m};if(!Array.isArray(history))return{};for(let i=history.length-1;i>=0;i--){if(E.get_id(history[i])==subscr_id)return{m:history[i],index:i}}return{}};const is_app_store_iap=m=>(zutil.get(m,"apple_ios.bundle_id")||"").startsWith("org.hola.hola");E.t.get_exp_date_by_gateway=(m,gateway)=>{gateway=gateway||m.gateway;switch(gateway){case"bluesnap":return zutil.get(m,"bluesnap.exp_date");case"stripe":return zutil.get(m,"stripe.exp_date");case"android":return zutil.get(m,"google_apk.expiry")}if(E.is_ios(m))return is_app_store_iap(m)&&m.test?m.end:undefined};const get_seq_id_by_exp=(exp,m)=>{const period=m.period.split(" ");if(is_app_store_iap(m)&&m.test)return+date.align(exp,"MIN");const align={D:"DAY",W:"WEEK",M:"MONTH",Y:"YEAR"}[period[1]];return+date.align(exp,align)};const get_seq_data=m=>{if(!m||!m.period)return;const exp_date=E.t.get_exp_date_by_gateway(m);let exp=date(exp_date||E.offset_by_period(m.start,m.period));if(m.end&&date(m.end)>exp)exp=date(m.end);return{seq_id:get_seq_id_by_exp(exp,m),exp,persistent:m.persistent||!!exp_date}};E.get_seq_id=m=>{const res=get_seq_data(m);return res&&res.seq_id};E.make_seqs=memberships=>{const ids=new Set;for(const m of memberships){const id=E.get_id(m);if(id)ids.add(id)}const res={};for(const id of ids)res[id]=E.make_seq(memberships,id);return res};E.make_seq=(memberships,subscr_id)=>{const list=[];for(const m of memberships){if(!E.is_paid_amount(m)||{trial:1,grace:1}[m.plan])continue;if(subscr_id&&E.get_id(m)!=subscr_id)continue;list.push(m)}list.sort(((m1,m2)=>{if(date(m1.start)<date(m2.start))return-1;if(date(m1.start)>date(m2.start))return 1;return 0}));let seq=[];for(let i=0;i<list.length;i++){const m=list[i];const start=date(m.start);let{seq_id,exp,persistent}=get_seq_data(m)||{};const last=seq[seq.length-1];if(last&&!(start-date(last.m.start))){if(persistent&&!last.persistent)seq[seq.length-1]={m,seq_id,exp,persistent};seq[seq.length-1].duplicate=true;continue}const end=m.end&&date(m.end);if(last&&end&&start<end&&end<last.exp){last.duplicate=true;continue}const next_seq_id=last&&+E.offset_by_period(last.seq_id,m.period);if(next_seq_id&&seq_id>next_seq_id&&seq_id<=+E.offset_by_period(next_seq_id,m.period)){exp=E.offset_by_period(last.exp,m.period);seq_id=next_seq_id}if(last&&last.seq_id>=seq_id){if(last.seq_id==seq_id&&(!persistent||persistent&&last.persistent)){last.duplicate=true;continue}const new_seq=[{m,seq_id,exp,persistent}];for(let j=seq.length-1;j>=0;j--){const item=seq[j];if(!item.persistent){item.exp=E.offset_by_period(new_seq[0].exp,m.period,-1);item.seq_id=get_seq_id_by_exp(item.exp,m)}if(item.seq_id>=new_seq[0].seq_id||item.exp<date(item.m.start)){if(item.persistent)new_seq[0]=item;new_seq[0].duplicate=true;continue}new_seq.unshift(item)}seq=new_seq;continue}seq.push({m,seq_id,exp,persistent})}return seq};const omit_meta=o=>!o?null:zutil.omit(o,["actual_from","actual_to","update_res","reported","amount_usd","payment_intent_id","is_new","pending_emails"]);E.parse_period=period=>{const m=(""+period).match(/^(\d+)\s?([dwmy])$/i);if(!m)return;return{count:+m[1],unit:m[2].toUpperCase()}};E.is_duplicate=(m1,m2)=>{let omitted_m1=omit_meta(m1);let omitted_m2=omit_meta(m2);if(m1&&m2&&Math.abs(m2.start-m1.start<date.ms.DAY)){omitted_m1=zutil.omit(omitted_m1,["start"]);omitted_m2=zutil.omit(omitted_m2,["start"])}if(m1&&m2&&Math.abs(m2.end-m1.end)<date.ms.DAY){omitted_m1=zutil.omit(omitted_m1,["end"]);omitted_m2=zutil.omit(omitted_m2,["end"])}return zutil.equal_deep(omitted_m1,omitted_m2)};return E}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},843:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON
"use strict";(function(){const is_node=typeof module=="object"&&module.exports&&module.children;if(!is_node);else;!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(4996),__webpack_require__(1291),__webpack_require__(5305),__webpack_require__(6262)],__WEBPACK_AMD_DEFINE_RESULT__=function(sprintf,zutil,zurl,version_util){const E={};const assign=Object.assign;E.get_root_domain=zurl.get_root_domain;E.get_root_url=url=>{if(url=="chrome://newtab/")return"newtab";const n=(url||"").match(/^https?:\/\/([^\/]+)(\/.*)?$/);if(!n||!n[1])return null;return E.get_root_domain(n[1])};E.find_rule=(rules,opt)=>{if(!rules)return;for(let i in rules){const r=rules[i];if(opt.name==r.name&&(opt.type===undefined||opt.type==r.type)&&(opt.md5===undefined||opt.md5==r.md5)&&(opt.country===undefined||opt.country.toLowerCase()==r.country.toLowerCase())){return r}}return null};E.gen_route_str=(route_opt,opt)=>{opt=opt||{};if(route_opt.direct)return"direct";let s=route_opt.country.toLowerCase(),r=[];if(route_opt.peer)r.push("peer");if(route_opt.pool){r.push("pool"+(typeof route_opt.pool=="string"?"_"+route_opt.pool:""))}if(!opt.no_algo&&route_opt.algo)r.push(route_opt.algo);if(r.length)s+="."+r.join(",");return s};function ip_list_to_agents(ip_list){return fix_zagent(Object.keys(ip_list).join(","))}function fix_zagent(s){return s.replace(/.hola.org/g,"").replace(/zagent/g,"za")}function pad(num,size){return("000"+num).slice(-size)}function time_str(d){d=new Date(d);if(isNaN(d))return"00:00:00.000";return pad(d.getUTCHours(),2)+":"+pad(d.getUTCMinutes(),2)+":"+pad(d.getUTCSeconds(),2)+"."+pad(d.getUTCMilliseconds(),3)}E.events_enabled=false;E.events=[];E.events_n={};E.reset_events=()=>{E.events=[];E.events_n={}};E.push_event=(name,opt)=>{try{if(!E.events_enabled)return;if(E.events.length>512)E.events.splice(0,E.events.length/2);E.events.push({name,ts:Date.now(),opt});E.events_n[name]=(E.events_n[name]||0)+1}catch(err){console.error("push_event error %s",err&&err.stack)}};E.enable_events_logging=enabled=>{E.events_enabled=!!enabled;if(!enabled)E.reset_events()};E.get_event_n=e=>E.events_n[e];E.events_to_str=()=>{let s="",a=[];E.events.forEach((e=>{let s=time_str(e.ts)+" "+e.name,o=e.opt;switch(e.name){case">zgettunnels":s+=sprintf(" %s%s",o.country,(o.exclude||[]).length?" exclude "+o.exclude.map((e=>fix_zagent(e))).join(","):"");break;case"<zgettunnels":s+=sprintf(" %s%s",o.country," agents "+ip_list_to_agents(o.ip_list));break;case"set_rule":s+=sprintf(" %s%s%s%s%s",o.name,o.enabled?" "+o.country:" off",o.del?" del":"",o.src?" src "+o.src:"",!o.full_vpn?" !full_vpn":"",o.mode=="unblock"?"":" mode "+o.mode);break;case"<verify_err":s+=sprintf(" %s %s",o.host?fix_zagent(o.host):o.ip," "+o.err);break;case"<verify":s+=sprintf(" %s %s",o.host?fix_zagent(o.host):o.ip,o.rtt?o.rtt+"ms":"!rtt");break;case">verify":s+=sprintf(" %s",o.host?fix_zagent(o.host):o.ip);break;case">stuck":case">stuck_long":break;case"<stuck_end":s+=sprintf(" %sms",o.duration);break;case"pac_miss":s+=sprintf(" %s!=%s %s",o.req_ip,o.agent_ip,o.url);break;case"pac_reload":s+=sprintf(" after %ssec",(o.new_ts-o.init_ts)/1e3);break;case"navgiate":s+=sprintf(" tab %s %s",o.tab_id,o.url);break;case"popup_render":case"tpopup_render":break;case"pac_slow":s+=sprintf(" %dms %s",o.dur,(o.url||"").substr(0,50));break;default:s+=JSON.stringify(o)||"";break}a.push(s)}));a=a.reverse();return a.join("\n")};class Domain_tree{constructor(){this.clear()}*[Symbol.iterator](){let parts=[];for(let item of Domain_tree.iterate_subtree(parts,this.tree))yield item}clear(){this.tree={}}get_value(domain){if(!domain)return;let parts=domain.split(".");let leaf=this.tree,value=leaf[Domain_tree.VALUE];for(let i=parts.length-1;leaf&&i>=0;i--){leaf=leaf[parts[i]];value=leaf&&Domain_tree.VALUE in leaf?leaf[Domain_tree.VALUE]:value}return value}set_value(domain,value){if(!domain)return void(this.tree[Domain_tree.VALUE]=value);let parts=domain.split(".");let leaf=this.tree;for(let i=parts.length-1;i>=0;i--)leaf=leaf[parts[i]]=leaf[parts[i]]||{};leaf[Domain_tree.VALUE]=value}}Domain_tree.VALUE=Symbol.for("value");Domain_tree.iterate_subtree=function*(parts,leaf){if(Domain_tree.VALUE in leaf)yield[parts.slice().reverse().join("."),leaf[Domain_tree.VALUE]];for(let key in leaf){parts.push(key);for(let item of Domain_tree.iterate_subtree(parts,leaf[key]))yield item;parts.pop()}};E.Domain_tree=Domain_tree;E.get_site_key=(conf,ext_opt,root_url)=>{let{ext_ver}=ext_opt;let sites=conf&&conf.sites||{};return Object.keys(sites).find((k=>{let v=sites[k];let urls=Array.isArray(v.root_url)?v.root_url:[v.root_url];return urls.includes(root_url)&&E.check_min_ver(ext_ver,v.min_ver)}))};const get_match_fn=operator=>{if(operator=="gt")return(a,b)=>a>b;if(operator=="gte")return(a,b)=>a>=b;if(operator=="lt")return(a,b)=>a<b;if(operator=="lte")return(a,b)=>a<=b;if(operator=="re")return(a,b)=>new RegExp(b).test(a);if(operator=="in"||operator=="nin"){return(a,b)=>{let found;if(!Array.isArray(b))return false;if(!Array.isArray(a))found=b.includes(a);else found=b.some((i=>a.includes(i)));return operator=="in"?found:!found}}if(operator=="eq"||operator=="neq"){return(a,b)=>{let equal;if(!Array.isArray(a))equal=a==b;else if(!Array.isArray(b))equal=a.includes(b);else equal=b.every((i=>a.includes(i)));return operator=="eq"?equal:!equal}}return(a,b)=>false};E.match_filter=(query,filter)=>{if(!filter)return true;if(!query)return false;query=assign({},query);for(let key in query){if(key.endsWith("_ts")&&query.now)query["since_"+key]=query.now-query[key]}for(let f_key in filter){if(!f_key)continue;let m=f_key.match(/^(.*)_(gt|gte|lt|lte|in|nin|re|eq|neq)$/);let q_key=m?m[1]:f_key;let operator=m?m[2]:"eq";if(operator=="in"&&!Array.isArray(filter[f_key])||operator=="nin"&&!Array.isArray(filter[f_key])){q_key=f_key;operator="eq"}let op1,op2;if(q_key.endsWith("_ver")&&/(gt|gte|lt|lte|eq|neq)/.test(operator)){op1=version_util.cmp(query[q_key],filter[f_key]);op2=0}else{op1=query[q_key];op2=filter[f_key]}if(!get_match_fn(operator)(op1,op2))return false}return true};const apply_conf_override=(site_conf,ext_opt)=>{let{ext_ver,install_ver,install_ts}=ext_opt;let{override}=site_conf;site_conf=zutil.omit(site_conf,["override"]);if(!override)return site_conf;let versions=Object.keys(override).sort(((a,b)=>-version_util.cmp(a,b)));let ver=versions.find((v=>E.check_min_ver(ext_ver,v)&&E.check_min_install_ver(install_ver,override[v].install_min_ver)&&E.check_min_install_ts(install_ts,override[v].install_min_ts)));if(ver){site_conf=zutil.extend_deep(zutil.clone_deep(site_conf),zutil.omit(override[ver],["install_min_ver","install_min_ts"]))}return site_conf};const apply_trial_conf_override=(tconf,ext_opt)=>{let{override}=tconf;tconf=zutil.omit(tconf,["override"]);if(!override||!ext_opt)return tconf;let{ext_ver,trial_state,now}=ext_opt;let first_start_ts=trial_state&&trial_state.first_start_ts;if(!first_start_ts||!now||version_util.cmp(ext_ver,"1.174.712")<0)return tconf;let match_opt=assign({first_start_ts},ext_opt);delete match_opt.trial_state;match_opt.first_start=now-first_start_ts;let ov=override.slice().reverse().find((o=>E.match_filter(match_opt,o.filter)));if(ov)tconf=zutil.extend_deep(zutil.clone_deep(tconf),ov.conf);return tconf};E.get_all_sites_conf=(conf,ext_opt)=>{let{ext_ver,install_ver,install_ts}=ext_opt;let c=conf&&conf.sites_default||{};if(!E.check_min_ver(ext_ver,c.min_ver)||!E.check_min_install_ver(install_ver,c.install_min_ver)||!E.check_min_install_ts(install_ts,c.install_min_ts)){return}return apply_conf_override(c,ext_opt)};E.get_specific_site_conf=(conf,ext_opt,root_url)=>{let site_conf=zutil.get(conf&&conf.sites,E.get_site_key(conf,ext_opt,root_url));if(site_conf)site_conf=apply_conf_override(site_conf,ext_opt);return site_conf};E.get_site_conf=(conf,ext_opt,root_url,path,def)=>{let site_conf=root_url&&E.get_specific_site_conf(conf,ext_opt,root_url)||E.get_all_sites_conf(conf,ext_opt);return path?zutil.get(site_conf,path,def):site_conf};E.get_trial_conf=(conf,ext_opt,root_url,path,def)=>{let{ext_ver}=ext_opt;let tconf=E.get_site_conf(conf,ext_opt,root_url,"trial");if(!tconf)return;let def_trial=zutil.get(E.get_all_sites_conf(conf,ext_opt),"trial");if(tconf.all_sites_timer&&!def_trial)tconf=zutil.omit(tconf,["all_sites_timer"]);if(tconf.all_sites_timer&&def_trial)tconf=assign({},tconf,zutil.omit(def_trial,["skip_signin"]));tconf=apply_trial_conf_override(tconf,ext_opt);let{time_ended_bonus}=tconf;if(time_ended_bonus&&!E.check_min_ver(ext_ver,time_ended_bonus.min_ver)){tconf=zutil.omit(tconf,["time_ended_bonus"])}return path?zutil.get(tconf,path,def):tconf};E.check_min_ver=(ext_ver,min_ver)=>version_util.valid(min_ver)&&version_util.cmp(ext_ver,min_ver)>=0;E.check_min_install_ver=(install_ver,min_ver)=>!min_ver||version_util.valid(min_ver)&&version_util.cmp(install_ver,min_ver)>=0;E.check_min_install_ts=(install_ts,ts)=>!ts||+install_ts>=+ts;return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},6545:(module,exports)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON ISC
"use strict";(function(){var is_node=typeof module=="object"&&module.exports&&module.children;if(!is_node);else;!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){var E={};var proto_slice=Array.prototype.slice;E.copy=function(a){switch(a.length){case 0:return[];case 1:return[a[0]];case 2:return[a[0],a[1]];case 3:return[a[0],a[1],a[2]];case 4:return[a[0],a[1],a[2],a[3]];case 5:return[a[0],a[1],a[2],a[3],a[4]];default:return proto_slice.call(a)}};E.push=function(a){for(var i=1;i<arguments.length;i++){var arg=arguments[i];if(Array.isArray(arg))a.push.apply(a,arg);else a.push(arg)}return a.length};E.unshift=function(a){for(var i=arguments.length-1;i>0;i--){var arg=arguments[i];if(Array.isArray(arg))a.unshift.apply(a,arg);else a.unshift(arg)}return a.length};E.slice=function(args,from,to){return Array.prototype.slice.call(args,from,to)};E.compact=function(a){return E.compact_self(a.slice())};E.compact_self=function(a){var i,j,n=a.length;for(i=0;i<n&&a[i];i++);if(i==n)return a;for(j=i;i<n;i++){if(!a[i])continue;a[j++]=a[i]}a.length=j;return a};E.flatten_shallow=function(a){return Array.prototype.concat.apply([],a)};E.flatten=function(a){var _a=[],i;for(i=0;i<a.length;i++){if(Array.isArray(a[i]))Array.prototype.push.apply(_a,E.flatten(a[i]));else _a.push(a[i])}return _a};E.unique=function(a){var _a=[];for(var i=0;i<a.length;i++){if(!_a.includes(a[i]))_a.push(a[i])}return _a};E.to_nl=function(a,sep){if(!a||!a.length)return"";if(sep===undefined)sep="\n";return a.join(sep)+sep};E.sed=function(a,regex,replace){var _a=new Array(a.length),i;for(i=0;i<a.length;i++)_a[i]=a[i].replace(regex,replace);return _a};E.grep=function(a,regex,replace){var _a=[],i;for(i=0;i<a.length;i++){if(a[i].search(regex)<0)continue;if(replace!==undefined)_a.push(a[i].replace(regex,replace));else _a.push(a[i])}return _a};E.rm_elm=function(a,elm){var i=a.indexOf(elm);if(i<0)return;a.splice(i,1);return elm};E.rm_elm_tail=function(a,elm){var i=a.length-1;if(elm===a[i]){a.pop();return elm}if((i=a.lastIndexOf(elm,i-1))<0)return;a.splice(i,1);return elm};E.add_elm=function(a,elm){if(a.includes(elm))return;a.push(elm);return elm};E.split_every=function(a,n){var ret=[];for(var i=0;i<a.length;i+=n)ret.push(a.slice(i,i+n));return ret};E.split_at=function(a,delim){var ret=[];delim=delim||"";for(var i=0;i<a.length;i++){var chunk=[];for(;i<a.length&&a[i]!=delim;i++)chunk.push(a[i]);if(chunk.length)ret.push(chunk)}return ret};E.rotate=function(a,n){if(a&&a.length>1&&(n=n%a.length))E.unshift(a,a.splice(n));return a};E.move=function(a,from,to,n){return Array.prototype.splice.apply(a,[to,n].concat(a.slice(from,from+n)))};E.binary_search=function(a,cmp){var low=0,high=a.length-1,mid;while(low<=high){mid=low+high>>1;var cmp_res=cmp(a[mid],mid,low,high);if(cmp_res==0)return mid;if(cmp_res<0)low=mid+1;else high=mid-1}return mid};E.to_array=function(v){return Array.isArray(v)?v:v==null?[]:[v]};var proto={};proto.sed=function(regex,replace){return E.sed(this,regex,replace)};proto.grep=function(regex,replace){return E.grep(this,regex,replace)};proto.to_nl=function(sep){return E.to_nl(this,sep)};proto.push_a=function(){return E.push.apply(null,[this].concat(Array.from(arguments)))};proto.unshift_a=function(){return E.unshift.apply(null,[this].concat(Array.from(arguments)))};var installed;E.prototype_install=function(){if(installed)return;installed=true;for(var i in proto){Object.defineProperty(Array.prototype,i,{value:proto[i],configurable:true,enumerable:false,writable:true})}};E.prototype_uninstall=function(){if(!installed)return;installed=false;for(var i in proto)delete Array.prototype[i]};return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},3787:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON ISC
"use strict";(function(){var hash,assert,zerr,vm;var is_node=typeof module=="object"&&module.exports&&module.children;if(!is_node){assert=function(){};if(self.hola&&self.hola.zerr)zerr=self.hola.zerr;else{zerr=function(){console.log.apply(console,arguments)};zerr.perr=zerr}}else{require("./config.js");zerr=require("./zerr.js");hash=require("crypto");assert=require("assert");vm=require("vm")}!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(1291)],__WEBPACK_AMD_DEFINE_RESULT__=function(zutil){var E={};var has_map=typeof Map=="function"&&Map.prototype.get&&Map.prototype.set;has_map=0;E.cache_str_map_fn=function(fn){var cache=new Map;return function(s){s=""+s;var v=cache.get(s);if(v!==undefined||cache.has(s))return v;cache.set(s,v=fn(s));return v}};E.cache_str_obj_fn=function(fn){var cache={};return function(s){if(s in cache)return cache[s];return cache[s]=fn(s)}};E.cache_str_fn=has_map?E.cache_str_map_fn:E.cache_str_obj_fn;E.cache_str_fn2=function(fn){var cache={};return function(s1,s2){var cache2=cache[s1]=cache[s1]||{};if(s2 in cache2)return cache2[s2];return cache2[s2]=fn(s1,s2)}};E.o=function(oct_str){return parseInt(oct_str,8)};E.md5=function(buf,hash_len,encoding){return hash.createHash("md5").update(buf,encoding||"utf8").digest("hex").slice(0,hash_len)};E.md5_zero=function(key,hash_len){assert(hash_len<=32,"invalid hash len"+hash_len);if(!key||!key.length)return"0".repeat(hash_len);return E.md5(key,hash_len)};E.md5_etag=function(buf){return E.md5(buf,8)};E.inet_ntoa_t=function(ip){return((ip&4278190080)>>>24)+"."+((ip&16711680)>>>16)+"."+((ip&65280)>>>8)+"."+(ip&255)};E.inet_addr=function(ip){var code,res=0,shift=24,num=undefined;ip=""+ip;for(var i=0,l=ip.length;i<l;++i){code=ip.charCodeAt(i);if(code>47&&code<58){num=(num||0)*10+code-48;continue}if(code==46){if(num==undefined||num>255)return null;res+=num<<shift;num=undefined;shift-=8;continue}return null}return shift==0&&num!=undefined&&num<256?res+(num|0)>>>0:null};function flags_to_str_once(flags,conv){var f='var s = "";\n';f+='if (!flags) return "";\n';for(var i in conv){if(!conv.hasOwnProperty(i))continue;f+="if (flags & "+conv[i]+") "+"{ s += "+JSON.stringify(i.toLowerCase())+'+" ";'+" flags &= ~"+conv[i]+"; }\n"}f+="if (flags && conv.__conv_to_str.err) "+"conv.__conv_to_str.err(flags, conv);\n";f+="return s.slice(0, -1);\n";var func=new Function(["flags","conv"],f);Object.defineProperty(conv,"__conv_to_str",{enumerable:false,writable:true});conv.__conv_to_str=func;func.err=function(_flags,_conv){zerr.perr("flags_str_invalid","flags "+_flags+" "+JSON.stringify(_conv).slice(0,30))};return conv.__conv_to_str(flags,conv)}E.flags_to_str=function(flags,conv){if(conv.__conv_to_str)return conv.__conv_to_str(flags,conv);return flags_to_str_once(flags,conv)};function flags_from_str_once(s,conv){var f="var flags = 0, a, i;\n";f+="if (!s) return 0;\n";f+="s = s.toUpperCase();\n";f+='a = s.split(",");\n';f+="for (i=0; i<a.length; i++)\n";f+="{\n";f+="    if (!conv[a[i]])\n";f+="    {\n";f+="        if (flags && conv.__conv_from_str.err) "+"conv.__conv_from_str.err(flags, conv);\n";f+="        return -1;\n";f+="    }\n";f+="    flags |= conv[a[i]];\n";f+="}\n";f+="return flags;\n";var func=new Function(["s","conv"],f);Object.defineProperty(conv,"__conv_from_str",{enumerable:false,writable:true});conv.__conv_from_str=func;func.err=function(_s,_conv){zerr.perr("flags_str_invalid","flags "+_s+" "+JSON.stringify(_conv).slice(0,30))};return conv.__conv_from_str(s,conv)}E.flags_from_str=function(s,conv){if(conv.__conv_from_str)return conv.__conv_from_str(s,conv);return flags_from_str_once(s,conv)};E.scale_vals={1e3:[{s:"",n:1},{s:"K",n:1e3},{s:"M",n:1e6},{s:"G",n:1e9},{s:"T",n:1e12},{s:"P",n:1e15}],1024:[{s:"",n:1},{s:"K",n:1024},{s:"M",n:Math.pow(1024,2)},{s:"G",n:Math.pow(1024,3)},{s:"T",n:Math.pow(1024,4)},{s:"P",n:Math.pow(1024,5)}]};function apply_scale(num,opt){opt=opt||{};var per=opt.per,scale=opt.scale;var base=opt.base==1024?1024:1e3,ratio=opt.ratio||1;var scale_vals=E.scale_vals[base],i=0;if(num<0)num=-num;if(scale==null)for(;i<scale_vals.length-1&&num>=scale_vals[i+1].n*ratio;i++);else i=scale_vals.findIndex((function(_scale){return _scale.s==scale}));if(per=="ms"&&i){per="s";i--;num=num/1e3}return{num,per,base,scale:scale_vals[i]}}E.get_unscaled=function(str,opt){opt=opt||{};var match=/(\d+)(\S)?/.exec(str);if(!match)return;var num=+match[1],scale=(match[2]||"").toUpperCase();if(!scale)return num;var base=opt.base==1024?1024:1e3;var scale_vals=E.scale_vals[base],i=0;for(;i<scale_vals.length;i++){if(scale_vals[i].s==scale)return num*scale_vals[i].n}};E.get_unit=function(num,opt){var res=apply_scale(num,opt);return res.scale.s+(res.per?E.fmt_per(res.per):"")};E.scaled_number=function(num,opt){opt=opt||{};var sign="";var unit=opt.unit===undefined||opt.unit;if(num<0){sign="-";num=-num}if(num===undefined)return"";if(isNaN(num))return opt.nan||"x";if(num==Infinity)return sign+"∞";var res=apply_scale(num,opt);var _per=unit&&res.per?E.fmt_per(res.per):"";num=res.num;if(opt.is_scale)return res.scale.n;num/=res.scale.n;if(num<.001)return"0"+_per;if(num>=res.base-1)num=Math.trunc(num);var str=num.toFixed(num<1?3:num<10?2:num<100?1:0);return sign+str.replace(/((\.\d*[1-9])|\.)0*$/,"$2")+(unit?(opt.space?" ":"")+res.scale.s:"")+_per};E.scaled_bytes=function(num,opt){return E.scaled_number(num,Object.assign({base:1e3},opt))};E.fmt_currency=function(amount,digits,currency_sign){if(amount===undefined)return;if(digits===undefined)digits=2;if(currency_sign===undefined)currency_sign="$";var sign=amount<0?"-":"";amount=Math.abs(amount);amount=(+amount).toLocaleString("en-GB",{useGrouping:true,maximumFractionDigits:digits})||amount;return sign+currency_sign+amount};E.fmt_per=function(per){if(!per)return"";switch(per){case"s":case"ms":return per;case"%":case"%%":return"%";default:return"/"+per[0]}};E.parse_function=function(f){var m=/^function\s*([\w$]+)?\s*\(\n?([\s\w$,]*?)(\s*\/\*`*\*\/)?\)\s*\{\n?([\s\S]*?)\n?\}$/.exec(f);return{name:m[1]||null,args:m[2]?m[2].split(/\s*,\s*/):[],body:m[4]}};function date_stringify(d){return{__ISODate__:d.toISOString()}}var pos_inf={__Infinity__:1};var neg_inf={__Infinity__:-1};function replace_inf(k,v){switch(v){case Infinity:return pos_inf;case-Infinity:return neg_inf;default:return v}}E.JSON_stringify=function(obj,opt){var s,prev_date,_date,prev_func,prev_re;var date_class,func_class,re_class;opt=opt||{};if(opt.date)_date=typeof opt.date=="function"?opt.date:date_stringify;if(opt.mongo)_date=date_stringify;if(_date){date_class=opt.vm_context?vm.runInContext("Date",opt.vm_context):Date;prev_date=date_class.prototype.toJSON;date_class.prototype.toJSON=function(){return _date(this)}}if(opt.func){func_class=opt.vm_context?vm.runInContext("Function",opt.vm_context):Function;prev_func=func_class.prototype.toJSON;func_class.prototype.toJSON=function(){return{__Function__:this.toString()}}}if(opt.re){re_class=opt.vm_context?vm.runInContext("RegExp",opt.vm_context):RegExp;prev_re=re_class.prototype.toJSON;Object.defineProperty(re_class.prototype,"toJSON",{value:function(){return{__RegExp__:this.toString()}},writable:true})}var opt_replacer=opt.replacer;var replacer=opt_replacer;if(opt.inf){if(opt_replacer&&typeof opt_replacer=="function"){replacer=function(k,v){if(this==pos_inf||this==neg_inf)return v;return opt_replacer.call(this,k,replace_inf.call(this,k,v))}}else if(opt_replacer&&Array.isArray(opt_replacer)){replacer=function(k,v){if(v==obj||this==pos_inf||this==neg_inf)return v;if(opt_replacer.includes(k))return replace_inf.call(this,k,v)}}else replacer=replace_inf}try{s=JSON.stringify(obj,replacer,opt.spaces)}finally{if(_date)date_class.prototype.toJSON=prev_date;if(opt.func)func_class.prototype.toJSON=prev_func;if(opt.re)re_class.prototype.toJSON=prev_re}if(opt.mongo)s=s.replace(/\{"__ISODate__":("[0-9TZ:.-]+")\}/g,"ISODate($1)");return s};function parse_leaf(v,opt){if(!v||typeof v!="object"||Object.keys(v).length!=1)return v;if(v.__ISODate__&&opt.date)return new Date(v.__ISODate__);if(v.__Function__&&opt.func){if(vm)return vm.runInThisContext('"use strict";('+v.__Function__+")");return new Function("",'"use strict";return ('+v.__Function__+");")()}if(v.__RegExp__&&opt.re){var parsed=/^\/(.*)\/(\w*)$/.exec(v.__RegExp__);if(!parsed)throw new Error("failed parsing regexp");return new RegExp(parsed[1],parsed[2])}if(v.__Infinity__&&opt.inf)return v.__Infinity__<0?-Infinity:Infinity;if(v.__ObjectId__&&typeof opt.object_id=="function")return opt.object_id(v.__ObjectId__);return v}function parse_obj(v,opt){if(!v||typeof v!="object")return v;if(Array.isArray(v)){for(var i=0;i<v.length;i++)v[i]=parse_obj(v[i],opt);return v}var v2=parse_leaf(v,opt);if(v2!==v)return v2;for(var key in v)v[key]=parse_obj(v[key],opt);return v}E.JSON_parse=function(s,opt){opt=Object.assign({date:true,re:true,inf:true},opt,{func:false});return JSON.parse(s,(function(k,v){return parse_leaf(v,opt)}))};E.JSON_parse_obj=function(v,opt){opt=Object.assign({date:true,re:true,inf:true},opt,{func:false});return parse_obj(v,opt)};E.JSON_parse_unsafe=function(s,opt){opt=Object.assign({date:true,re:true,func:true,inf:true},opt);return JSON.parse(s,(function(k,v){return parse_leaf(v,opt)}))};E.JSON_parse_obj_unsafe=function(v,opt){opt=Object.assign({date:true,re:true,func:true,inf:true},opt);return parse_obj(v,opt)};E.hex2bin=function(hex,opt){var byte_array=opt&&opt.byte_array;var bin=byte_array?new Uint8Array:[];var re=/('.)|([0-9a-f][0-9a-f]?)|\s+|[.-]|(.)/gi;var m,v;for(re.lastIndex=0;m=re.exec(hex);){if(m[1])v=m[1].charCodeAt(1);else if(m[2])v=parseInt(m[2],16);else if(m[3])return null;else continue;bin.push(v)}return bin};E.bin2hex=function(arr){var s="",v,i;for(i=0;i<arr.length;i++){v=(arr[i]&255).toString(16).toUpperCase();s+=(v.length<2?"0":"")+v+" "}return s.trim()};E.str2bin=function(s,offset){var len;if(!s||!(len=s.length))return;offset=offset||0;var arr=new Uint8Array(len-offset);for(var i=offset,j=0;i<len;i++,j++)arr[j]=s.charCodeAt(i);return arr};E.tab2sp=function(line){var added=0;return line.replace(/\t/g,(function(m,offset,str){var insert=8-(added+offset)%8;added+=insert-1;return" ".repeat(insert)}))};E.str2utf8bin=function(s){if(!s||!s.length)return;var arr=new Uint8Array(s.length*3);var len=s.length,i=0,j=0,c,extra;while(i<len){c=s.charCodeAt(i++);if(c>=55296&&c<=56319&&i<len){extra=s.charCodeAt(i++);if((extra&64512)==56320)c=((c&1023)<<10)+(extra&1023)+65536;else i--}if((c&4294967168)==0)arr[j++]=c;else{if((c&4294965248)==0)arr[j++]=c>>6&31|192;else if((c&4294901760)==0){arr[j++]=c>>12&15|224;arr[j++]=c>>6&63|128}else if((c&4292870144)==0){arr[j++]=c>>18&7|240;arr[j++]=c>>12&63|128;arr[j++]=c>>6&63|128}arr[j++]=c&63|128}}return arr.slice(0,j)};E.utf8bin2str=function(arr,offset,len){if(arr.byteLength&&!arr.length)arr=new Uint8Array(arr);var out="",i=offset||0,cp;var c,char2,char3,char4;len=len?i+len:arr.length;while(i<len){c=arr[i++];switch(c>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:out+=String.fromCharCode(c);break;case 12:case 13:char2=arr[i++];out+=String.fromCharCode((c&31)<<6|char2&63);break;case 14:char2=arr[i++];char3=arr[i++];out+=String.fromCharCode((c&15)<<12|(char2&63)<<6|(char3&63)<<0);break;case 15:char2=arr[i++];char3=arr[i++];char4=arr[i++];cp=(c&3)<<18|(char2&63)<<12|(char3&63)<<6|char4&63;cp-=65536;out+=String.fromCharCode(55296|cp>>10);out+=String.fromCharCode(56320|cp&1023);break}}return out};return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},2569:(module,exports)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON ISC
"use strict";(function(){var is_node=typeof module=="object"&&module.exports&&module.children;if(!is_node);else;!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){var E={};E.list={AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AX:"Aland Islands",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",JE:"Bailiwick of Jersey",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BQ:"Bonaire (Caribbean Netherlands)",BA:"Bosnia And Herzegovina",BW:"Botswana",BR:"Brazil",BN:"Brunei",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire (Ivory Coast)",HR:"Croatia (Hrvatska)",CU:"Cuba",CW:"Curacao",CY:"Cyprus",CZ:"Czech Republic",CD:"Democratic Republic Of Congo (Zaire)",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EU:"European Union",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GB:"Great Britain",GR:"Greece",GL:"Greenland",GD:"Grenada",GU:"Guam",GP:"Guadeloupe",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",XK:"Kosovo",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Laos",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macau",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar (Burma)",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",KP:"North Korea",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Réunion",RO:"Romania",RU:"Russia",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",VC:"Saint Vincent And The Grenadines",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten (Dutch part)",SK:"Slovak Republic",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And South Sandwich Islands",KR:"South Korea",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syria",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",UK:"United Kingdom",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VA:"Vatican City (Holy See)",VE:"Venezuela",VN:"Vietnam",VG:"Virgin Islands (British)",VI:"Virgin Islands (US)",WF:"Wallis And Futuna Islands",EH:"Western Sahara",WS:"Western Samoa",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};E.iso_list={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:["Bosnia And Herzegovina","Bosnia and Herzegovina"],BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:["Cape Verde","Cabo Verde"],CW:"Curacao",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:["Cote D'Ivoire","Côte d'Ivoire"],HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:["Iran, Islamic Republic Of","Iran, Islamic Republic of"],IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:["Korea","Korea, Republic of","Republic of Korea"],KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova, Republic of",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:["Palestinian Territory, Occupied","Palestine"],PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:["United Kingdom","Great Britain"],US:"United States",UM:["United States Outlying Islands","United States Minor Outlying Islands"],UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:["Viet Nam","Vietnam"],VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};E.adj_list={AF:{name:"Afghanistan",adj:"Afghan"},AX:{name:"Åland Islands",adj:"Åland Island"},AL:{name:"Albania",adj:"Albanian"},DZ:{name:"Algeria",adj:"Algerian"},AS:{name:"American Samoa",adj:"American Samoan"},AD:{name:"Andorra",adj:"Andorran"},AO:{name:"Angola",adj:"Angolan"},AI:{name:"Anguilla",adj:"Anguillan"},AG:{name:"Antigua and Barbuda",adj:"Antiguan"},AR:{name:"Argentina",adj:"Argentinian"},AM:{name:"Armenia",adj:"Armenian"},AW:{name:"Aruba",adj:"Aruban"},AU:{name:"Australia",adj:"Australian"},AT:{name:"Austria",adj:"Austrian"},AZ:{name:"Azerbaijan",adj:"Azerbaijani"},BS:{name:"Bahamas",adj:"Bahamian"},BH:{name:"Bahrain",adj:"Bahraini"},BD:{name:"Bangladesh",adj:"Bengali"},BB:{name:"Barbados",adj:"Barbadian"},BY:{name:"Belarus",adj:"Belarusian"},BE:{name:"Belgium",adj:"Belgian"},BZ:{name:"Belize",adj:"Belizean"},BJ:{name:"Benin",adj:"Beninese"},BM:{name:"Bermuda",adj:"Bermudan"},BT:{name:"Bhutan",adj:"Bhutanese"},BO:{name:"Bolivia",adj:"Bolivian"},BA:{name:"Bosnia and Herzegovina",adj:"Bosnian"},BW:{name:"Botswana",adj:"Botswanan"},BR:{name:"Brazil",adj:"Brazilian"},BN:{name:"Brunei",adj:"Bruneian"},BG:{name:"Bulgaria",adj:"Bulgarian"},BF:{name:"Burkina Faso",adj:"Burkinabé"},BI:{name:"Burundi",adj:"Burundian"},CV:{name:"Cabo Verde",adj:"Cabo Verdean"},KH:{name:"Cambodia",adj:"Cambodian"},CM:{name:"Cameroon",adj:"Cameroonian"},CA:{name:"Canada",adj:"Canadian"},KY:{name:"Cayman Islands",adj:"Caymanian"},TD:{name:"Chad",adj:"Chadian"},CL:{name:"Chile",adj:"Chilean"},CN:{name:"China",adj:"Chinese"},CX:{name:"Christmas Island",adj:"Christmas Island"},CO:{name:"Colombia",adj:"Colombian"},KM:{name:"Comoros",adj:"Comoran"},CG:{name:"Congo",adj:"Congolese"},CK:{name:"Cook Islands",adj:"Cook Island"},CR:{name:"Costa Rica",adj:"Costa Rican"},CI:{name:"Côte d'Ivoire",adj:"Ivorian"},HR:{name:"Croatia",adj:"Croatian"},CU:{name:"Cuba",adj:"Cuban"},CW:{name:"Curaçao",adj:"Curaçaoan"},CY:{name:"Cyprus",adj:"Cypriot"},CZ:{name:"Czech Republic",adj:"Czech"},DK:{name:"Denmark",adj:"Danish"},DJ:{name:"Djibouti",adj:"Djiboutian"},DM:{name:"Dominica",adj:"Dominican"},DO:{name:"Dominican Republic",adj:"Dominican"},EC:{name:"Ecuador",adj:"Ecuadorian"},EG:{name:"Egypt",adj:"Egyptian"},SV:{name:"El Salvador",adj:"Salvadoran"},GQ:{name:"Equatorial Guinea",adj:"Equatorial Guinean"},EE:{name:"Estonia",adj:"Estonian"},ET:{name:"Ethiopia",adj:"Ethiopian"},FO:{name:"Faroe Islands",adj:"Faroese"},FJ:{name:"Fiji",adj:"Fijian"},FI:{name:"Finland",adj:"Finnish"},FR:{name:"France",adj:"French"},PF:{name:"French Polynesia",adj:"French Polynesian"},GA:{name:"Gabon",adj:"Gabonese"},GM:{name:"Gambia",adj:"Gambian"},GE:{name:"Georgia",adj:"Georgian"},DE:{name:"Germany",adj:"German"},GH:{name:"Ghana",adj:"Ghanaian"},GI:{name:"Gibraltar",adj:"Gibraltar"},GR:{name:"Greece",adj:"Greek"},GL:{name:"Greenland",adj:"Greenlandic"},GD:{name:"Grenada",adj:"Grenadian"},GU:{name:"Guam",adj:"Guamanian"},GT:{name:"Guatemala",adj:"Guatemalan"},GG:{name:"Guernsey",adj:"Channel Island"},GN:{name:"Guinea",adj:"Guinean"},GW:{name:"Guinea-Bissau",adj:"Bissau-Guinean"},GY:{name:"Guyana",adj:"Guyanese"},HT:{name:"Haiti",adj:"Haitian"},HN:{name:"Honduras",adj:"Honduran"},HK:{name:"Hong Kong",adj:"Hong Kong"},HU:{name:"Hungary",adj:"Hungarian"},IS:{name:"Iceland",adj:"Icelandic"},IN:{name:"India",adj:"Indian"},ID:{name:"Indonesia",adj:"Indonesian"},IR:{name:"Iran",adj:"Iranian"},IQ:{name:"Iraq",adj:"Iraqi"},IE:{name:"Ireland",adj:"Irish"},IM:{name:"Isle of Man",adj:"Manx"},IL:{name:"Israel",adj:"Israeli"},IT:{name:"Italy",adj:"Italian"},JM:{name:"Jamaica",adj:"Jamaican"},JP:{name:"Japan",adj:"Japanese"},JE:{name:"Jersey",adj:"Channel Island"},JO:{name:"Jordan",adj:"Jordanian"},KZ:{name:"Kazakhstan",adj:"Kazakhstani"},KE:{name:"Kenya",adj:"Kenyan"},KI:{name:"Kiribati",adj:"I-Kiribati"},KW:{name:"Kuwait",adj:"Kuwaiti"},KG:{name:"Kyrgyzstan",adj:"Kyrgyzstani"},LA:{name:"Laos",adj:"Lao, Laotian"},LV:{name:"Latvia",adj:"Latvian"},LB:{name:"Lebanon",adj:"Lebanese"},LS:{name:"Lesotho",adj:"Basotho"},LR:{name:"Liberia",adj:"Liberian"},LY:{name:"Libya",adj:"Libyan"},LI:{name:"Liechtenstein",adj:"Liechtensteiner"},LT:{name:"Lithuania",adj:"Lithuanian"},LU:{name:"Luxembourg",adj:"Luxembourgish"},MO:{name:"Macau",adj:"Macanese"},MK:{name:"Macedonia",adj:"Macedonian"},MG:{name:"Madagascar",adj:"Malagasy"},MW:{name:"Malawi",adj:"Malawian"},MY:{name:"Malaysia",adj:"Malaysian"},MV:{name:"Maldives",adj:"Maldivian"},ML:{name:"Mali",adj:"Malian"},MT:{name:"Malta",adj:"Maltese"},MH:{name:"Marshall Islands",adj:"Marshallese"},MQ:{name:"Martinique",adj:"Martinican"},MR:{name:"Mauritania",adj:"Mauritanian"},MU:{name:"Mauritius",adj:"Mauritian"},YT:{name:"Mayotte",adj:"Mahoran"},MX:{name:"Mexico",adj:"Mexican"},FM:{name:"Micronesia",adj:"Micronesian"},MD:{name:"Moldova",adj:"Moldovan"},MC:{name:"Monaco",adj:"Monacan"},MN:{name:"Mongolia",adj:"Mongolian"},ME:{name:"Montenegro",adj:"Montenegrin"},MA:{name:"Morocco",adj:"Moroccan"},MZ:{name:"Mozambique",adj:"Mozambican"},MM:{name:"Myanmar",adj:"Burmese"},NA:{name:"Namibia",adj:"Namibian"},NR:{name:"Nauru",adj:"Nauruan"},NP:{name:"Nepal",adj:"Nepali"},NL:{name:"Netherlands",adj:"Dutch"},NC:{name:"New Caledonia",adj:"New Caledonian"},NZ:{name:"New Zealand",adj:"Zelanian"},NI:{name:"Nicaragua",adj:"Nicaraguan"},NE:{name:"Niger",adj:"Nigerien"},NG:{name:"Nigeria",adj:"Nigerian"},MP:{name:"Northern Mariana Islands",adj:"Niuean"},NO:{name:"Norway",adj:"Norwegian"},OM:{name:"Oman",adj:"Omani"},PK:{name:"Pakistan",adj:"Pakistani"},PW:{name:"Palau",adj:"Palauan"},PS:{name:"Palestine",adj:"Palestinian"},PA:{name:"Panama",adj:"Panamanian"},PG:{name:"Papua New Guinea",adj:"Papuan"},PY:{name:"Paraguay",adj:"Paraguayan"},PE:{name:"Peru",adj:"Peruvian"},PH:{name:"Philippines",adj:"Filipino"},PL:{name:"Poland",adj:"Polish"},PT:{name:"Portugal",adj:"Portuguese"},PR:{name:"Puerto Rico",adj:"Puerto Rican"},QA:{name:"Qatar",adj:"Qatari"},RO:{name:"Romania",adj:"Romanian"},RU:{name:"Russia",adj:"Russian"},RW:{name:"Rwanda",adj:"Rwandan"},BL:{name:"Saint Barthélemy",adj:"Barthélemois"},KN:{name:"Saint Kitts and Nevis",adj:"Kittitian"},LC:{name:"Saint Lucia",adj:"Saint Lucian"},MF:{name:"Saint Martin",adj:"Saint-Martinoise"},VC:{name:"Saint Vincent and the Grenadines",adj:"Saint Vincentian"},SM:{name:"San Marino",adj:"Sammarinese"},SA:{name:"Saudi Arabia",adj:"Saudi"},SN:{name:"Senegal",adj:"Senegalese"},RS:{name:"Serbia",adj:"Serbian"},SC:{name:"Seychelles",adj:"Seychellois"},SL:{name:"Sierra Leone",adj:"Sierra Leonean"},SG:{name:"Singapore",adj:"Singaporean"},SK:{name:"Slovakia",adj:"Slovak"},SI:{name:"Slovenia",adj:"Slovenian"},SB:{name:"Solomon Islands",adj:"Solomon Island"},SO:{name:"Somalia",adj:"Somali"},ZA:{name:"South Africa",adj:"South African"},KR:{name:"South Korea",adj:"South Korean"},SS:{name:"South Sudan",adj:"South Sudanese"},ES:{name:"Spain",adj:"Spanish"},LK:{name:"Sri Lanka",adj:"Sri Lankan"},SD:{name:"Sudan",adj:"Sudanese"},SR:{name:"Surinam",adj:"Surinamese"},SZ:{name:"Swaziland",adj:"Swazi"},SE:{name:"Sweden",adj:"Swedish"},CH:{name:"Switzerland",adj:"Swiss"},SY:{name:"Syria",adj:"Syrian"},TW:{name:"Taiwan",adj:"Taiwanese"},TJ:{name:"Tajikistan",adj:"Tajikistani"},TZ:{name:"Tanzania",adj:"Tanzanian"},TH:{name:"Thailand",adj:"Thai"},TL:{name:"Timor-Leste",adj:"Timorese"},TG:{name:"Togo",adj:"Togolese"},TT:{name:"Trinidad and Tobago",adj:"Trinidadian"},TN:{name:"Tunisia",adj:"Tunisian"},TR:{name:"Turkey",adj:"Turkish"},TC:{name:"Turks and Caicos Islands",adj:"Turks and Caicos Island"},UG:{name:"Uganda",adj:"Ugandan"},UA:{name:"Ukraine",adj:"Ukrainian"},AE:{name:"United Arab Emirates",adj:"Emirati"},GB:{name:"United Kingdom",adj:"British"},US:{name:"United States",adj:"American"},UY:{name:"Uruguay",adj:"Uruguayan"},UZ:{name:"Uzbekistan",adj:"Uzbekistani"},VU:{name:"Vanuatu",adj:"Vanuatuan"},VE:{name:"Venezuela",adj:"Venezuelan"},VN:{name:"Vietnam",adj:"Vietnamese"},VG:{name:"Virgin Islands, British",adj:"British Virgin Island"},VI:{name:"Virgin Islands, United States",adj:"U.S. Virgin Island"},YE:{name:"Yemen",adj:"Yemeni"},ZM:{name:"Zambia",adj:"Zambian"},ZW:{name:"Zimbabwe",adj:"Zimbabwean"}};E.timezone={CI:"Africa/Abidjan",GH:"Africa/Accra",ET:"Africa/Addis_Ababa",DZ:"Africa/Algiers",ER:"Africa/Asmara",ML:"Africa/Bamako",CF:"Africa/Bangui",GM:"Africa/Banjul",GW:"Africa/Bissau",MW:"Africa/Blantyre",CG:"Africa/Brazzaville",BI:"Africa/Bujumbura",EG:"Africa/Cairo",MA:"Africa/Casablanca",GN:"Africa/Conakry",SN:"Africa/Dakar",TZ:"Africa/Dar_es_Salaam",DJ:"Africa/Djibouti",CM:"Africa/Douala",EH:"Africa/El_Aaiun",SL:"Africa/Freetown",BW:"Africa/Gaborone",ZW:"Africa/Harare",ZA:"Africa/Johannesburg",SS:"Africa/Juba",UG:"Africa/Kampala",SD:"Africa/Khartoum",RW:"Africa/Kigali",CD:"Africa/Kinshasa",NG:"Africa/Lagos",GA:"Africa/Libreville",TG:"Africa/Lome",AO:"Africa/Luanda",ZM:"Africa/Lusaka",GQ:"Africa/Malabo",MZ:"Africa/Maputo",LS:"Africa/Maseru",SZ:"Africa/Mbabane",SO:"Africa/Mogadishu",LR:"Africa/Monrovia",KE:"Africa/Nairobi",TD:"Africa/Ndjamena",NE:"Africa/Niamey",MR:"Africa/Nouakchott",BF:"Africa/Ouagadougou",BJ:"Africa/Porto-Novo",ST:"Africa/Sao_Tome",LY:"Africa/Tripoli",TN:"Africa/Tunis",NA:"Africa/Windhoek",AI:"America/Anguilla",AG:"America/Antigua",AR:"America/Argentina/Buenos_Aires",AW:"America/Aruba",PY:"America/Asuncion",BB:"America/Barbados",BZ:"America/Belize",CO:"America/Bogota",VE:"America/Caracas",KY:"America/Cayman",CR:"America/Costa_Rica",CW:"America/Curacao",DM:"America/Dominica",SV:"America/El_Salvador",GL:"America/Godthab",TC:"America/Grand_Turk",GD:"America/Grenada",GT:"America/Guatemala",EC:"America/Guayaquil",GY:"America/Guyana",CU:"America/Havana",JM:"America/Jamaica",BO:"America/La_Paz",PE:"America/Lima",NI:"America/Managua",MF:"America/Marigot",MQ:"America/Martinique",MX:"America/Mexico_City",UY:"America/Montevideo",MS:"America/Montserrat",BS:"America/Nassau",BR:"America/Sao_Paulo",PA:"America/Panama",SR:"America/Paramaribo",HT:"America/Port-au-Prince",TT:"America/Port_of_Spain",PR:"America/Puerto_Rico",CL:"America/Santiago",DO:"America/Santo_Domingo",BL:"America/St_Barthelemy",KN:"America/St_Kitts",LC:"America/St_Lucia",VI:"America/St_Thomas",VC:"America/St_Vincent",HN:"America/Tegucigalpa",VG:"America/Tortola",AQ:"Pacific/Auckland",YE:"Asia/Aden",KZ:"Asia/Almaty",JO:"Asia/Amman",TM:"Asia/Ashgabat",IQ:"Asia/Baghdad",BH:"Asia/Bahrain",AZ:"Asia/Baku",TH:"Asia/Bangkok",LB:"Asia/Beirut",KG:"Asia/Bishkek",BN:"Asia/Brunei",IN:"Asia/Colombo",LK:"Asia/Colombo",SY:"Asia/Damascus",BD:"Asia/Dhaka",TL:"Asia/Dili",AE:"Asia/Dubai",TJ:"Asia/Dushanbe",PS:"Asia/Gaza",VN:"Asia/Ho_Chi_Minh",HK:"Asia/Hong_Kong",ID:"Asia/Jakarta",AF:"Asia/Kabul",PK:"Asia/Karachi",NP:"Asia/Kathmandu",MY:"Asia/Kuala_Lumpur",KW:"Asia/Kuwait",MO:"Asia/Macau",PH:"Asia/Manila",OM:"Asia/Muscat",CY:"Asia/Nicosia",KH:"Asia/Phnom_Penh",KP:"Asia/Pyongyang",QA:"Asia/Qatar",MM:"Asia/Rangoon",SA:"Asia/Riyadh",KR:"Asia/Seoul",CN:"Asia/Shanghai",SG:"Asia/Singapore",TW:"Asia/Taipei",UZ:"Asia/Tashkent",GE:"Asia/Tbilisi",IR:"Asia/Tehran",BT:"Asia/Thimphu",JP:"Asia/Tokyo",MN:"Asia/Ulaanbaatar",LA:"Asia/Vientiane",AM:"Asia/Yerevan",BM:"Atlantic/Bermuda",CV:"Atlantic/Cape_Verde",FO:"Atlantic/Faroe",IS:"Atlantic/Reykjavik",GS:"Atlantic/South_Georgia",SH:"Atlantic/St_Helena",FK:"Atlantic/Stanley",AU:"Australia/Sydney",CA:"America/Toronto",NL:"Europe/Amsterdam",AD:"Europe/Andorra",GR:"Europe/Athens",RS:"Europe/Belgrade",DE:"Europe/Berlin",SK:"Europe/Bratislava",BE:"Europe/Brussels",RO:"Europe/Bucharest",HU:"Europe/Budapest",DK:"Europe/Copenhagen",IE:"Europe/Dublin",GI:"Europe/Gibraltar",GG:"Europe/Guernsey",FI:"Europe/Helsinki",IM:"Europe/Isle_of_Man",MD:"Europe/Istanbul",TR:"Europe/Istanbul",JE:"Europe/Jersey",UA:"Europe/Kiev",PT:"Europe/Lisbon",SI:"Europe/Ljubljana",GB:"Europe/London",UK:"Europe/London",LU:"Europe/Luxembourg",ES:"Europe/Madrid",MT:"Europe/Malta",AX:"Europe/Mariehamn",BY:"Europe/Minsk",MC:"Europe/Monaco",RU:"Europe/Moscow",NO:"Europe/Oslo",FR:"Europe/Paris",ME:"Europe/Podgorica",CZ:"Europe/Prague",LV:"Europe/Riga",IT:"Europe/Rome",SM:"Europe/San_Marino",BA:"Europe/Sarajevo",MK:"Europe/Skopje",BG:"Europe/Sofia",SE:"Europe/Stockholm",EE:"Europe/Tallinn",AL:"Europe/Tirane",LI:"Europe/Vaduz",VA:"Europe/Vatican",AT:"Europe/Vienna",LT:"Europe/Vilnius",HR:"Europe/Zagreb",CH:"Europe/Zurich",MG:"Indian/Antananarivo",CX:"Indian/Christmas",CC:"Indian/Cocos",KM:"Indian/Comoro",TF:"Indian/Kerguelen",SC:"Indian/Mahe",MV:"Indian/Maldives",MU:"Indian/Mauritius",YT:"Indian/Mayotte",IL:"Israel",WS:"Pacific/Apia",NZ:"Pacific/Auckland",FM:"Pacific/Chuuk",VU:"Pacific/Efate",TK:"Pacific/Fakaofo",FJ:"Pacific/Fiji",TV:"Pacific/Funafuti",SB:"Pacific/Guadalcanal",GU:"Pacific/Guam",MH:"Pacific/Majuro",NR:"Pacific/Nauru",NU:"Pacific/Niue",NF:"Pacific/Norfolk",NC:"Pacific/Noumea",AS:"Pacific/Pago_Pago",PW:"Pacific/Palau",PN:"Pacific/Pitcairn",PG:"Pacific/Port_Moresby",CK:"Pacific/Rarotonga",MP:"Pacific/Saipan",PF:"Pacific/Tahiti",KI:"Pacific/Tarawa",TO:"Pacific/Tongatapu",WF:"Pacific/Wallis",PL:"Europe/Warsaw",US:"America/New_York"};E.regions={AD:["Southern Europe","EMEA"],AE:["Western Asia","EMEA"],AF:["Southern Asia","EMEA"],AG:["Caribbean","AMER"],AI:["Caribbean","AMER"],AL:["South-Eastern Europe","EMEA"],AM:["Western Asia","EMEA"],AN:["Caribbean"],AO:["Middle Africa","EMEA"],AQ:["Antarctica","APAC"],AR:["South America","AMER"],AS:["Polynesia","South America","AMER"],AT:["Western Europe","EMEA"],AU:["Australia and New Zealand","APAC"],AW:["Caribbean","AMER"],AX:["Scandinavia","EMEA","Northern Europe"],AZ:["Western Asia","EMEA"],BA:["South-Eastern Europe","EMEA"],BB:["Caribbean","AMER"],BD:["Southern Asia","APAC"],BE:["Western Europe","EMEA"],GF:["South America","AMER"],BF:["Western Africa","EMEA"],BG:["Eastern Europe","EMEA"],BH:["Western Asia","EMEA"],BI:["Eastern Africa","EMEA"],BJ:["Western Africa","EMEA"],BL:["Caribbean","AMER"],BM:["Northern America","AMER"],BN:["South-Eastern Asia","EMEA"],BO:["South America","AMER"],BQ:["Caribbean","AMER"],BR:["South America","AMER"],BS:["Caribbean","AMER"],BT:["Southern Asia","APAC"],BW:["Southern Africa","EMEA"],BY:["Eastern Europe","EMEA"],BZ:["South America","AMER"],CA:["Northern America","AMER"],CC:["Australia and New Zealand","APAC"],CD:["Middle Africa","EMEA"],CF:["Middle Africa","EMEA"],CG:["Middle Africa","EMEA"],CH:["Western Europe","EMEA"],CI:["Western Africa","EMEA"],CK:["Polynesia","APAC"],CL:["South America","AMER"],CM:["Middle Africa","EMEA"],CN:["Asia","China"],CO:["South America","AMER"],CR:["South America","AMER"],CU:["Caribbean","AMER"],CV:["Western Africa","EMEA"],CW:["Caribbean",""],CX:["Australia and New Zealand","APAC"],CY:["South-Eastern Europe","EMEA"],CZ:["Eastern Europe","EMEA"],DE:["Western Europe","EMEA"],DJ:["Eastern Africa","EMEA"],DK:["Scandinavia","EMEA","Northern Europe"],DM:["Caribbean","AMER"],DO:["Caribbean","AMER"],DZ:["Northern Africa","EMEA"],EC:["South America","AMER"],EE:["Eastern Europe","EMEA"],EG:["Northern Africa","EMEA"],EH:["Northern Africa","EMEA"],ER:["Eastern Africa","EMEA"],ES:["Southern Europe","EMEA"],ET:["Eastern Africa","EMEA"],EU:["Western Europe"],FI:["Scandinavia","EMEA","Northern Europe"],FJ:["Melanesia","APAC"],FK:["South America","AMER"],FM:["Micronesia","APAC"],FO:["Scandinavia","EMEA","Northern Europe"],FR:["Western Europe","EMEA"],GA:["Middle Africa","EMEA"],GB:["Northern Europe","EMEA"],GD:["Caribbean","AMER"],GE:["Western Asia","EMEA"],GG:["Northern Europe","EMEA"],GH:["Western Africa","EMEA"],GI:["Southern Europe","EMEA"],GL:["Scandinavia","EMEA","Northern Europe"],GM:["Western Africa","EMEA"],GN:["Western Africa","EMEA"],GP:["Caribbean","AMER"],GQ:["Middle Africa","EMEA"],GR:["South-Eastern Europe","EMEA"],GS:["Antarctica","South America","AMER"],GT:["South America","AMER"],GU:["Micronesia","APAC"],GW:["Western Africa","EMEA"],GY:["South America","EMEA"],HK:["Eastern Asia","China"],HN:["South America","AMER"],HR:["South-Eastern Europe","EMEA"],HT:["Caribbean","AMER"],HU:["Eastern Europe","EMEA"],ID:["South-Eastern Asia","APAC"],IE:["Northern Europe","EMEA"],IL:["Western Asia","EMEA"],IM:["Northern Europe","EMEA"],IN:["Southern Asia","APAC"],IQ:["Western Asia","EMEA"],IR:["Southern Asia","EMEA"],IS:["Scandinavia","EMEA","Northern Europe"],IT:["Southern Europe","EMEA"],JE:["Northern Europe","EMEA"],JM:["Caribbean","AMER"],JO:["Western Asia","EMEA"],JP:["Eastern Asia","APAC"],KE:["Eastern Africa","EMEA"],KG:["Central Asia","EMEA"],KH:["South-Eastern Asia","APAC"],KI:["Micronesia","EMEA"],KM:["Eastern Africa","EMEA"],KN:["Caribbean","AMER"],KP:["Eastern Asia","APAC"],KR:["Eastern Asia","APAC"],KW:["Western Asia","EMEA"],KY:["Caribbean","AMER"],KZ:["Central Asia","EMEA"],LA:["South-Eastern Asia","APAC"],LB:["Western Asia","EMEA"],LC:["Caribbean","AMER"],LI:["Western Europe","EMEA"],LK:["Southern Asia","APAC"],LR:["Western Africa","EMEA"],LS:["Southern Africa","EMEA"],LT:["Eastern Europe","EMEA"],LU:["Western Europe","EMEA"],LV:["Eastern Europe","EMEA"],LY:["Northern Africa","EMEA"],MA:["Northern Africa","EMEA"],MC:["Western Europe","EMEA"],MD:["Eastern Europe","EMEA"],ME:["South-Eastern Europe","EMEA"],MF:["Caribbean","AMER"],MG:["Eastern Africa","EMEA"],MH:["Micronesia","AMER"],MK:["South-Eastern Europe","EMEA"],ML:["Western Africa","EMEA"],MM:["South-Eastern Asia","APAC"],MN:["Eastern Asia","APAC"],MO:["Eastern Asia","APAC"],MP:["Micronesia","AMER"],MQ:["Caribbean","EMEA"],MR:["Western Africa","EMEA"],MS:["Caribbean","AMER"],MT:["Southern Europe","EMEA"],MU:["Eastern Africa","EMEA"],MV:["Southern Asia","APAC"],MW:["Eastern Africa","EMEA"],MX:["South America","AMER"],MY:["South-Eastern Asia","APAC"],MZ:["Eastern Africa","EMEA"],NA:["Southern Africa","EMEA"],NC:["Melanesia","APAC"],NE:["Western Africa","EMEA"],NF:["Australia and New Zealand","AMER"],NG:["Western Africa","EMEA"],NI:["South America","AMER"],NL:["Western Europe","EMEA"],NO:["Scandinavia","EMEA","Northern Europe"],NP:["Southern Asia","APAC"],NR:["Micronesia","AMER"],NU:["Polynesia","AMER"],NZ:["Australia and New Zealand","APAC"],OM:["Western Asia","EMEA"],PA:["South America","AMER"],PE:["South America","AMER"],PF:["Polynesia","EMEA"],PG:["Melanesia","APAC"],PH:["South-Eastern Asia","APAC"],PK:["Southern Asia","EMEA"],PL:["Eastern Europe","EMEA"],PN:["Polynesia","AMER"],PR:["Caribbean","AMER"],PS:["Western Asia","EMEA"],PT:["Southern Europe","EMEA"],PW:["Micronesia","APAC"],PY:["South America","AMER"],QA:["Western Asia","EMEA"],RE:["Eastern Africa","EMEA"],RO:["Eastern Europe","EMEA"],RS:["South-Eastern Europe","EMEA"],RU:["Eastern Europe","EMEA"],RW:["Eastern Africa","EMEA"],SA:["Western Asia","EMEA"],SB:["Melanesia","APAC"],SC:["Eastern Africa","APAC"],SD:["Northern Africa","EMEA"],SE:["Scandinavia","EMEA","Northern Europe"],SG:["South-Eastern Asia","APAC"],SX:["Caribbean","AMER"],SH:["Western Africa","EMEA"],SI:["South-Eastern Europe","EMEA"],SK:["Eastern Europe","EMEA"],SL:["Western Africa","EMEA"],SM:["Southern Europe","EMEA"],SN:["Western Africa","EMEA"],SO:["Eastern Africa","EMEA"],SR:["South America","AMER"],SS:["Eastern Africa","EMEA"],ST:["Middle Africa","EMEA"],SV:["South America","AMER"],SY:["Western Asia","EMEA"],SZ:["Southern Africa","EMEA"],TC:["Caribbean","AMER"],TD:["Middle Africa","EMEA"],TF:["Antarctica","EMEA"],TG:["Western Africa","EMEA"],TH:["South-Eastern Asia","APAC"],TJ:["Central Asia","EMEA"],TK:["Polynesia","EMEA"],TL:["South-Eastern Asia","APAC"],TM:["Central Asia","EMEA"],TN:["Northern Africa","EMEA"],TO:["Polynesia","APAC"],TR:["South-Eastern Europe","EMEA"],TT:["Caribbean","AMER"],TV:["Polynesia","AMER"],TW:["Eastern Asia","China"],TZ:["Eastern Africa","EMEA"],UA:["Eastern Europe","EMEA"],UG:["Eastern Africa","EMEA"],UK:["Northern Europe","EMEA"],US:["Northern America","AMER"],UY:["South America","AMER"],UZ:["Central Asia","EMEA"],VA:["Southern Europe","EMEA"],VC:["Caribbean","AMER"],VE:["South America","AMER"],VG:["Caribbean","AMER"],VI:["Caribbean","AMER"],VN:["South-Eastern Asia","APAC"],VU:["Melanesia","APAC"],WF:["Polynesia","AMER"],WS:["Polynesia","APAC"],XK:["South-Eastern Europe","EMEA"],YE:["Western Asia","EMEA"],YT:["Eastern Africa","EMEA"],ZA:["Southern Africa","EMEA"],ZM:["Eastern Africa","EMEA"],ZW:["Eastern Africa","EMEA"]};var supraregions={"Northern America":["America"],"South America":["LATAM"],"Central America":["LATAM"],Caribbean:["LATAM","South America"],LATAM:["America"],"Eastern Europe":["Eastern Europe (W/E)"],"South-Eastern Europe":["Eastern Europe (W/E)"],"Western Europe":["Western Europe (W/E)"],"Southern Europe":["Western Europe (W/E)"],"Northern Europe":["Western Europe (W/E)"],"Western Europe (W/E)":["Europe"],"Eastern Europe (W/E)":["Europe"],Polynesia:["Oceania"],Melanesia:["Oceania"],Micronesia:["Oceania"],"Australia and New Zealand":["Oceania"],Oceania:["APAC"],"South-Eastern Asia":["APAC","Asia"],"Southern Asia":["APAC","Asia"],"Eastern Asia":["APAC","Asia"],"Central Asia":["Asia"],"Western Asia":["Asia"],"Eastern Africa":["Africa"],"Western Africa":["Africa"],"Southern Africa":["Africa"],"Northern Africa":["Africa"],"Middle Africa":["Africa"]};var extend_regions=function(regions){for(var i=0;i<regions.length;i++){(supraregions[regions[i]]||[]).filter((function(extra){return!regions.includes(extra)})).forEach((function(extra){regions.push(extra)}))}regions.push("All")};(function(){for(var country in E.regions)extend_regions(E.regions[country])})();E.unallowed_list={SY:1,LB:1,IR:1,IQ:1,DO:1};E.is_allowed=function(code){return E.list[code]&&!E.unallowed_list[code]};E.gdpr_countries=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GB","GF","GP","GR","HR","HU","IC","IE","IS","IT","JE","LI","LT","LU","LV","MF","MQ","MT","NL","NO","PL","PT","RE","RO","SI","SK","SW","YT","UK"];E.dialing_code_list={AF:"93",AL:"355",DZ:"213",AX:"358",AS:"1684",AD:"376",AO:"244",AI:"1264",AQ:"672",AG:"1268",AR:"54",AM:"374",AW:"297",AU:"61",AT:"43",AZ:"994",BS:"1242",BH:"973",JE:"44",BD:"880",BB:"1246",BY:"375",BE:"32",BZ:"501",BJ:"229",BM:"1441",BT:"975",BO:"591",BA:"387",BW:"267",BR:"55",BN:"673",BG:"359",BF:"226",BI:"257",KH:"855",CM:"237",CV:"238",KY:"1345",CF:"236",TD:"235",CL:"56",CN:"86",CX:"61",CC:"61",CO:"57",KM:"269",CG:"242",CK:"682",CR:"506",CI:"225",HR:"385",CU:"53",CW:"599",CY:"357",CZ:"420",CD:"243",DK:"45",DJ:"253",DM:"1767",EC:"593",EG:"20",SV:"503",GQ:"240",ER:"291",EE:"372",ET:"251",FK:"500",FO:"298",FJ:"679",FI:"358",FR:"33",PF:"689",TF:"262",GA:"241",GM:"220",GE:"995",DE:"49",GH:"233",GI:"350",GB:"44",GR:"30",GL:"299",GD:"1473",GU:"1671",GT:"502",GG:"44",GN:"224",GW:"245",GY:"592",HT:"509",HN:"504",HK:"852",HU:"36",IS:"354",IN:"91",ID:"62",IR:"98",IQ:"964",IE:"353",IM:"44",IL:"972",IT:"39",JM:"1876",JP:"81",JO:"962",KE:"254",KI:"686",KW:"965",KG:"996",LA:"856",LV:"371",LB:"961",LS:"266",LR:"231",LY:"218",LI:"423",LT:"370",LU:"352",MO:"853",MK:"389",MG:"261",MW:"265",MY:"60",MV:"960",ML:"223",MT:"356",MH:"692",MQ:"596",MR:"222",MU:"230",YT:"262",MX:"52",FM:"691",MD:"373",MC:"377",MN:"976",ME:"382",MS:"1664",MA:"212",MZ:"258",MM:"95",NA:"264",NR:"674",NP:"977",NL:"31",AN:"599",NC:"687",NZ:"64",NI:"505",NE:"227",NG:"234",NU:"683",NF:"672",KP:"850",MP:"1670",NO:"47",OM:"968",PK:"92",PW:"680",PS:"970",PA:"507",PG:"675",PY:"595",PE:"51",PH:"63",PN:"64",PL:"48",PT:"351",QA:"974",RO:"40",RW:"250",BL:"590",SH:"290",KN:"1869",LC:"1758",MF:"590",VC:"1784",SM:"378",ST:"239",SA:"966",SN:"221",RS:"381",SC:"248",SL:"232",SG:"65",SK:"421",SI:"386",SB:"677",SO:"252",ZA:"27",GS:"500",KR:"82",SS:"211",ES:"34",LK:"94",SD:"249",SR:"597",SZ:"268",SE:"46",CH:"41",SY:"963",TW:"886",TJ:"992",TZ:"255",TH:"66",TL:"670",TG:"228",TK:"690",TO:"676",TT:"1868",TN:"216",TR:"90",TM:"993",TC:"1649",TV:"688",UG:"256",UA:"380",AE:"971",UK:"44",UY:"598",UZ:"998",VU:"678",VA:"39",VE:"58",VN:"84",VG:"1284",VI:"1340",WF:"681",EH:"212",WS:"685",YE:"967",ZM:"260",ZW:"263",DO:"1",CA:"1",KZ:"7",US:"1",PR:"1",RU:"7"};E.dialing_code_rlist={1:"US",1403:"CA",1587:"CA",1780:"CA",1825:"CA",1236:"CA",1250:"CA",1604:"CA",1778:"CA",1204:"CA",1431:"CA",1506:"CA",1709:"CA",1902:"CA",1782:"CA",1226:"CA",1249:"CA",1289:"CA",1343:"CA",1365:"CA",1416:"CA",1437:"CA",1519:"CA",1548:"CA",1613:"CA",1647:"CA",1705:"CA",1807:"CA",1905:"CA",1418:"CA",1438:"CA",1450:"CA",1514:"CA",1579:"CA",1581:"CA",1819:"CA",1873:"CA",1306:"CA",1639:"CA",1867:"CA",1787:"PR",1939:"PR",1809:"DO",1829:"DO",1849:"DO",1242:"BS",1246:"BB",1264:"AI",1268:"AG",1284:"VG",1340:"VI",1345:"KY",1441:"BM",1473:"GD",1649:"TC",1664:"MS",1670:"MP",1671:"GU",1684:"AS",1758:"LC",1767:"DM",1784:"VC",1868:"TT",1869:"KN",1876:"JM",20:"EG",211:"SS",212:"MA",212528:"EH",213:"DZ",216:"TN",218:"LY",220:"GM",221:"SN",222:"MR",223:"ML",224:"GN",225:"CI",226:"BF",227:"NE",228:"TG",229:"BJ",230:"MU",231:"LR",232:"SL",233:"GH",234:"NG",235:"TD",236:"CF",237:"CM",238:"CV",239:"ST",240:"GQ",241:"GA",242:"CG",243:"CD",244:"AO",245:"GW",248:"SC",249:"SD",250:"RW",251:"ET",252:"SO",253:"DJ",254:"KE",255:"TZ",256:"UG",257:"BI",258:"MZ",260:"ZM",261:"MG",262:"TF",262269:"YT",262639:"YT",263:"ZW",264:"NA",265:"MW",266:"LS",267:"BW",268:"SZ",269:"KM",27:"ZA",290:"SH",291:"ER",297:"AW",298:"FO",299:"GL",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",350:"GI",351:"PT",352:"LU",353:"IE",354:"IS",355:"AL",356:"MT",357:"CY",358:"FI",35818:"AX",358457:"AX",359:"BG",36:"HU",370:"LT",371:"LV",372:"EE",373:"MD",374:"AM",375:"BY",376:"AD",377:"MC",378:"SM",380:"UA",381:"RS",382:"ME",385:"HR",386:"SI",387:"BA",389:"MK",39:"IT",39066987:"VA",39066988:"VA",40:"RO",41:"CH",420:"CZ",421:"SK",423:"LI",43:"AT",44:"GB",441481:"GG",441534:"JE",441624:"IM",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",500:"FK",501:"BZ",502:"GT",503:"SV",504:"HN",505:"NI",506:"CR",507:"PA",509:"HT",51:"PE",52:"MX",53:"CU",54:"AR",55:"BR",56:"CL",57:"CO",58:"VE",590:"BL",591:"BO",592:"GY",593:"EC",595:"PY",596:"MQ",597:"SR",598:"UY",599:"AN",60:"MY",61:"AU",619162:"CC",619164:"CX",62:"ID",63:"PH",64:"NZ",65:"SG",66:"TH",670:"TL",6721:"AQ",67232:"NF",67235:"NF",673:"BN",674:"NR",675:"PG",676:"TO",677:"SB",678:"VU",679:"FJ",680:"PW",681:"WF",682:"CK",683:"NU",685:"WS",686:"KI",687:"NC",688:"TV",689:"PF",690:"TK",691:"FM",692:"MH",7:"RU",76:"KZ",77:"KZ",81:"JP",82:"KR",84:"VN",850:"KP",852:"HK",853:"MO",855:"KH",856:"LA",86:"CN",880:"BD",886:"TW",90:"TR",91:"IN",92:"PK",93:"AF",94:"LK",95:"MM",960:"MV",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",967:"YE",968:"OM",970:"PS",971:"AE",972:"IL",973:"BH",974:"QA",975:"BT",976:"MN",977:"NP",98:"IR",992:"TJ",993:"TM",994:"AZ",995:"GE",996:"KG",998:"UZ"};E.google_list={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BN:"Brunei",BO:"Bolivia",BQ:"Caribbean Netherlands",BR:"Brazil",BS:"The Bahamas",BT:"Bhutan",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Democratic Republic of the Congo",CF:"Central African Republic",CG:"Republic of the Congo",CH:"Switzerland",CI:"Cote d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CV:"Cape Verde",CW:"Curacao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czechia",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FM:"Federated States of Micronesia",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GG:"Guernsey",GH:"Ghana",GM:"The Gambia",GN:"Guinea",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IN:"India",IQ:"Iraq",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KR:"South Korea",KW:"Kuwait",KZ:"Kazakhstan",LA:"Laos",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MG:"Madagascar",MH:"Marshall Islands",MK:"North Macedonia",ML:"Mali",MM:"Myanmar (Burma)",MN:"Mongolia",MP:"Northern Mariana Islands",MR:"Mauritania",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn Islands",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RO:"Romania",RS:"Serbia",RU:"Russia",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SE:"Sweden",SG:"Singapore",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten",SZ:"Eswatini",TD:"Chad",TF:"French Southern and Antarctic Lands",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TZ:"Tanzania",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Vatican City",VC:"Saint Vincent and the Grenadines",VE:"Venezuela",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",YE:"Yemen",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};E.us_state_zip_list=[{min:35e3,max:36999,code:"AL",name:"Alabama"},{min:99500,max:99999,code:"AK",name:"Alaska"},{min:85e3,max:86999,code:"AZ",name:"Arizona"},{min:71600,max:72999,code:"AR",name:"Arkansas"},{min:9e4,max:96699,code:"CA",name:"California"},{min:8e4,max:81999,code:"CO",name:"Colorado"},{min:6e3,max:6999,code:"CT",name:"Connecticut"},{min:19700,max:19999,code:"DE",name:"Deleware"},{min:32e3,max:34999,code:"FL",name:"Florida"},{min:3e4,max:31999,code:"GA",name:"Georgia"},{min:96700,max:96999,code:"HI",name:"Hawaii"},{min:83200,max:83999,code:"ID",name:"Idaho"},{min:6e4,max:62999,code:"IL",name:"Illinois"},{min:46e3,max:47999,code:"IN",name:"Indiana"},{min:5e4,max:52999,code:"IA",name:"Iowa"},{min:66e3,max:67999,code:"KS",name:"Kansas"},{min:4e4,max:42999,code:"KY",name:"Kentucky"},{min:7e4,max:71599,code:"LA",name:"Louisiana"},{min:3900,max:4999,code:"ME",name:"Maine"},{min:20600,max:21999,code:"MD",name:"Maryland"},{min:1e3,max:2799,code:"MA",name:"Massachusetts"},{min:48e3,max:49999,code:"MI",name:"Michigan"},{min:55e3,max:56999,code:"MN",name:"Minnesota"},{min:38600,max:39999,code:"MS",name:"Mississippi"},{min:63e3,max:65999,code:"MO",name:"Missouri"},{min:59e3,max:59999,code:"MT",name:"Montana"},{min:27e3,max:28999,code:"NC",name:"North Carolina"},{min:58e3,max:58999,code:"ND",name:"North Dakota"},{min:68e3,max:69999,code:"NE",name:"Nebraska"},{min:88900,max:89999,code:"NV",name:"Nevada"},{min:3e3,max:3899,code:"NH",name:"New Hampshire"},{min:7e3,max:8999,code:"NJ",name:"New Jersey"},{min:87e3,max:88499,code:"NM",name:"New Mexico"},{min:1e4,max:14999,code:"NY",name:"New York"},{min:43e3,max:45999,code:"OH",name:"Ohio"},{min:73e3,max:74999,code:"OK",name:"Oklahoma"},{min:97e3,max:97999,code:"OR",name:"Oregon"},{min:15e3,max:19699,code:"PA",name:"Pennsylvania"},{min:300,max:999,code:"PR",name:"Puerto Rico"},{min:2800,max:2999,code:"RI",name:"Rhode Island"},{min:29e3,max:29999,code:"SC",name:"South Carolina"},{min:57e3,max:57999,code:"SD",name:"South Dakota"},{min:37e3,max:38599,code:"TN",name:"Tennessee"},{min:75e3,max:79999,code:"TX",name:"Texas"},{min:88500,max:88599,code:"TX",name:"Texas"},{min:84e3,max:84999,code:"UT",name:"Utah"},{min:5e3,max:5999,code:"VT",name:"Vermont"},{min:22e3,max:24699,code:"VA",name:"Virgina"},{min:2e4,max:20599,code:"DC",name:"Washington DC"},{min:98e3,max:99499,code:"WA",name:"Washington"},{min:24700,max:26999,code:"WV",name:"West Virginia"},{min:53e3,max:54999,code:"WI",name:"Wisconsin"},{min:82e3,max:83199,code:"WY",name:"Wyoming"}];E.in_state_list={AN:"Andaman and Nicobar Islands",AP:"Andhra Pradesh",AR:"Arunachal Pradesh",AS:"Assam",BR:"Bihar",CG:"Chandigarh",CH:"Chhattisgarh",DN:"Dadra and Nagar Haveli",DD:"Daman and Diu",DL:"Delhi",GA:"Goa",GJ:"Gujarat",HR:"Haryana",HP:"Himachal Pradesh",JK:"Jammu and Kashmir",JH:"Jharkhand",KA:"Karnataka",KL:"Kerala",LA:"Ladakh",LD:"Lakshadweep",MP:"Madhya Pradesh",MH:"Maharashtra",MN:"Manipur",ML:"Meghalaya",MZ:"Mizoram",NL:"Nagaland",OR:"Odisha",PY:"Puducherry",PB:"Punjab",RJ:"Rajasthan",SK:"Sikkim",TN:"Tamil Nadu",TS:"Telangana",TR:"Tripura",UP:"Uttar Pradesh",UK:"Uttarakhand",WB:"West Bengal"};E.get_state_by_zip=function(zip){zip=parseInt(""+zip,10);var state=E.us_state_zip_list.filter((function(s){return s.min<=zip&&zip<=s.max}));if(state.length)return state[0].code};E.currency_list={AF:"AFN",AL:"ALL",DZ:"DZD",AS:"USD",AD:"EUR",AO:"AOA",AI:"XCD",AG:"XCD",AR:"ARS",AM:"AMD",AW:"AWG",AU:"AUD",AT:"EUR",AZ:"AZN",BS:"BSD",BH:"BHD",BD:"BDT",BB:"BBD",BY:"BYN",BE:"EUR",BZ:"BZD",BJ:"XOF",BM:"BMD",BT:"BTN",BO:"BOB",BQ:"USD",BA:"BAM",BW:"BWP",BV:"NOK",BR:"BRL",IO:"USD",BN:"BND",BG:"BGN",BF:"XOF",BI:"BIF",CV:"CVE",KH:"KHR",CM:"XAF",CA:"CAD",KY:"KYD",CF:"XAF",TD:"XAF",CL:"CLF",CN:"CNY",CX:"AUD",CC:"AUD",CO:"COP",KM:"KMF",CD:"CDF",CG:"XAF",CK:"NZD",CR:"CRC",HR:"EUR",CU:"CUC",CW:"ANG",CY:"EUR",CZ:"CZK",CI:"XOF",DK:"DKK",DJ:"DJF",DM:"XCD",DO:"DOP",EC:"USD",EG:"EGP",SV:"SVC",GQ:"XAF",ER:"ERN",EE:"EUR",ET:"ETB",FK:"FKP",FO:"DKK",FJ:"FJD",FI:"EUR",FR:"EUR",GF:"EUR",PF:"XPF",TF:"EUR",GA:"XAF",GM:"GMD",GE:"GEL",DE:"EUR",GH:"GHS",GI:"GIP",GR:"EUR",GL:"DKK",GD:"XCD",GP:"EUR",GU:"USD",GT:"GTQ",GG:"GBP",GN:"GNF",GW:"XOF",GY:"GYD",HT:"HTG",HM:"AUD",VA:"EUR",HN:"HNL",HK:"HKD",HU:"HUF",IS:"ISK",IN:"INR",ID:"IDR",IR:"IRR",IQ:"IQD",IE:"EUR",IM:"GBP",IL:"ILS",IT:"EUR",JM:"JMD",JP:"JPY",JE:"GBP",JO:"JOD",KZ:"KZT",KE:"KES",KI:"AUD",KP:"KPW",KR:"KRW",KW:"KWD",KG:"KGS",LA:"LAK",LV:"EUR",LB:"LBP",LS:"LSL",LR:"LRD",LY:"LYD",LI:"CHF",LT:"EUR",LU:"EUR",MO:"MOP",MG:"MGA",MW:"MWK",MY:"MYR",MV:"MVR",ML:"XOF",MT:"EUR",MH:"USD",MQ:"EUR",MR:"MRU",MU:"MUR",YT:"EUR",MX:"MXN",FM:"USD",MD:"MDL",MC:"EUR",MN:"MNT",ME:"EUR",MS:"XCD",MA:"MAD",MZ:"MZN",MM:"MMK",NA:"NAD",NR:"AUD",NP:"NPR",NL:"EUR",NC:"XPF",NZ:"NZD",NI:"NIO",NE:"XOF",NG:"NGN",NU:"NZD",NF:"AUD",MP:"USD",NO:"NOK",OM:"OMR",PK:"PKR",PW:"USD",PA:"PAB",PG:"PGK",PY:"PYG",PE:"PEN",PH:"PHP",PN:"NZD",PL:"PLN",PT:"EUR",PR:"USD",QA:"QAR",MK:"MKD",RO:"RON",RU:"RUB",RW:"RWF",RE:"EUR",BL:"EUR",SH:"SHP",KN:"XCD",LC:"XCD",MF:"EUR",PM:"EUR",VC:"XCD",WS:"WST",SM:"EUR",ST:"STN",SA:"SAR",SN:"XOF",RS:"RSD",SC:"SCR",SL:"SLL",SG:"SGD",SX:"ANG",SK:"EUR",SI:"EUR",SB:"SBD",SO:"SOS",ZA:"ZAR",SS:"SSP",ES:"EUR",LK:"LKR",SD:"SDG",SR:"SRD",SJ:"NOK",SE:"SEK",CH:"CHF",SY:"SYP",TW:"TWD",TJ:"TJS",TZ:"TZS",TH:"THB",TL:"USD",TG:"XOF",TK:"NZD",TO:"TOP",TT:"TTD",TN:"TND",TR:"TRY",TM:"TMT",TC:"USD",TV:"AUD",UG:"UGX",UA:"UAH",AE:"AED",GB:"GBP",UM:"USD",US:"USD",UY:"UYI",UZ:"UZS",VU:"VUV",VE:"VEF",VN:"VND",VG:"USD",VI:"USD",WF:"XPF",EH:"MAD",YE:"YER",ZM:"ZMW",ZW:"ZWL",AX:"EUR"};E.paypal_currency_list=["AUD","BRL","CAD","CZK","DKK","EUR","HKD","HUF","ILS","JPY","MXN","TWD","NZD","NOK","PHP","PLN","GBP","SGD","SEK","CHF","THB","USD"];E.bluesnap_currency_list=["AED","AFN","ALL","AMD","ANG","ARS","AUD","AWG","BAM","BBD","BGN","BHD","BMD","BND","BOB","BRL","BSD","BWP","BYR","CAD","CHF","CLP","CNY","CRC","CZK","DKK","DOP","DZD","EGP","EUR","FJD","GBP","GEL","GIP","GTQ","HKD","HUF","IDR","ILS","INR","ISK","JMD","JOD","JPY","KES","KHR","KRW","KWD","KYD","KZT","LKR","MAD","MDL","MKD","MUR","MWK","MXN","MYR","NAD","NGN","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","QAR","RON","RSD","SAR","SCR","SDG","SEK","SGD","THB","TND","TRY","TTD","TWD","TZS","UAH","USD","UYU","UZS","VND","XCD","XOF","ZAR","COP"];E.bluesnap_prohibited_countries=["AF","AX","BQ","CO","CU","EU","IR","IQ","XK","LB","LY","MM","KP","BL","SS","SD","SY","TL","YE"];E.avangate_currency_list=["USD","EUR","GBP","RON","AUD","CAD","CHF","CZK","DKK","HUF","JPY","NOK","PLN","SEK","TRY","RUB","CNY","BGN","BRL","HKD","KRW","MXN","NZD","SGD","ZAR","MDL","AED","EGP","INR","RSD","UAH","TWD","ILS","QAR","SAR","ARS","CLP","BOB","COP","PYG","PEN","UYU","NGN","NAD","TND","DZD","KES","BYN"];E.avangate_prohibited_countries=["CU","IR","LY","SD","SY","KP","AF","DZ","AS","AG","BS","BJ","BW","BN","KH","CM","CI","FO","GF","GA","GE","GH","GL","GP","GG","GN","IQ","JM","LY","MV","ML","MZ","MM","NA","NC","NI","MP","QA","RE","RW","SN","SC","SZ","TJ","TZ","TL","TN","TM","UG","UM","VE","YE"];E.stripe_currency_list=["USD","AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BIF","BMD","BND","BOB","BRL","BSD","BWP","BZD","CAD","CDF","CHF","CLP","CNY","COP","CRC","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ETB","EUR","FJD","FKP","GBP","GEL","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HTG","HUF","IDR","ILS","INR","ISK","JMD","JPY","KES","KGS","KHR","KMF","KRW","KYD","KZT","LAK","LKR","LRD","LSL","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RWF","SAR","SBD","SCR","SEK","SGD","SHP","SLL","SOS","SRD","STD","SZL","THB","TJS","TOP","TRY","TTD","TWD","TZS","UAH","UGX","UYU","VND","VUV","WST","XAF","XCD","XOF","XPF","YER","ZAR","ZMW"];E.currency_decimals={BYR:0,CLP:0,JPY:0,KRW:0,VND:0,XOF:0,HUF:0,TWD:0,ISK:0,ALL:0,ARS:0,COP:0,CRC:0,IDR:0,KHR:0,LBP:0,MWK:0,SDG:0,TZS:0,UZS:0};E.adyen_currency_units={AED:2,ALL:2,AMD:2,ANG:2,AOA:2,ARS:2,AUD:2,AWG:2,AZN:2,BAM:2,BBD:2,BDT:2,BGN:2,BHD:3,BMD:2,BND:2,BOB:2,BRL:2,BSD:2,BWP:2,BYN:2,BZD:2,CAD:2,CHF:2,CLP:2,CNH:2,CNY:2,COP:2,CRC:2,CUP:2,CVE:0,CZK:2,DJF:0,DKK:2,DOP:2,DZD:2,EGP:2,ETB:2,EUR:2,FJD:2,FKP:2,GBP:2,GEL:2,GHS:2,GIP:2,GMD:2,GNF:0,GTQ:2,GYD:2,HKD:2,HNL:2,HTG:2,HUF:2,IDR:0,ILS:2,INR:2,IQD:3,ISK:2,JMD:2,JOD:3,JPY:0,KES:2,KGS:2,KHR:2,KMF:0,KRW:0,KWD:3,KYD:2,KZT:2,LAK:2,LBP:2,LKR:2,LYD:3,MAD:2,MDL:2,MKD:2,MMK:2,MNT:2,MOP:2,MRU:2,MUR:2,MVR:2,MWK:2,MXN:2,MYR:2,MZN:2,NAD:2,NGN:2,NIO:2,NOK:2,NPR:2,NZD:2,OMR:3,PAB:2,PEN:2,PGK:2,PHP:2,PKR:2,PLN:2,PYG:0,QAR:2,RON:2,RSD:2,RUB:2,RWF:0,SAR:2,SBD:2,SCR:2,SEK:2,SGD:2,SHP:2,SLE:2,SOS:2,SRD:2,STN:2,SVC:2,SZL:2,THB:2,TND:3,TOP:2,TRY:2,TTD:2,TWD:2,TZS:2,UAH:2,UGX:0,USD:2,UYU:2,UZS:2,VEF:2,VND:0,VUV:0,WST:2,XAF:0,XCD:2,XOF:0,XPF:0,YER:2,ZAR:2,ZMW:2};E.currency_sign_list={USD:"$",EUR:"€",GBP:"£",ARS:"$",AUD:"$",BRL:"R$",CAD:"C$",CHF:"Fr",CZK:"Kč",KRW:"₩",INR:"₹",ILS:"₪",MXN:"$",NOK:"kr",PHP:"₱",PLN:"zł",RUB:"₽",SEK:"kr",SGD:"S$",TRY:"₺"};E.code2label=function(code){code=code.toUpperCase();return E.list[code]||code};E.code2adj=function(code){code=code.toUpperCase();return E.adj_list[code]||code};E.code2timezone=function(code){code=code.toUpperCase();return E.timezone[code]||code};E.label2code=function(label){for(var i in E.list){if(E.list[i]===label)return i}return""};E.mixed2code=function(mixed){if(!mixed)return;if(/^[A-Z]{2}$/.test(mixed))return mixed;if(mixed.length==2)return mixed.toUpperCase();if(mixed=="USA")return"US";for(var code in E.list){if(E.list[code].toLowerCase()==mixed.toLowerCase())return code}return mixed};E.www2code=function(code){return code=="UK"?"GB":code=="uk"?"gb":code};E.code2www=function(code){return code=="GB"?"UK":code=="gb"?"uk":code};E.gl2uule=function(gl){gl=E.www2code(gl.toUpperCase());return E.google_list[gl]||gl};E.code2currency=function(code){return E.currency_list[code.toUpperCase()]};E.currency2sign=function(currency){currency=currency&&currency.toUpperCase();return E.currency_sign_list[currency]||""};E.code2currency_sign=function(code){return E.currency2sign(E.code2currency(code))};E.currency2prefix=function(currency){var sign=E.currency2sign(currency);return sign?sign:currency+" "};E.format_sign_before_price=function(sign,price){return sign+price};E.format_sign_before_price_with_space=function(sign,price){return sign+" "+price};E.format_sign_after_price=function(sign,price){return price+sign};E.format_sign_after_price_with_space=function(sign,price){return price+" "+sign};E.sign_format_list={USD:E.format_sign_before_price,EUR:E.format_sign_after_price_with_space,GBP:E.format_sign_before_price,ARS:E.format_sign_before_price,AUD:E.format_sign_before_price,BRL:E.format_sign_before_price,CAD:E.format_sign_before_price,CHF:E.format_sign_before_price_with_space,CZK:E.format_sign_after_price_with_space,KRW:E.format_sign_before_price,INR:E.format_sign_before_price,ILS:E.format_sign_before_price,MXN:E.format_sign_before_price,NOK:E.format_sign_after_price_with_space,PHP:E.format_sign_before_price,PLN:E.format_sign_after_price_with_space,RUB:E.format_sign_after_price,SEK:E.format_sign_after_price_with_space,SGD:E.format_sign_before_price,TRY:E.format_sign_after_price};E.format_price=function(currency,price,disable_rounding){var sign=E.currency2sign(currency);var format=E.sign_format_list[currency];var fraction_digits=E.get_currency_decimals(currency);var options=!disable_rounding?{minimumFractionDigits:fraction_digits,maximumFractionDigits:fraction_digits}:{};if(!currency)return price.toLocaleString(undefined,options);if(!sign||!format)return currency+" "+price.toLocaleString(undefined,options);return format(sign,price.toLocaleString(undefined,options))};var currency_rlist;E.get_currency_rlist=function(){if(currency_rlist)return currency_rlist;currency_rlist={};for(var co in E.currency_list){var cu=E.currency_list[co];if(!currency_rlist[cu])currency_rlist[cu]=co;else{if(!Array.isArray(currency_rlist[cu]))currency_rlist[cu]=[currency_rlist[cu]];currency_rlist[cu].push(co)}}return currency_rlist};E.get_currency_decimals=function(currency){var decimals=E.currency_decimals[currency&&currency.toUpperCase()];return decimals===undefined?2:decimals};E.country2isocode=function(country){return country_lookup[(""+country).toLowerCase()]};E.isocode2country=function(iso_code){var name=E.iso_list[iso_code];return Array.isArray(name)?name[0]:name};var country_lookup=function(){var lookup={};Object.keys(E.iso_list).forEach((function(iso_code){var names=E.iso_list[iso_code];(Array.isArray(names)?names:[names]).forEach((function(n){lookup[n.toLowerCase()]=iso_code}))}));return lookup}();E.get_country_object=function(code,t){var name=E.code2label(code);var name_low=name.toLowerCase();var name_locale=t?t(name=="Croatia (Hrvatska)"?"Croatia":name).toLowerCase():"";return{code:code.toLowerCase(),name,name_low,name_locale,top:false}};return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},932:(module,exports)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON ISC
"use strict";(function(){var is_node=typeof module=="object"&&module.exports&&module.children;if(!is_node);else;!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){var E=date_get;E.sec={NANO:1/1e9,MS:.001,SEC:1,MIN:60,HOUR:60*60,DAY:24*60*60,WEEK:7*24*60*60,MONTH:30*24*60*60,YEAR:365*24*60*60};E.ms={};for(var key in E.sec)E.ms[key]=E.sec[key]*1e3;var ms=E.ms;function pad(num,size){return("000"+num).slice(-size)}E.ms_to_dur=function(_ms){var s="",sec=Math.floor(_ms/1e3);if(sec<0){s+="-";sec=-sec}var days=Math.floor(sec/(60*60*24));sec-=days*60*60*24;var hours=Math.floor(sec/(60*60));sec-=hours*60*60;var mins=Math.floor(sec/60);sec-=mins*60;if(days)s+=days+" "+(days>1?"Days":"Day")+" ";return s+pad(hours,2)+":"+pad(mins,2)+":"+pad(sec,2)};E.ms_to_dur_interval=function(_ms){var intervals=[{name:"0-1h",length:ms.HOUR},{name:"1h-1d",length:ms.DAY},{name:"1d-2d",length:2*ms.DAY},{name:"2d-1w",length:ms.WEEK},{name:"1w-2w",length:2*ms.WEEK},{name:"2w-1m",length:ms.MONTH},{name:"1m-3m",length:3*ms.MONTH},{name:"3m-6m",length:6*ms.MONTH},{name:"6m-1y",length:ms.YEAR},{name:">=1y",length:Infinity}];for(var i=0;i<intervals.length;i++){if(_ms<intervals[i].length)return intervals[i].name}};E.round_dur=function(dur,precision,round_method){if(!["round","floor","ceil"].includes(round_method))round_method="round";var round=Math[round_method];return!precision?round(dur):precision*round(dur/precision)};E.dur_to_str=function(dur,opt){opt=opt||{};var parts=[];dur=E.round_dur(+dur,opt.precision);function chop(period,name){if(dur<period)return;var number=Math.floor(dur/period);parts.push(number+(opt.sep2||"")+name);dur-=number*period}chop(ms.YEAR,"y");chop(ms.MONTH,"mo");if(opt.week)chop(ms.WEEK,"w");chop(ms.DAY,"d");chop(ms.HOUR,"h");chop(ms.MIN,"min");chop(ms.SEC,"s");if(dur&&!opt.drop_ms)parts.push(dur+(opt.sep2||"")+"ms");if(!parts.length)return"0"+(opt.sep2||"")+"s";return parts.slice(0,opt.units||parts.length).join(opt.sep||"")};E.parse_dur=function(dur,opt){opt=opt||{};var parts={};dur=+dur;function chop(period,name){if(dur<period)return;var number=Math.floor(dur/period);parts[name]=number;dur-=number*period}chop(ms.YEAR,"year");chop(ms.MONTH,"month");if(opt.week)chop(ms.WEEK,"week");chop(ms.DAY,"day");chop(ms.HOUR,"hour");chop(ms.MIN,"min");chop(ms.SEC,"sec");if(dur)parts.ms=dur;return parts};E.monotonic=undefined;E.init=function(){var adjust,last;if(typeof self=="object"&&self.performance&&self.performance.now){adjust=Date.now()-self.performance.now();E.monotonic=function(){return self.performance.now()+adjust}}else if(is_node&&!global.mocha_running){var now_fn=function(){var data=process.hrtime();var seconds=data[0],nanos=data[1];return Math.floor(seconds*E.ms.SEC+nanos*E.ms.NANO)};adjust=Date.now()-now_fn();E.monotonic=function(){return now_fn()+adjust}}else{last=adjust=0;E.monotonic=function(){var now=Date.now()+adjust;if(now>=last)return last=now;adjust+=last-now;return last}}};E.init();E.str_to_dur=function(str,opt){opt=opt||{};var month="mo|mon|months?";if(opt.short_month)month+="|m";var m=str.toLowerCase().replace(/ /g,"").match(new RegExp("^(([0-9]+)y(ears?)?)?(([0-9]+)("+month+"))?"+"(([0-9]+)w(eeks?)?)?(([0-9]+)d(ays?)?)?"+"(([0-9]+)h(ours?)?)?(([0-9]+)(min|minutes?))?"+"(([0-9]+)s(ec|econds?)?)?(([0-9]+)ms(ec)?)?$","i"));if(!m)return;return ms.YEAR*(+m[2]||0)+ms.MONTH*(+m[5]||0)+ms.WEEK*(+m[8]||0)+ms.DAY*(+m[11]||0)+ms.HOUR*(+m[14]||0)+ms.MIN*(+m[17]||0)+ms.SEC*(+m[20]||0)+(+m[23]||0)};E.months_long=["January","February","March","April","May","June","July","August","September","October","November","December"];E.months_short=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var months_short_lc=E.months_short.map((function(m){return m.toLowerCase()}));E.days_long=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];E.days_short=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var days_short_lc=E.days_short.map((function(d){return d.toLowerCase()}));var days_long_lc=E.days_long.map((function(d){return d.toLowerCase()}));E.locale={months_long:E.months_long,months_short:E.months_short,days_long:E.days_long,days_short:E.days_short,AM:"AM",PM:"PM"};E.get=date_get;function date_get(d,_new){var y,mon,day,H,M,S,_ms;if(d===undefined)return new Date;if(d==null)return new Date(null);if(d instanceof Date)return _new?new Date(d):d;if(typeof d=="string"){var m;d=d.trim();if(m=/^((\d\d\d\d)-(\d\d)-(\d\d)|(\d\d?)-([A-Za-z]{3})-(\d\d(\d\d)?))\s*([\sT](\d\d):(\d\d)(:(\d\d)(\.(\d\d\d))?)?Z?)?$/.exec(d)){H=+m[10]||0;M=+m[11]||0;S=+m[13]||0;_ms=+m[15]||0;if(m[2]){y=+m[2];mon=+m[3];day=+m[4];if(!y&&!mon&&!day&&!H&&!M&&!S&&!_ms)return new Date(NaN);return new Date(Date.UTC(y,mon-1,day,H,M,S,_ms))}if(m[5]){y=+m[7];mon=months_short_lc.indexOf(m[6].toLowerCase())+1;day=+m[5];if(m[7].length==2){y=+y;y+=y>=70?1900:2e3}return new Date(Date.UTC(y,mon-1,day,H,M,S,_ms))}}if(/^\d+$/.test(d))return new Date(+d);return new Date(d)}if(typeof d=="number")return new Date(d);throw new TypeError("invalid date "+d)}E.is_valid=function(d){return d instanceof Date&&!isNaN(d)};E.to_sql_ms=function(d){d=E.get(d);if(isNaN(d))return"0000-00-00 00:00:00.000";return pad(d.getUTCFullYear(),4)+"-"+pad(d.getUTCMonth()+1,2)+"-"+pad(d.getUTCDate(),2)+" "+pad(d.getUTCHours(),2)+":"+pad(d.getUTCMinutes(),2)+":"+pad(d.getUTCSeconds(),2)+"."+pad(d.getUTCMilliseconds(),3)};E.to_sql_sec=function(d){return E.to_sql_ms(d).slice(0,-4)};E.to_sql=function(d){return E.to_sql_ms(d).replace(/( 00:00:00)?....$/,"")};E.from_sql=E.get;E.to_month_short=function(d){d=E.get(d);return E.months_short[d.getUTCMonth()]};E.to_month_long=function(d){d=E.get(d);return E.months_long[d.getUTCMonth()]};E.to_jdate=function(d){d=E.get(d);return(pad(d.getUTCDate(),2)+"-"+E.months_short[d.getUTCMonth()]+"-"+pad(d.getUTCFullYear()%100,2)+" "+pad(d.getUTCHours(),2)+":"+pad(d.getUTCMinutes(),2)+":"+pad(d.getUTCSeconds(),2)).replace(/( 00:00)?:00$/,"")};E.to_log_file=function(d){d=E.get(d);return d.getUTCFullYear()+pad(d.getUTCMonth()+1,2)+pad(d.getUTCDate(),2)+"_"+pad(d.getUTCHours(),2)+pad(d.getUTCMinutes(),2)+pad(d.getUTCSeconds(),2)};E.from_log_file=function(d){var m=d.match(/^(\d{4})(\d{2})(\d{2})_(\d{2})(\d{2})(\d{2})$/);if(!m)return;return new Date(Date.UTC(m[1],m[2]-1,m[3],m[4],m[5],m[6]))};E.to_log_ms=function(d){return E.to_sql_ms(d).replace(/-/g,".")};E.from_rcs=function(d){var m=d.match(/^(\d{4})\.(\d{2})\.(\d{2})\.(\d{2})\.(\d{2})\.(\d{2})$/);if(!m)return;return new Date(Date.UTC(m[1],m[2]-1,m[3],m[4],m[5],m[6]))};E.to_rcs=function(d){return E.to_sql_sec(d).replace(/[-: ]/g,".")};E.align=function(d,align){d=E.get(d,1);switch(align.toUpperCase()){case"MS":break;case"SEC":d.setUTCMilliseconds(0);break;case"MIN":d.setUTCSeconds(0,0);break;case"HOUR":d.setUTCMinutes(0,0,0);break;case"DAY":d.setUTCHours(0,0,0,0);break;case"WEEK":d.setUTCDate(d.getUTCDate()-d.getUTCDay());d.setUTCHours(0,0,0,0);break;case"MONTH":d.setUTCDate(1);d.setUTCHours(0,0,0,0);break;case"YEAR":d.setUTCMonth(0,1);d.setUTCHours(0,0,0,0);break;default:throw new Error("invalid align "+align)}return d};E.add=function(d,dur){d=E.get(d,1);dur=normalize_dur(dur);if(dur.year)d.setUTCFullYear(d.getUTCFullYear()+ +dur.year);if(dur.month)d.setUTCMonth(d.getUTCMonth()+ +dur.month);["day","hour","min","sec","ms"].forEach((function(k){if(dur[k])d.setTime(+d+dur[k]*ms[k.toUpperCase()])}));return d};function normalize_dur(dur){var aliases={years:"year",months:"month",days:"day",hours:"hour",minutes:"min",minute:"min",mins:"min",seconds:"sec",second:"sec",secs:"sec",y:"year",mo:"month",d:"day",h:"hour",m:"min",s:"sec"};var norm={};for(var k in dur)norm[aliases[k]||k]=dur[k];return norm}E.describe_interval=function(_ms){return _ms<2*ms.MIN?Math.round(_ms/ms.SEC)+" sec":_ms<2*ms.HOUR?Math.round(_ms/ms.MIN)+" min":_ms<2*ms.DAY?Math.round(_ms/ms.HOUR)+" hours":_ms<2*ms.WEEK?Math.round(_ms/ms.DAY)+" days":_ms<2*ms.MONTH?Math.round(_ms/ms.WEEK)+" weeks":_ms<2*ms.YEAR?Math.round(_ms/ms.MONTH)+" months":Math.round(_ms/ms.YEAR)+" years"};E.time_ago=function(d,until_date){var _ms=E.get(until_date)-E.get(d);if(_ms<ms.SEC)return"right now";return E.describe_interval(_ms)+" ago"};E.ms_to_str=function(_ms){var s=""+_ms;return s.length<=3?s+"ms":s.slice(0,-3)+"."+s.slice(-3)+"s"};E.parse=function(text,opt){opt=opt||{};if(opt.fmt)return E.strptime(text,opt.fmt,opt.local);var d,a,i,v,_v,dir,_dir,amount,now=opt.now;now=!now?new Date:new Date(now);text=text.replace(/\s+/g," ").trim().toLowerCase();if(!text)return;if(text=="now")return now;if(!isNaN(d=E.get(text)))return d;d=now;a=text.split(" ");dir=a.includes("ago")?-1:a.includes("last")?-1:a.includes("next")?1:undefined;for(i=0;i<a.length;i++){v=a[i];if(/^(ago|last|next)$/.test(v));else if(v=="today")d=E.align(d,"DAY");else if(v=="yesterday")d=E.align(+d-ms.DAY,"DAY");else if(v=="tomorrow")d=E.align(+d+ms.DAY,"DAY");else if((_v=days_short_lc.indexOf(v))>=0)d=new Date(+E.align(d,"WEEK")+_v*ms.DAY+(dir||0)*ms.WEEK);else if((_v=days_long_lc.indexOf(v))>=0)d=new Date(+E.align(d,"WEEK")+_v*ms.DAY+(dir||0)*ms.WEEK);else if(_v=/^([+-]?\d+)(?:([ymoinwdhs]+)(\d.*)?)?$/.exec(v)){if(amount!==undefined)return;amount=dir!==undefined?Math.abs(+_v[1]):+_v[1];if(_v[2]){a.splice(i+1,0,_v[2]);if(_v[3])a.splice(i+2,0,_v[3])}continue}else if(/^([ywdhs]|years?|months?|mon?|weeks?|days?|hours?|minutes?|min|seconds?|sec)$/.test(v)){_v=v[0]=="m"&&v[1]=="i"?ms.MIN:v[0]=="y"?ms.YEAR:v[0]=="m"&&v[1]=="o"?ms.MONTH:v[0]=="w"?ms.WEEK:v[0]=="d"?ms.DAY:v[0]=="h"?ms.HOUR:ms.SEC;amount=amount===undefined?1:amount;_dir=dir===undefined?opt.dir||1:dir;if(_v==ms.MONTH)d.setUTCMonth(d.getUTCMonth()+_dir*amount);else if(_v==ms.YEAR)d.setUTCFullYear(d.getUTCFullYear()+_dir*amount);else d=new Date(+d+_v*amount*_dir);amount=undefined}else return;if(amount!==undefined)return}if(amount!==undefined)return;return d};E.strptime=function(str,fmt,local){function month(m){return months_short_lc.indexOf(m.toLowerCase())}var parse={"%":["%",function(){},0],a:["[a-z]+",function(m){},0],A:["[a-z]+",function(m){},0],b:["[a-z]+",function(m){d.setUTCMonth(month(m))},2],B:["[a-z]+",function(m){d.setUTCMonth(month(m))},2],y:["[0-9]{2}",function(m){d.setUTCFullYear(+m+(m<70?2e3:1900))},1],Y:["[0-9]{4}",function(m){d.setUTCFullYear(+m)},1],m:["[0-9]{0,2}",function(m){d.setUTCMonth(+m-1)},2],d:["[0-9]{0,2}",function(m){d.setUTCDate(+m)},3],e:["[0-9]{0,2}",function(m){d.setUTCDate(+m)},3],H:["[0-9]{0,2}",function(m){if(local)d.setHours(+m);else d.setUTCHours(+m)},4],M:["[0-9]{0,2}",function(m){d.setUTCMinutes(+m)},5],S:["[0-9]{0,2}",function(m){d.setUTCSeconds(+m)},6],s:["[0-9]+",function(m){d=new Date(+m)},0],L:["[0-9]{0,3}",function(m){d.setUTCMilliseconds(+m)},7],z:["[+-][0-9]{4}",function(m){var timezone=+m.slice(0,3)*3600+m.slice(3,5)*60;d=new Date(+d-timezone*1e3)},8],Z:["[a-z]{0,3}[+-][0-9]{2}:?[0-9]{2}|[a-z]{1,3}",function(m){m=/^([a-z]{0,3})(?:([+-][0-9]{2}):?([0-9]{2}))?$/i.exec(m);if(m[1]=="Z"||m[1]=="UTC")return;var timezone=+m[2]*3600+m[3]*60;d=new Date(+d-timezone*1e3)},8],I:["[0-9]{0,2}",function(m){d.setUTCHours(+m)},4],p:["AM|PM",function(m){if(d.getUTCHours()==12)d.setUTCHours(d.getUTCHours()-12);if(m.toUpperCase()=="PM")d.setUTCHours(d.getUTCHours()+12)},9]};var ff=[];var ff_idx=[];var re=new RegExp("^\\s*"+fmt.replace(/%(?:([a-zA-Z%]))/g,(function(_,fd){var d=parse[fd];if(!d)throw Error("Unknown format descripter: "+fd);ff_idx[d[2]]=ff.length;ff.push(d[1]);return"("+d[0]+")"}))+"\\s*$","i");var matched=str.match(re);if(!matched)return;var d=new Date(0);for(var i=0;i<ff_idx.length;i++){var idx=ff_idx[i];var fun=ff[idx];if(fun)fun(matched[idx+1])}return d};E.apply_tz=function(date,tz,opt){if(!date)return date;date=E.get(date);tz=(tz||E.local_tz).replace(":","");opt=opt||{};var timezone=+tz.slice(1,3)*E.ms.HOUR+tz.slice(3,5)*E.ms.MIN;var sign=tz.slice(0,1)=="+"?1:-1;if(opt.inverse)sign*=-1;return new Date(date.getTime()+sign*timezone)};var utc_local={local:{getSeconds:function(d){return d.getSeconds()},getMinutes:function(d){return d.getMinutes()},getHours:function(d){return d.getHours()},getDay:function(d){return d.getDay()},getDate:function(d){return d.getDate()},getMonth:function(d){return d.getMonth()},getFullYear:function(d){return d.getFullYear()},getYearBegin:function(d){return new Date(d.getFullYear(),0,1)}},utc:{getSeconds:function(d){return d.getUTCSeconds()},getMinutes:function(d){return d.getUTCMinutes()},getHours:function(d){return d.getUTCHours()},getDay:function(d){return d.getUTCDay()},getDate:function(d){return d.getUTCDate()},getMonth:function(d){return d.getUTCMonth()},getFullYear:function(d){return d.getUTCFullYear()},getYearBegin:function(d){return new Date(Date.UTC(d.getUTCFullYear(),0,1))}}};E.strftime=function(fmt,d,opt){function hours12(hours){return hours==0?12:hours>12?hours-12:hours}function ord_str(n){var i=n%10,ii=n%100;if(ii>=11&&ii<=13||i==0||i>=4)return"th";switch(i){case 1:return"st";case 2:return"nd";case 3:return"rd"}}function week_num(l,_d,first_weekday){var wday=l.getDay(_d);if(first_weekday=="monday")wday=wday==0?wday=6:wday-1;var yday=(_d-l.getYearBegin(_d))/ms.DAY;return Math.floor((yday+7-wday)/7)}function padx(n,padding,length){if(typeof padding=="number"){length=padding;padding="0"}if(padding===undefined)padding="0";length=length||2;var s=""+n;if(padding)for(;s.length<length;s=padding+s);return s}opt=opt||{};d=E.get(d);var locale=opt.locale||E.locale;var formats=locale.formats||{};var tz=opt.timezone;var utc=opt.utc!==undefined?opt.utc:opt.local!==undefined?!opt.local:true;if(tz!=null){utc=true;if(typeof tz=="string"){var sign=tz[0]=="-"?-1:1;var hours=parseInt(tz.slice(1,3),10);var mins=parseInt(tz.slice(3,5),10);tz=sign*(60*hours+mins)}if(typeof tz=="number")d=new Date(+d+tz*6e4)}var l=utc?utc_local.utc:utc_local.local;function replace(_fmt){return _fmt.replace(/%([-_0]?.)/g,(function(_,c){var mod,padding,day;if(c.length==2){mod=c[0];if(mod=="-")padding="";else if(mod=="_")padding=" ";else if(mod=="0")padding="0";else return _;c=c[1]}switch(c){case"A":return locale.days_long[l.getDay(d)];case"a":return locale.days_short[l.getDay(d)];case"B":return locale.months_long[l.getMonth(d)];case"b":return locale.months_short[l.getMonth(d)];case"C":return padx(Math.floor(l.getFullYear(d)/100),padding);case"D":return replace(formats.D||"%m/%d/%y");case"d":return padx(l.getDate(d),padding);case"e":return l.getDate(d);case"F":return replace(formats.F||"%Y-%m-%d");case"H":return padx(l.getHours(d),padding);case"h":return locale.months_short[l.getMonth(d)];case"I":return padx(hours12(l.getHours(d)),padding);case"j":day=Math.ceil((+d-l.getYearBegin(d))/(1e3*60*60*24));return pad(day,3);case"k":return padx(l.getHours(d),padding===undefined?" ":padding);case"L":return pad(Math.floor(d.getMilliseconds()),3);case"l":return padx(hours12(l.getHours(d)),padding===undefined?" ":padding);case"M":return padx(l.getMinutes(d),padding);case"m":return padx(l.getMonth(d)+1,padding);case"n":return"\n";case"o":return""+l.getDate(d)+ord_str(l.getDate(d));case"P":return(l.getHours(d)<12?locale.AM:locale.PM).toLowerCase();case"p":return l.getHours(d)<12?locale.AM:locale.PM;case"R":return replace(formats.R||"%H:%M");case"r":return replace(formats.r||"%I:%M:%S %p");case"S":return padx(l.getSeconds(d),padding);case"s":return Math.floor(+d/1e3);case"T":return replace(formats.T||"%H:%M:%S");case"t":return"\t";case"U":return padx(week_num(l,d,"sunday"),padding);case"u":day=l.getDay(d);return day==0?7:day;case"v":return replace(formats.v||"%e-%b-%Y");case"W":return padx(week_num(l,d,"monday"),padding);case"w":return l.getDay(d);case"Y":return l.getFullYear(d);case"y":return(""+l.getFullYear(d)).slice(-2);case"Z":if(utc)return"GMT";var tz_string=d.toString().match(/\((\w+)\)/);return tz_string&&tz_string[1]||"";case"z":if(utc)return"+0000";var off=typeof tz=="number"?tz:-d.getTimezoneOffset();return(off<0?"-":"+")+pad(Math.abs(Math.trunc(off/60)),2)+pad(off%60,2);default:return c}}))}return replace(fmt)};E.local_tz=E.strftime("%z",E.get(),{utc:false});E.compile_schedule=function(expr){var re=/^(\d\d?)(?::(\d\d?))?-(\d\d?)(?::(\d\d?))?$/;var parts=expr.split(/\s+/);var intervals=[];for(var i=0;i<parts.length;i++){if(!parts[i])continue;var m=re.exec(parts[i]);if(!m)throw new Error("Schedule syntax error: "+expr);var from=m[1]*ms.HOUR,to=m[3]*ms.HOUR;if(m[2])from+=m[2]*ms.MIN;if(m[4])to+=m[4]*ms.MIN;intervals.push({from:from%ms.DAY,to:to%ms.DAY})}return function(d){var t=E.get(d)%ms.DAY;for(var j=0;j<intervals.length;j++){var interval=intervals[j];if(interval.from<interval.to){if(t>=interval.from&&t<interval.to)return true}else{if(t<interval.to||t>=interval.from)return true}}return false}};E.timezone_offset=function(tz,dt){dt=dt||E.get();tz=dt.toLocaleString("en",{timeZone:tz,timeStyle:"long"}).split(" ").slice(-1)[0];var dt_str=dt.toString();var offset=Date.parse(dt_str+" "+tz)-Date.parse(dt_str+" UTC");return offset/ms.MIN};E.is_date_like=function(v){if(v instanceof Date)return true;if(Number.isFinite(v))return true;if(typeof v=="string"){return date_like_regexes.some((function(re){return re.test(v)}))&&Number.isFinite(Date.parse(v))}return false};var date_like_regexes=[/^\d{2}(\d{2})?[ /-](\d{2}|[a-z]{3,10})[ /-]\d{2}/i,/^\d{2}[ /-](\d{2}|[a-z]{3,10})[ /-]\d{2}(\d{2})?/i,/^(\d{2}|[a-z]{3,10})[ /-]\d{2}[ /-]\d{2}(\d{2})?/i];return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},4336:(module,exports)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON ISC
"use strict";(function(){var is_node=typeof module=="object"&&module.exports&&module.children;if(!is_node);else;!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){var E={};E.un={};var html_escape_table={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};E.html=function(html){return html.replace(/[&<>"']/g,(function(m){return html_escape_table[m[0]]}))};E.sh=function(s_or_a){function single(s){s=""+s;if(!s)return'""';if(/^[a-z0-9_\-.\/:]+$/i.test(s))return s;return'"'+s.replace(/([\\"`$])/g,"\\$1")+'"'}if(arguments.length==1&&!Array.isArray(s_or_a))return single(s_or_a);var s="",a=Array.isArray(s_or_a)?s_or_a:arguments;for(var i=0;i<a.length;i++)s+=(i?" ":"")+single(a[i]);return s};E.un_sh=function(s,keep_esc){var state={PARSE_STATE_INIT:0,PARSE_STATE_NORMAL_ARG:1,PARSE_STATE_QUOTE_ARG:2},cur_state=state.PARSE_STATE_INIT;var i,quote=0,argv=[],a="";for(i=0;i<s.length;i++){var esc=0;a+=s[i];if(s[i]=="\\"&&s[1]){if(!keep_esc)a=a.slice(0,-1);esc=1;i++;a+=s[i]}switch(cur_state){case state.PARSE_STATE_INIT:switch(s[i]){case"\r":case"\n":case" ":case"\t":if(!esc){a="";break}case'"':case"'":if(!esc){cur_state=state.PARSE_STATE_QUOTE_ARG;if(!keep_esc)a=a.slice(0,-1);quote=s[i];break}default:cur_state=state.PARSE_STATE_NORMAL_ARG}break;case state.PARSE_STATE_NORMAL_ARG:switch(s[i]){case"\r":case"\n":case" ":case"\t":if(!esc){cur_state=state.PARSE_STATE_INIT;a=a.slice(0,-1);argv.push(a);a=""}break;case'"':case"'":if(!esc){cur_state=state.PARSE_STATE_QUOTE_ARG;quote=s[i];if(!keep_esc)a=a.slice(0,-1)}break}break;case state.PARSE_STATE_QUOTE_ARG:if(s[i]==quote&&!esc){cur_state=state.PARSE_STATE_NORMAL_ARG;if(!keep_esc)a=a.slice(0,-1)}break}}if(cur_state==state.PARSE_STATE_NORMAL_ARG){cur_state=state.PARSE_STATE_INIT;argv.push(a)}if(cur_state!=state.PARSE_STATE_INIT)throw"error parsing shell";return argv};E.regex=function(s){return s.replace(/[[\]{}()*+?.\\^$|\/]/g,"\\$&")};E.uri_comp=function(s){return encodeURIComponent(s).replace(/%20/g,"+")};var http_escape_chars=[];(function(){var i;for(i=0;i<256;i++){var c=String.fromCharCode(i);http_escape_chars[i]=/^[a-zA-Z0-9_.~,\-]$/.test(c)?c:"%"+("0"+i.toString(16)).slice(-2)}})();E.encodeURIComponent_bin=function(s_or_b){var s=typeof Buffer!="undefined"&&s_or_b instanceof Buffer?s_or_b.toString("binary"):""+s_or_b;var esc="";for(var i=0;i<s.length;i++){var code=s.charCodeAt(i);if(55296<=code&&code<=57343)esc+=encodeURIComponent(s.substr(i++,2));else esc+=http_escape_chars[code]||encodeURIComponent(s[i])}return esc};E.qs=function(param,opt){opt=opt||{};var qs=opt.qs||"";var sep=qs||opt.amp?"&":"";if(!param)return qs;var uri_comp=opt.space_plus===undefined||opt.space_plus?E.uri_comp:encodeURIComponent;var uri_comp_val=opt.bin?E.encodeURIComponent_bin:uri_comp;for(var i in param){var val=param[i];if(val===undefined)continue;var key=uri_comp(i);qs+=sep;if(val===null)qs+=key;else if(Array.isArray(val)){if(!val.length)continue;qs+=val.map((function(val){return key+"="+uri_comp_val(val)})).join("&")}else qs+=key+"="+uri_comp_val(val);sep="&"}return qs};E.uri=function(uri,qs,hash){var opt;if(typeof uri=="string")opt={uri,_qs:qs,hash};else{opt=Object.assign({},uri);opt._qs=opt.qs;opt.qs=undefined}uri=opt.uri;qs=typeof opt._qs=="string"?opt._qs:E.qs(opt._qs,opt);hash=typeof opt.hash=="string"?opt.hash:E.qs(opt.hash,opt);if(qs){if(!uri.includes("?"))uri+="?";else if(uri[uri.length-1]!="?"&&uri[uri.length-1]!="&")uri+="&"}else qs="";if(hash)hash="#"+hash;else hash="";return uri+qs+hash};E.mailto_url=function(mail){return"mailto:"+(mail.to||"")+"?"+E.qs({cc:mail.cc,bcc:mail.bcc,subject:mail.subject,body:mail.body},{space_plus:false})};E.hide_email=function(mail){var sep=mail.includes("@")?"@":"%40";var parts=mail.split(sep);var name=parts[0]||"",domain=parts[1]||"";var h_name=name.length>3?name[0]+name[1]+"*"+name[name.length-1]:"*";var h_domain=domain[0]+"*"+domain.slice(domain.lastIndexOf("."));return h_name+sep+h_domain};E.parse={};E.parse.eat_token=function(s_obj,re){var match;if(!(match=re.exec(s_obj.s)))return match;s_obj.s=s_obj.s.substr(match.index+match[0].length);return match};E.parse.http_words=function(val){var res=[],o={s:val},eat_token=E.parse.eat_token,match;while(o.s){if(match=eat_token(o,/^\s*(=*[^\s=;,]+)/)){var v=match[1];if(match=eat_token(o,/^\s*=\s*\"([^\"\\]*(?:\\.[^\"\\]*)*)\"/))res.push([v,match[1].replace(/\\(.)/,"$1")]);else if(match=eat_token(o,/^\s*=\s*([^;,\s]*)/))res.push([v,match[1].replace(/\s+$/,"")]);else res.push([v,null])}else if(match=eat_token(o,/^\s*,/));else if((match=eat_token(o,/^\s*;/))||(match=eat_token(o,/^\s+/)));else throw new Error("This should not happen: "+o.s)}return res};return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},6386:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON ISC
"use strict";(function(){var process,zerr,assert;var is_node=typeof module=="object"&&module.exports&&module.children&&typeof __webpack_require__!="function";if(!is_node){process={nextTick:function(fn){setTimeout(fn,0)},env:{}};if(self.hola&&self.hola.zerr)zerr=self.hola.zerr;else{zerr=function(){console.log.apply(console,arguments)};zerr.perr=zerr;zerr.debug=function(){};zerr.is=function(){return false};zerr.L={DEBUG:0}}if(!zerr.is)zerr.is=function(){return false}}else{require("./config.js");process=global.process||require("_process");zerr=require("./zerr.js");assert=require("assert")}if(typeof assert!="function")assert=function(){};!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8425),__webpack_require__(6545),__webpack_require__(1291)],__WEBPACK_AMD_DEFINE_RESULT__=function(events,array,zutil){var E=Etask;var GEN_FN="GeneratorFunction";var env=process.env,assign=Object.assign;E.use_bt=+env.ETASK_BT;E.root=new Set;E.assert_extra=+env.ETASK_ASSERT_EXTRA;E.nextTick=process.nextTick;E.set_zerr=function(_zerr){zerr=_zerr};E.events=new events;var cb_pre,cb_post,cb_ctx,longcb_ms,perf_enable;E.perf_stat={};function _cb_pre(et){return{start:Date.now()}}function _cb_post(et,ctx){ctx=ctx||cb_ctx;var ms=Date.now()-ctx.start;if(longcb_ms&&ms>longcb_ms){zerr("long cb "+ms+"ms: "+et.get_name()+", "+et.funcs[et.cur_state].toString().slice(0,128))}if(perf_enable){var name=et.get_name();var perf=E.perf_stat[name]||(E.perf_stat[name]={ms:0,n:0,max:0});if(perf.max<ms)perf.max=ms;perf.ms+=ms;perf.n++}}function cb_set(){if(longcb_ms||perf_enable){cb_pre=_cb_pre;cb_post=_cb_post;cb_ctx={start:Date.now()}}else cb_pre=cb_post=cb_ctx=undefined}E.longcb=function(ms){longcb_ms=ms;cb_set()};E.perf=function(enable){if(arguments.length){perf_enable=enable;cb_set()}return perf_enable};E.longcb(+env.LONGCB);E.perf(+env.ETASK_PERF);function stack_get(){var prev=Error.stackTraceLimit,err;Error.stackTraceLimit=4;err=new Error;Error.stackTraceLimit=prev;return err}function Etask(opt,states){if(!(this instanceof Etask)){if(Array.isArray(opt)||typeof opt=="function"){states=opt;opt=undefined}opt=typeof opt=="string"&&{name:opt}||opt||{};if(typeof states=="function"&&states.constructor.name==GEN_FN)return E._generator(null,states,opt);return new Etask(opt,typeof states=="function"?[states]:states)}assert(Array.isArray(states),"states must be an array");events.EventEmitter.call(this);this.name=opt.name;this.cancelable=opt.cancel;this.then_waiting=new Set;this.child=new Set;this.child_guess=new Set;this.cur_state=-1;this.next_state=-1;this.state0_args=opt.state0_args;this.states_idx={};this.tm_create=Date.now();this.use_retval=false;this.at_return=false;this.free=false;this._stack=Etask.use_bt?stack_get():undefined;this._finally=-1;this._cancel=-1;if(opt.zexit_on_err!=null)this.info.zexit_on_err=opt.zexit_on_err;if(opt.skip_err_metrics!=null)this.info.skip_err_metrics=opt.skip_err_metrics;this.error=this.running=this.at_continue=this.wait_timer=this.retval=this.down=this.up=this.parent=this._alarm=this.tm_completed=this.parent_type=this.parent_guess=this.wait_retval=this.generator=this.generator_ctor=undefined;this.funcs=states;this.states=[];for(var i=0;i<states.length;++i){var func=states[i];assert(typeof func=="function","invalid state type");var type=this._get_state_type(func.name,undefined);if(type.label)this.states_idx[type.label]=i;if(type.finally){assert(this._finally==-1,"more than 1 finally$");this._finally=i}if(type.cancel){assert(this._cancel==-1,"more than 1 cancel$");this._cancel=i}this.states.push(type)}E.root.add(this);var in_run;if(opt.spawn_parent)this.spawn_parent(opt.spawn_parent);else if(opt.up)opt.up._set_down(this);else if(in_run=E.in_run_top())this._spawn_parent_guess(in_run);if(opt.init)opt.init.call(this);if(opt.async){var _this=this;var wait_retval=this._set_wait_retval();E.nextTick((function(){if(_this.running===undefined)_this._got_retval(wait_retval)}))}else if(this._next())this._run();return this}zutil.inherits(Etask,events.EventEmitter);Object.defineProperty(E.prototype,"info",{get:function(){if(!this._info)this._info={};return this._info},set:function(v){this._info=v}});E.prototype._root_remove=function(){assert(!this.parent,"cannot remove from root when has parent");if(!E.root.delete(this))assert(0,"etask not in root\n"+E.ps({MARK:this}))};E.prototype._parent_remove=function(){if(this.up){var up=this.up;this.up=this.up.down=undefined;if(up.tm_completed)up._check_free();return}if(this.parent_guess)this._parent_guess_remove();if(!this.parent)return this._root_remove();if(!this.parent.child.delete(this)){assert(0,"etask child not in parent\n"+E.ps({MARK:[["child",this],["parent",this.parent]]}))}if(this.parent.tm_completed)this.parent._check_free();this.parent=undefined};E.prototype._check_free=function(){if(this.down||this.child.size)return;this._parent_remove();this.free=true};E.prototype._call_err=function(e){E.ef(e,this)};E.prototype.emit_safe=function(){try{this.emit.apply(this,arguments)}catch(e){this._call_err(e)}};E.prototype._call_safe=function(state_fn){try{return state_fn.call(this)}catch(e){this._call_err(e)}};E.prototype._complete=function(){if(zerr.is(zerr.L.DEBUG))zerr.debug(this.shortname()+": close");this.tm_completed=Date.now();this.parent_type=this.up?"call":"spawn";if(this.error)this.emit_safe("uncaught",this.error);if(this._finally!==-1){var ret=this._call_safe(this.funcs[this._finally]);if(E.is_err(ret))this._set_retval(ret)}this.emit_safe("finally");this.emit_safe("ensure");if(this.error&&!this.up&&!this.parent&&!this.parent_guess)E.events.emit("uncaught",this);if(this.parent)this.parent.emit("child",this);if(this.up&&(this.down||this.child.size)){var up=this.up;this.up=this.up.down=undefined;this.parent=up;up.child.add(this)}this._check_free();this._del_wait_timer();this.del_alarm();this._ecancel_child();this.emit_safe("finally1");for(let v of this.then_waiting.values()){this.then_waiting.delete(v);v()}};E.prototype._next=function(rv){if(this.tm_completed)return false;var states=this.states;var state=this.at_return?states.length:this.next_state!=-1?this.next_state:this.cur_state+1;this.retval=rv&&rv.ret;this.error=rv&&rv.err;if(this.error!==undefined){if(zerr.on_exception)zerr.on_exception(this.error,this);if(this.cur_state>-1&&states[this.cur_state].try_catch){this.use_retval=true;for(;state<states.length&&states[state].sig;state++);}else for(;state<states.length&&!states[state].catch;state++);}else for(;state<states.length&&states[state].aux;state++);this.cur_state=state;this.next_state=-1;if(this.cur_state<states.length)return true;this._complete();return false};E.prototype._handle_rv=function(rv){var wait_retval,_this=this,ret=rv.ret;if(ret===this.retval);else if(!ret);else if(ret instanceof Etask){if(!ret.tm_completed){this._set_down(ret);wait_retval=this._set_wait_retval();ret.then_waiting.add((function(){_this._got_retval(wait_retval,E.err_res(ret.error,ret.retval))}));return true}rv.err=ret.error;rv.ret=ret.retval}else if(ret instanceof Etask_err){rv.err=ret.error;rv.ret=undefined}else if(typeof ret=="object"){if(typeof ret.then=="function"){wait_retval=this._set_wait_retval();ret.then((function(_ret){_this._got_retval(wait_retval,_ret)}),(function(err){_this._got_retval(wait_retval,E.err(err))}));return true}else if(typeof ret.next=="function"&&typeof ret.throw=="function"){rv.ret=E._generator(ret,this.funcs[this.cur_state],{});return this._handle_rv(rv)}}return false};E.prototype._set_retval=function(ret){if(ret===this.retval&&!this.error);else if(!ret){this.retval=ret;this.error=undefined}else if(ret instanceof Etask){if(ret.tm_completed){this.retval=ret.retval;this.error=ret.error}}else if(ret instanceof Etask_err){this.retval=undefined;this.error=ret.error}else if(typeof ret.then=="function");else if(typeof ret.next=="function"&&typeof ret.throw=="function");else{this.retval=ret;this.error=undefined}return ret};E.prototype._set_wait_retval=function(){return this.wait_retval=new Etask_wait(this,"wait_int")};E.in_run=[];E.in_run_top=function(){return E.in_run[E.in_run.length-1]};E.prototype._run=function(){var rv={ret:undefined,err:undefined};var _cb_ctx;while(1){this.running=true;rv.ret=rv.err=undefined;E.in_run.push(this);if(zerr.is(zerr.L.DEBUG))zerr.debug(this.shortname()+":S"+this.cur_state+": running");if(cb_pre)_cb_ctx=cb_pre(this);try{rv.ret=this.state0_args&&this.cur_state==0?this.funcs[this.cur_state].apply(this,this.state0_args):this.funcs[this.cur_state].call(this,this.error&&!this.use_retval?this.error:this.retval)}catch(e){rv.err=e;if(rv.err instanceof Error)rv.err.etask=this}this.use_retval=false;if(cb_post)cb_post(this,_cb_ctx);this.running=false;E.in_run.pop();for(let vv of this.child_guess.values()){this.child_guess.delete(vv);vv.parent_guess=undefined}if(rv.ret instanceof Etask_wait){var wait_completed=false,wait=rv.ret;if(!this.at_continue&&!wait.ready){this.wait_retval=wait;if(wait.op=="wait_child")wait_completed=this._set_wait_child(wait);if(wait.timeout)this._set_wait_timer(wait.timeout);if(!wait_completed)return;this.wait_retval=undefined}rv.ret=this.at_continue?this.at_continue.ret:wait.ready&&!wait.completed?wait.ready.ret:undefined;wait.completed=true}this.at_continue=undefined;if(this._handle_rv(rv))return;if(!this._next(rv))return}};E.prototype._set_down=function(down){if(this.down)assert(0,"caller already has a down\n"+this.ps());if(down.parent_guess)down._parent_guess_remove();assert(!down.parent,"returned etask already has a spawn parent");assert(!down.up,"returned etask already has a caller parent, consider using wait_ext");down._parent_remove();this.down=down;down.up=this};var state_type_cache={};E.prototype._get_state_type=function(name,on_fail){var type=state_type_cache[name];if(type)return type;type=state_type_cache[name]=new Etask_state_type;if(!name)return type;type.name=name;var n=name.split("$");if(n.length==1){type.label=n[0];return type}if(n.length>2)return type;if(n[1].length)type.label=n[1];var f=n[0].split("_");for(var j=0;j<f.length;j++){if(f[j]=="try"){type.try_catch=true;if(j+1<f.length&&f[j+1]=="catch")j++}else if(f[j]=="catch")type["catch"]=true;else if(f[j]=="finally"||f[j]=="ensure")type.finally=true;else if(f[j]=="cancel")type.cancel=true;else{return void(on_fail||assert.bind(null,false))("unknown func name "+name)}}if(+(type.catch||type.try_catch)+ +type.finally+ +type.cancel>1){return void(on_fail||assert.bind(null,false))("invalid multiple state types")}type.sig=type.finally||type.cancel;type.aux=type.sig||type.catch;return type};class Etask_state_type{constructor(){this.name=undefined;this.label=undefined;this.try_catch=false;this.catch=false;this.finally=false;this.cancel=false;this.sig=false;this.aux=false}}E.prototype.spawn=function(child,replace){if(!(child instanceof Etask)&&child&&typeof child.then=="function"){var promise=child;child=new Etask({},[function(){return promise}])}if(!(child instanceof Etask)){this.emit("child",child);return child}if(!replace&&child.parent)assert(0,"child already has a parent\n"+child.parent.ps());child.spawn_parent(this);return child};E.prototype._spawn_parent_guess=function(parent){this.parent_guess=parent;parent.child_guess.add(this)};E.prototype._parent_guess_remove=function(){if(!this.parent_guess.child_guess.delete(this)){assert(0,"etask not in parent_guess\n"+this.ps({MARK:this})+"\n"+E.ps({MARK:this}))}this.parent_guess=undefined};E.prototype.spawn_parent=function(parent){if(this.up)assert(0,"child already has an up\n"+this.up.ps());if(this.tm_completed&&!this.parent)return;this._parent_remove();if(parent&&parent.free)parent=undefined;if(!parent)return void E.root.add(this);parent.child.add(this);this.parent=parent};E.prototype.set_state=function(name){var state=this.states_idx[name];assert(state!==undefined,'named func "'+name+'" not found');return this.next_state=state};E.prototype.finally=function(cb){if(this.tm_completed)process.nextTick(cb);else this.prependListener("finally",cb)};E.prototype.goto_fn=function(name){return this.goto.bind(this,name)};E.prototype.goto=function(name,promise){this.set_state(name);assert(!this.states[this.next_state].sig,"goto to sig");return this.continue(promise)};E.prototype.loop=function(promise){this.next_state=this.cur_state;return promise};E.prototype._set_wait_timer=function(timeout){var _this=this;this.wait_timer=setTimeout((function(){_this.wait_timer=undefined;if(_this._next({ret:undefined,err:"timeout"}))_this._run()}),timeout)};E.prototype._del_wait_timer=function(){if(this.wait_timer)this.wait_timer=clearTimeout(this.wait_timer);this.wait_retval=undefined};E.prototype._get_child_running=function(){for(let v of this.child.values()){if(!v.tm_completed)return v}};E.prototype._set_wait_child=function(wait_retval){var _this=this,child=wait_retval.child;var cond=wait_retval.cond,wait_on;var rethrow=wait_retval.rethrow;assert(!cond||child=="any",'condition supported only for "any" '+"option, you can add support if needed");if(child=="any"){if(!this._get_child_running())return true;wait_on=function(){_this.once("child",(function(_child){if(rethrow&&E.is_err(_child))return this._got_retval(wait_retval,_child);if(!cond||cond.call(_child,_child.retval))return _this._got_retval(wait_retval,{child:_child});if(!_this._get_child_running())return _this._got_retval(wait_retval);wait_on()}))};wait_on()}else if(child=="all"){if(!this._get_child_running())return true;wait_on=function(){_this.once("child",(function(_child){if(rethrow&&E.is_err(_child))return _this._got_retval(wait_retval,_child);if(!_this._get_child_running())return _this._got_retval(wait_retval);wait_on()}))};wait_on()}else{assert(child,"no child provided");assert(this===child.parent,"child does not belong to parent");if(child.tm_completed)return true;child.once("finally",(function(){return _this._got_retval(wait_retval,{child})}))}this.emit_safe("wait_on_child");return false};E.prototype._got_retval=function(wait_retval,res){if(this.wait_retval!==wait_retval||wait_retval.completed)return;wait_retval.completed=true;if(this._next(E._res2rv(res)))this._run()};E.prototype.continue_fn=function(){return this.continue.bind(this)};E.continue_depth=0;E.prototype.continue=function(promise,sync){this.wait_retval=undefined;this._set_retval(promise);if(this.tm_completed)return promise;if(this.down)this.down._ecancel();this._del_wait_timer();var rv={ret:promise,err:undefined};if(this.running){this.at_continue=rv;return promise}if(this._handle_rv(rv))return rv.ret;var _this=this;if(E.is_final(promise)&&(!E.continue_depth&&!E.in_run.length||sync)){E.continue_depth++;if(this._next(rv))this._run();E.continue_depth--}else{E.nextTick((function(){if(_this._next(rv))_this._run()}))}return promise};E.prototype._ecancel=function(){if(this.tm_completed)return this;this.emit_safe("cancel");if(this._cancel!=-1)return this._call_safe(this.funcs[this._cancel]);if(this.cancelable)return this.return()};E.prototype._ecancel_child=function(){if(!this.child.size)return;var children=Array.from(this.child.values());for(var child of children)child._ecancel()};E.prototype.return_fn=function(){return this.return.bind(this)};E.prototype.return=function(promise){if(this.tm_completed)return this._set_retval(promise);this.at_return=true;this.next_state=-1;return this.continue(promise,true)};E.prototype.del_alarm=function(){var a=this._alarm;if(!a)return;clearTimeout(a.id);if(a.cb)this.removeListener("sig_alarm",a.cb);this._alarm=undefined};E.prototype.upd_alarm=function(ms){var a=this._alarm;if(!a)return;var cb=a.cb;this.alarm(ms,cb)};E.prototype.inc_alarm=function(ms){var a=this._alarm;if(!a)return;var cb=a.cb;var left=this.alarm_left();this.alarm(ms+left,cb)};E.prototype.alarm_left=function(){var a=this._alarm;if(!a)return 0;return a.start+a.ms-Date.now()};E.prototype.alarm_elapsed=function(){var a=this._alarm;if(!a)return 0;return Date.now()-a.start};E.prototype._operation_opt=function(opt){if(opt.goto)return{ret:this.goto(opt.goto,opt.ret)};if(opt.throw)return{ret:this.throw(opt.throw)};if(opt.return!==undefined)return{ret:this.return(opt.return)};if(opt.continue!==undefined)return{ret:this.continue(opt.continue)}};E.prototype.alarm=function(ms,cb){var _this=this,opt,a;if(cb&&typeof cb!="function"){opt=cb;cb=function(){var v;if(!(v=_this._operation_opt(opt)))assert(0,"invalid alarm cb opt");return v.ret}}this.del_alarm();a=this._alarm={ms,cb,start:Date.now()};a.id=setTimeout((function(){_this._alarm=undefined;_this.emit("sig_alarm")}),a.ms);if(cb)this.once("sig_alarm",cb)};function Etask_wait(et,op,timeout,child,cond,rethrow){this.timeout=timeout;this.et=et;this.op=op;this.child=child;this.cond=cond;this.rethrow=rethrow;this.ready=undefined;this.completed=false}Etask_wait.prototype.continue=function(res){if(this.completed)return;if(!this.et.wait_retval)return void(this.ready={ret:res});if(this!==this.et.wait_retval)return;this.et.continue(res)};Etask_wait.prototype.continue_fn=function(){return this.continue.bind(this)};Etask_wait.prototype.throw=function(err){return this.continue(E.err(err))};Etask_wait.prototype.throw_fn=function(){return this.throw.bind(this)};E.prototype.wait=function(timeout){return new Etask_wait(this,"wait",timeout)};E.prototype.wait_child=function(child,timeout,cond,opt){if(typeof timeout=="function"){cond=timeout;opt=cond;timeout=0}else if(typeof timeout=="object"){cond=undefined;opt=timeout;timeout=0}return new Etask_wait(this,"wait_child",timeout,child,cond,opt&&opt.rethrow)};E.prototype.throw_fn=function(err){return err?this.throw.bind(this,err):this.throw.bind(this)};E.prototype.throw=function(err){return this.continue(E.err(err))};E.prototype.get_name=function(flags){var stack=this._stack instanceof Error?this._stack.stack.split("\n"):undefined;var caller;flags=flags||{};if(stack){caller=/^ {4}at (.*)$/.exec(stack[4]);caller=caller?caller[1]:undefined}var names=[];if(this.name)names.push(this.name);if(caller&&!(this.name&&flags.SHORT_NAME))names.push(caller);if(!names.length)names.push("noname");return names.join(" ")};E.prototype.state_str=function(){return this.cur_state+(this.next_state>=0?"->"+this.next_state:"")};E.prototype.get_depth=function(){var i=0,et=this;for(;et;et=et.up,i++);return i};function trim_space(s){if(s[s.length-1]!=" ")return s;return s.slice(0,-1)}function ms_to_str(ms){var s=""+ms;return s.length<=3?s+"ms":s.slice(0,-3)+"."+s.slice(-3)+"s"}E.prototype.get_time_passed=function(){return ms_to_str(Date.now()-this.tm_create)};E.prototype.get_time_completed=function(){return ms_to_str(Date.now()-this.tm_completed)};E.prototype.get_info=function(){var info=this.info,s="",_i;if(!info)return"";for(var i in info){_i=info[i];if(!_i)continue;if(s!=="")s+=" ";if(typeof _i=="function")s+=_i();else s+=_i}return trim_space(s)};function Etask_err(err){this.error=err||new Error}E.Etask_err=Etask_err;E.err=function(err){return new Etask_err(err)};E.is_err=function(v){return v instanceof Etask&&v.error!==undefined||v instanceof Etask_err};E.err_res=function(err,res){return err?E.err(err):res};E._res2rv=function(res){return E.is_err(res)?{ret:undefined,err:res.error}:{ret:res,err:undefined}};E.is_final=function(v){return!v||typeof v.then!="function"||v instanceof Etask_err||v instanceof Etask&&!!v.tm_completed};E.prototype.then=function(on_res,on_err){var _this=this;function on_done(){if(!_this.error)return!on_res?_this.retval:on_res(_this.retval);return!on_err?E.err(_this.error):on_err(_this.error)}if(this.tm_completed){return new Etask({name:"then_completed"},[function(){return on_done()}])}var then_wait=new Etask({name:"then_wait"},[function(){return this.wait()}]);this.then_waiting.add((function(){try{then_wait.continue(on_done())}catch(e){then_wait.throw(e)}}));return then_wait};E.prototype.otherwise=E.prototype.catch=function(on_err){return this.then(null,on_err)};E.prototype.ensure=function(on_ensure){return this.then((function(res){on_ensure();return res}),(function(err){on_ensure();throw err}))};Etask_err.prototype.then=function(on_res,on_err){var _this=this;return new Etask({name:"then_err"},[function(){return!on_err?E.err(_this.error):on_err(_this.error)}])};Etask_err.prototype.otherwise=Etask_err.prototype.catch=function(on_err){return this.then(null,on_err)};Etask_err.prototype.ensure=function(on_ensure){this.then(null,(function(){on_ensure()}));return this};E.resolve=function(v){return new Etask({},[function(){return v}])};E.reject=function(e){return new Etask({},[function(){throw e}])};E.prototype.wait_ext=function(promise){if(!promise||typeof promise.then!="function")return promise;var wait=this.wait();promise.then(wait.continue_fn(),wait.throw_fn());return wait};E.prototype.shortname=function(){return this.name===undefined?"noname":this.name};E.prototype.longname=function(flags){flags=flags||{TIME:1};var s="",_s;if(this.running)s+="RUNNING ";s+=this.get_name(flags)+(!this.tm_completed?"."+this.state_str():"")+" ";if(this.tm_completed)s+="COMPLETED"+(flags.TIME?" "+this.get_time_completed():"")+" ";if(flags.TIME)s+=this.get_time_passed()+" ";if(_s=this.get_info())s+=_s+" ";return trim_space(s)};E.prototype.stack=function(flags){var et=this,s="";flags=assign({STACK:1,RECURSIVE:1,GUESS:1},flags);while(et){var _s=et.longname(flags)+"\n";if(et.up)et=et.up;else if(et.parent){_s=(et.parent_type=="call"?"CALL":"SPAWN")+" "+_s;et=et.parent}else if(et.parent_guess&&flags.GUESS){_s="SPAWN? "+_s;et=et.parent_guess}else et=undefined;if(flags.TOPDOWN)s=_s+s;else s+=_s}return s};E.prototype._ps=function(pre_first,pre_next,flags){var i,s="",task_trail,et=this,child_guess;if(++flags.limit_n>=flags.LIMIT)return flags.limit_n==flags.LIMIT?"\nLIMIT "+flags.LIMIT+"\n":"";for(;et.up;et=et.up);for(var first=1;et;et=et.down,first=0){s+=first?pre_first:pre_next;first=0;if(flags.MARK&&(i=flags.MARK.sp.indexOf(et))>=0)s+=(flags.MARK.name[i]||"***")+" ";s+=et.longname(flags)+"\n";if(flags.RECURSIVE){var stack_trail=et.down?".":" ";var child=et.child;if(flags.GUESS)child=new Set([...child,...et.child_guess]);i=0;for(let child_i of child.values()){task_trail=i<child.size-1?"|":stack_trail;child_guess=child_i.parent_guess?"\\? ":child_i.parent_type=="call"?"\\> ":"\\_ ";s+=child_i._ps(pre_next+task_trail+child_guess,pre_next+task_trail+"   ",flags);i++}}}return s};function ps_flags(flags){var m,_m;if(m=flags.MARK){if(!Array.isArray(m))_m={sp:[m],name:[]};else if(!Array.isArray(flags.MARK[0]))_m={sp:m,name:[]};else{_m={sp:[],name:[]};for(var i=0;i<m.length;i++){_m.name.push(m[i][0]);_m.sp.push(m[i][1])}}flags.MARK=_m}}E.prototype.ps=function(flags){flags=assign({STACK:1,RECURSIVE:1,LIMIT:1e7,TIME:1,GUESS:1},flags,{limit_n:0});ps_flags(flags);return this._ps("","",flags)};E._longname_root=function(){return(zerr.prefix?zerr.prefix+"pid "+process.pid+" ":"")+"root"};E.ps=function(flags){var s="",task_trail;flags=assign({STACK:1,RECURSIVE:1,LIMIT:1e7,TIME:1,GUESS:1},flags,{limit_n:0});ps_flags(flags);s+=E._longname_root()+"\n";var child=Array.from(E.root.values());if(flags.GUESS){child=[];E.root.forEach((root_i=>{if(!root_i.parent_guess)child.push(root_i)}))}child.forEach(((child_i,i)=>{task_trail=i<child.length-1?"|":" ";s+=child_i._ps(task_trail+"\\_ ",task_trail+"   ",flags)}));return s};function assert_tree_unique(a){var i;for(i=0;i<a.length-1;i++)assert(!a.includes(a[i],i+1))}E.prototype._assert_tree=function(opt){var et;opt=opt||{};assert_tree_unique(this.child);assert(this.parent);if(this.down){et=this.down;assert(et.up===this);assert(!et.parent);assert(!et.parent_guess);this.down._assert_tree(opt)}for(let _et of this.child.values()){assert(_et.parent===this);assert(!_et.parent_guess);assert(!_et.up);_et._assert_tree(opt)}if(this.child_guess.size)assert(E.in_run.includes(this));for(let _et of this.child_guess.values()){assert(_et.parent_guess===this);assert(!_et.parent);assert(!_et.up)}};E._assert_tree=function(opt){opt=opt||{};assert_tree_unique(E.root);for(let et of this.child.values()){assert(!et.parent);assert(!et.up);et._assert_tree(opt)}};E.prototype._assert_parent=function(){if(this.up)return assert(!this.parent&&!this.parent_guess);assert(this.parent&&this.parent_guess,"parent_guess together with parent");if(this.parent){var child=this.parent?this.parent.child:E.root;assert(child.has(this),"cannot find in parent "+(this.parent?"":"root"))}else if(this.parent_guess){assert(this.parent_guess.child_guess.has(this),"cannot find in parent_guess");assert(E.in_run.includes(this.parent_guess))}};E.prototype.return_child=function(){var child=Array.from(this.child.values());for(var i=0;i<child.length;i++)child[i].return()};E.sleep=function(ms){var timer;ms=ms||0;return new Etask({name:"sleep",cancel:true},[function(){this.info.ms=ms+"ms";timer=setTimeout(this.continue_fn(),ms);return this.wait()},function finally$(){clearTimeout(timer)}])};var ebreak_obj={ebreak:1};E.prototype.break=function(ret){return this.throw({ebreak:ebreak_obj,ret})};E.for=function(cond,inc,opt,states){if(Array.isArray(opt)||typeof opt=="function"){states=opt;opt=undefined}states=typeof states=="function"?[states]:states;return new Etask({name:"for",cancel:true,init:opt&&opt.init_parent},[function loop(){return!cond||cond.call(this)},function try_catch$(res){if(!res)return this.return();return new Etask({name:"for_iter",cancel:true,init:opt&&opt.init},states||[])},function(){if(this.error){if(this.error.ebreak===ebreak_obj)return this.return(this.error.ret);return this.throw(this.error)}return inc&&inc.call(this)},function(){return this.goto("loop")}])};E.for_each=function(obj,states){var keys=Object.keys(obj);var iter={obj,keys,i:0,key:undefined,val:undefined};function init_iter(){this.iter=iter}return E.for((function(){this.iter=this.iter||iter;iter.key=keys[iter.i];iter.val=obj[keys[iter.i]];return iter.i<keys.length}),(function(){return iter.i++}),{init:init_iter,init_parent:init_iter},states)};E.while=function(cond,states){return E.for(cond,null,states)};E.all=function(a_or_o,ao2){var i,j,opt={};if(ao2){opt=a_or_o;a_or_o=ao2}if(Array.isArray(a_or_o)){var a=Array.from(a_or_o);i=0;return new Etask({name:"all_a",cancel:true},[function(){for(j=0;j<a.length;j++)this.spawn(a[j])},function try_catch$loop(){if(i>=a.length)return this.return(a);this.info.at="at "+i+"/"+a.length;var _a=a[i];if(_a instanceof Etask)_a.spawn_parent();return _a},function(res){if(this.error){if(!opt.allow_fail)return this.throw(this.error);res=E.err(this.error)}a[i]=res;i++;return this.goto("loop")}])}else if(a_or_o instanceof Object){var keys=Object.keys(a_or_o),o={};i=0;return new Etask({name:"all_o",cancel:true},[function(){for(j=0;j<keys.length;j++)this.spawn(a_or_o[keys[j]])},function try_catch$loop(){if(i>=keys.length)return this.return(o);var _i=keys[i],_a=a_or_o[_i];this.info.at="at "+_i+" "+i+"/"+keys.length;if(_a instanceof Etask)_a.spawn_parent();return _a},function(res){if(this.error){if(!opt.allow_fail)return this.throw(this.error);res=E.err(this.error)}o[keys[i]]=res;i++;return this.goto("loop")}])}assert(0,"invalid type")};E.all_limit=function(limit,arr_iter,cb){var at=0;var iter=!Array.isArray(arr_iter)?arr_iter:function(){if(at<arr_iter.length)return cb.call(this,arr_iter[at],at++)};return new Etask({name:"all_limit",cancel:true},[function(){var next;if(!(next=iter.call(this)))return this.goto("done");if(E.is_err(next))return this.throw(next.error);var _this=this;if(typeof next.catch=="function")next.catch((function(e){_this.throw(e)}));this.spawn(next);this.loop();if(this.child.size>=limit)return this.wait_child("any",{rethrow:true})},function done(){return this.wait_child("all",{rethrow:true})}])};E._apply=function(opt,func,_this,args){var func_name;if(typeof _this=="string"){assert(_this[0]==".","invalid method "+_this);var method=_this.slice(1),_class=func;func=_class[method];_this=_class;assert(_this instanceof Object,"invalid method ."+method);func_name=method}else if(Array.isArray(_this)&&!args){args=_this;_this=null}opt.name=opt.name||func_name||func.name;return new Etask(opt,[function(){var et=this,ret_sync,returned=0;args=Array.from(args);args.push((function cb(err,res){if(typeof opt.ret_sync=="string"&&!returned){var a=arguments;returned++;return void E.nextTick((function(){cb.apply(null,a)}))}var nfn=opt.nfn===undefined||opt.nfn?1:0;if(opt.ret_o){var o={},i;if(Array.isArray(opt.ret_o)){for(i=0;i<opt.ret_o.length;i++)o[opt.ret_o[i]]=arguments[i+nfn]}else if(typeof opt.ret_o=="string")o[opt.ret_o]=array.slice(arguments,nfn);else assert(0,"invalid opt.ret_o");if(typeof opt.ret_sync=="string")o[opt.ret_sync]=ret_sync;res=o}else if(opt.ret_a)res=array.slice(arguments,nfn);else if(!nfn)res=err;et.continue(nfn?E.err_res(err,res):res)}));ret_sync=func.apply(_this,args);if(Array.isArray(opt.ret_sync))opt.ret_sync[0][opt.ret_sync[1]]=ret_sync;returned++;return this.wait()}])};E.nfn_apply=function(opt,func,_this,args){var _opt={nfn:1,cancel:1};if(typeof opt=="function"||typeof func=="string"){args=_this;_this=func;func=opt;opt=_opt}else opt=assign(_opt,opt);return E._apply(opt,func,_this,args)};E.cb_apply=function(opt,func,_this,args){var _opt={nfn:0};if(typeof opt=="function"||typeof func=="string"){args=_this;_this=func;func=opt;opt=_opt}else opt=assign(_opt,opt);return E._apply(opt,func,_this,args)};E.prototype.continue_nfn=function(){return function(err,res){this.continue(E.err_res(err,res))}.bind(this)};E.augment=function(_prototype,method,e_method){var i,opt={};if(method instanceof Object&&!Array.isArray(method)){assign(opt,method);method=arguments[2];e_method=arguments[3]}if(Array.isArray(method)){if(e_method)opt.prefix=e_method;for(i=0;i<method.length;i++)E.augment(_prototype,opt,method[i]);return}opt.prefix=opt.prefix||"e_";if(!e_method)e_method=opt.prefix+method;var fn=_prototype[method];_prototype[e_method]=function(){return E._apply({name:e_method,nfn:1},fn,this,arguments)}};E.wait=function(timeout){return new Etask({name:"wait",cancel:true},[function(){return this.wait(timeout)}])};E.to_nfn=function(promise,cb,opt){return new Etask({name:"to_nfn",async:true},[function try_catch$(){return promise},function(res){var ret=[this.error];if(opt&&opt.ret_a)ret=ret.concat(res);else ret.push(res);cb.apply(null,ret)}])};function etask_fn(opt,states,push_this){if(Array.isArray(opt)||typeof opt=="function"){states=opt;opt=undefined}var is_gen=typeof states=="function"&&states.constructor.name==GEN_FN;var arg_start=+push_this;var wrap=function(){var _opt=assign({},opt);_opt.state0_args=new Array(arg_start+arguments.length);if(push_this)_opt.state0_args[0]=this;for(var i=0;i<arguments.length;i++)_opt.state0_args[arg_start+i]=arguments[i];if(is_gen)return E._generator(null,states,_opt);return new Etask(_opt,typeof states=="function"?[states]:states)};if(states.name){Object.defineProperty(wrap,"name",{value:states.name,writable:false})}return wrap}E.fn=function(opt,states){return etask_fn(opt,states,false)};E._fn=function(opt,states){return etask_fn(opt,states,true)};E._generator=function(gen,ctor,opt){opt=opt||{};opt.name=opt.name||ctor&&ctor.name||"generator";opt.cancel=opt.cancel===undefined?true:opt.cancel;var done=false;return new Etask(opt,[function(){this.generator=gen=gen||ctor.apply(this,arguments);this.generator_ctor=ctor;return{ret:undefined,err:undefined}},function try_catch$loop(rv){var res;try{res=rv.err?gen.throw(rv.err):gen.next(rv.ret)}catch(e){return this.return(E.err(e))}if(res.done){done=true;return this.return(res.value)}return res.value},function(ret){return this.goto("loop",this.error?{ret:undefined,err:this.error}:{ret,err:undefined})},function finally$(){if(!done&&gen&&gen.return)try{gen.return()}catch(e){}}])};E.ef=function(err,et){if(zerr.on_exception)zerr.on_exception(err,et);return err};E.interval=function(opt,states){if(typeof opt=="number")opt={ms:opt};if(!opt.mode||opt.mode=="smart")return interval_smart(opt,states);if(opt.mode=="fixed")return interval_fixed(opt,states);if(opt.mode=="spawn")return interval_spawn(opt,states);throw new Error("unexpected mode "+opt.mode)};function interval_smart(opt,states){var STATE_BEGIN=0;var STATE_OPS=1;var STATE_TIMER=2;var STATE_DONE=4;var state,w,timer,gap_timer;var init_parent=function(){w=this.wait();this.finally((()=>clearTimeout(timer)))};const set_state=(for_et,flag)=>{if((state=state|flag)!=(STATE_OPS|STATE_TIMER))return;state=state|STATE_DONE;if(flag==STATE_TIMER)return void for_et.continue();if(gap_timer&&zutil.is_timer_refresh)gap_timer.refresh();else{clearTimeout(gap_timer);gap_timer=setTimeout(for_et.continue_fn(),0)}};return E.for((function(){state=STATE_BEGIN;if(timer&&zutil.is_timer_refresh)timer.refresh();else{clearTimeout(timer);timer=setTimeout((()=>set_state(this,STATE_TIMER)),opt.ms)}return true}),(function(){set_state(this,STATE_OPS);return w}),{init_parent},states)}function interval_fixed(opt,states){var w,timer;var init_parent=function(){w=this.wait();this.finally((()=>clearTimeout(timer)))};return E.for(null,(function(){if(timer&&zutil.is_timer_refresh)timer.refresh();else{clearTimeout(timer);timer=setTimeout(this.continue_fn(),opt.ms)}return w}),{init_parent},states)}function interval_spawn(opt,states){var w,timer,stopped=false;var init=function(){w=this.wait();this.finally((()=>clearTimeout(timer)))};states=typeof states=="function"?[states]:states;return new Etask({name:"interval_spawn",cancel:true,init},[function loop(){new Etask({},[function try_catch$(){return new Etask({},states)},function(res){if(!this.error)return;if(this.error.ebreak!==ebreak_obj)return this.throw(this.error);stopped=true}])},function(){if(stopped)return this.return();if(timer&&zutil.is_timer_refresh)timer.refresh();else{clearTimeout(timer);timer=setTimeout(this.continue_fn(),opt.ms)}return w},function(){if(stopped)return this.return();return this.goto("loop")}])}E._class=function(cls){var proto=cls.prototype,keys=Object.getOwnPropertyNames(proto);for(var i=0;i<keys.length;i++){var key=keys[i];var descr=Object.getOwnPropertyDescriptor(proto,key);if(descr.get||descr.set)continue;var p=proto[key];if(typeof p=="function"&&p.constructor.name==GEN_FN)proto[key]=E._fn(p)}return cls};E.shutdown=function(){var prev;while(E.root.size){var e=E.root.values().next().value;if(e==prev){assert(e.tm_completed);zerr.zexit("etask root not removed after return - "+"fix non-cancelable child etask")}prev=e;e.return()}};E.race=function(ets){return new Etask({},[function race(){if(!Array.isArray(ets))zerr.zexit("provided argument is not an array");if(!ets.length)return;var race_et=E.wait();var _this=this;function _child_error_handler(e){race_et.throw(e)}var _race=new Etask({},[function(){return E.for_each(ets,(function(){var et=this.iter.val;_this.spawn(new Etask({},[function(){this.on("uncaught",_child_error_handler);return et},function(res){race_et.continue(res)}]))}))},function(){return race_et}]);_race.finally((function(){_this.return_child()}));return _race}])};E.any=function(opt,ets){if(!ets){ets=opt;opt={}}opt=opt||{};opt.rethrow=opt.rethrow==undefined?1:opt.rethrow;return new Etask({},[function race(){if(!Array.isArray(ets))zerr.zexit("provided argument is not an array");var length=ets.length;if(!length)return;var race_et=E.wait();var errors=[];var _this=this;function _child_error_handler(e){errors.push(e);if(errors.length!=length)return;var err=new Error("aggregation error");err.errors=errors;if(opt.rethrow)race_et.throw(err);else race_et.continue()}var _race=new Etask({},[function(){return E.for_each(ets,(function(){var et=this.iter.val;var child=_this.spawn(new Etask({},[function(){this.on("uncaught",_child_error_handler);return et},function(res){race_et.continue(res)}]));if(opt.timeout)setTimeout((()=>child.throw("timeout")),opt.timeout)}))},function(){return race_et}]);_race.finally((function(){_this.return_child()}));return _race}])};return Etask}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},8425:(module,exports)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;(function(){var is_node=typeof module=="object"&&module.exports&&module.children;if(!is_node);else;!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){function EventEmitter(){this._events={}}EventEmitter.prototype.listeners=function listeners(name){var events=this._events&&this._events[name]||[];var length=events.length,listeners=[],event;for(var i=0;i<length;event=events[++i])listeners.push(events[i].fn);return listeners};EventEmitter.prototype.emit=function emit(name,a1,a2,a3,a4,a5){if(!this._events||!this._events[name])return false;var listeners=this._events[name],length=listeners.length;var len=arguments.length,event=listeners[0],args,i;if(length===1){switch(len){case 1:event.fn.call(event.context||this);break;case 2:event.fn.call(event.context||this,a1);break;case 3:event.fn.call(event.context||this,a1,a2);break;case 4:event.fn.call(event.context||this,a1,a2,a3);break;case 5:event.fn.call(event.context||this,a1,a2,a3,a4);break;case 6:event.fn.call(event.context||this,a1,a2,a3,a4,a5);break;default:for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];event.fn.apply(event.context||this,args)}if(event.once)remove_listener.apply(this,[name,event])}else{for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];for(i=0;i<length;event=listeners[++i]){event.fn.apply(event.context||this,args);if(event.once)remove_listener.apply(this,[name,event])}}return true};function add_listener(name,fn,opt){opt=opt||{};if(!this._events)this._events={};if(!this._events[name])this._events[name]=[];var event={fn};if(opt.context)event.context=opt.context;if(opt.once)event.once=opt.once;if(opt.prepend)this._events[name].unshift(event);else this._events[name].push(event);return this}function remove_listener(name,listener){if(!this._events||!this._events[name])return this;var listeners=this._events[name],events=[];var is_fn=typeof listener=="function";for(var i=0,length=listeners.length;i<length;i++){if(!listener)continue;if(is_fn&&listeners[i].fn!==listener||!is_fn&&listeners[i]!==listener){events.push(listeners[i])}}if(events.length)this._events[name]=events;else this._events[name]=null;return this}EventEmitter.prototype.on=function on(name,fn,context){return add_listener.apply(this,[name,fn,{context}])};EventEmitter.prototype.once=function once(name,fn,context){return add_listener.apply(this,[name,fn,{context,once:true}])};EventEmitter.prototype.prependListener=function prependListener(name,fn,context){return add_listener.apply(this,[name,fn,{context,prepend:true}])};EventEmitter.prototype.prependOnceListener=function prependOnceListener(name,fn,context){return this.prependListener(name,fn,{context,prepend:true,once:true})};EventEmitter.prototype.removeListener=function removeListener(name,fn){return remove_listener.apply(this,[name,fn])};EventEmitter.prototype.removeAllListeners=function removeAllListeners(name){if(!this._events)return this;if(name)this._events[name]=null;else this._events={};return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.setMaxListeners=function setMaxListeners(){return this};EventEmitter.prototype.eventNames=function eventNames(){var _this=this;return Object.keys(this._events).filter((function(e){return _this._events[e]!==null}))};EventEmitter.EventEmitter=EventEmitter;EventEmitter.EventEmitter2=EventEmitter;EventEmitter.EventEmitter3=EventEmitter;return EventEmitter}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},1889:(module,exports)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON
"use strict";(function(){var is_node=typeof module=="object"&&module.exports&&module.children;if(!is_node);else;!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){var E={};function imul64h(a,b){var ah=a>>>16&65535;var al=a&65535;var bh=b>>>16&65535;var bl=b&65535;return ah*bh+(ah*bl+al*bh)>>16|0}E.hash_int=function(val){var xh=imul64h(val,1103515245);var xl=Math.imul(val,1103515245);return xl-xh>>>0};E.hash_string=function(s){if(!s.length)return 0;var hash=E.hash_int(s.length);for(var i=0;i<s.length;i+=2){hash=E.hash_int(hash+(s.charCodeAt(i)<<16)+(s.charCodeAt(i+1)|0)>>>0)}return hash};E.sum_parse=function(str){var parts=/([0-9a-f]+)\s+([ *]?)(.*)/i.exec(str);if(!parts)return null;return{hash:parts[1],type:parts[2]=="*"?"binary":"text",file:parts[3]}};return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},5317:(module,exports)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON ISC
"use strict";(function(){var is_node=typeof module=="object"&&module.exports&&module.children;if(!is_node);else;!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){var E=rate_limit,get_now=function(){return Date.now()};function rate_limit(rl,ms,n){var now=get_now();if(!rl.count||rl.ts+ms<now){rl.count=1;rl.ts=now;return true}rl.count++;return rl.count<=n}E.set_clock_source=function set_clock_source(src){get_now=src};E.leaky_bucket=function leaky_bucket(size,rate,opt){this.size=size;this.rate=rate;this.time=get_now();this.level=0;this.opt=opt||{}};E.leaky_bucket.prototype._update_level=function(){var now=get_now();this.level-=this.rate*(now-this.time);this.time=now;if(this.level<0)this.level=0};E.leaky_bucket.prototype.inc_would_exceed=function(inc){if(inc===undefined)inc=1;this._update_level();var new_level=this.level+inc;return new_level>this.size};E.leaky_bucket.prototype.inc=function(inc){if(inc===undefined)inc=1;this._update_level();var new_level=this.level+inc;if(new_level>this.size)return false;this.level=new_level;return true};E.leaky_bucket.prototype.inc_size=function(inc){if(inc===undefined)inc=1;var new_size=this.size+inc;if(Number.isFinite(this.opt.min_size))new_size=Math.max(new_size,this.opt.min_size);if(Number.isFinite(this.opt.max_size))new_size=Math.min(new_size,this.opt.max_size);var factor=this.size?new_size/this.size:1;this.size=new_size;this.rate*=factor};return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},4996:(module,exports)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON ISC
"use strict";(function(){var is_node=typeof module=="object"&&module.exports&&module.children;if(!is_node);else;!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){var E=sprintf;E.sprintf=sprintf;var has=Object.prototype.hasOwnProperty;function sprintf(fmt){if(has.call(E.cache,fmt))return E.cache[fmt](arguments);E.cache[fmt]=E.parse(fmt);E.cache_n++;if(E.cache_cb)E.cache_cb(fmt);return E.cache[fmt](arguments)}E.cache={};E.cache_n=0;E.to_int=function(num){return(num=+num)>=0?Math.floor(num):-Math.floor(-num)};E.thousand_grouping=function(num_s){var m=/^([-+])?(\d*)(\.\d*)?$/.exec(num_s);if(!m)return num_s;m[2]=(m[2]||"").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");return(m[1]||"")+m[2]+(m[3]||"")};E.stringify=function(value,replacer){if(is_array(replacer)){var r={},v;for(var i=0,l=replacer.length;i<l;i++){v=value_of(replacer[i]);if(typeof v=="string"||typeof v=="number")r[v]=true}replacer=r}else if(typeof replacer!="function")replacer=undefined;return _stringify("",{"":value},replacer,[])};function json_escape(str){return JSON.stringify(str)}function _stringify(key,holder,replacer,stack){var value;try{value=holder[key]}catch(e){value="__ERROR__: "+e}if(value&&typeof value=="object"&&typeof value.toJSON=="function")value=value.toJSON(key);if(typeof replacer=="function")value=replacer.call(holder,key,value);value=value_of(value);switch(typeof value){case"boolean":return value?"true":"false";case"string":return json_escape(value);case"number":return Number.isFinite(value)?json_escape(value):"null";case"object":if(value===null)return"null";if(stack.indexOf(value)>=0)return'"__CIRCULAR__"';stack.push(value);var s,a=[],p,ret;if(is_array(value)){for(var i=0,l=value.length;i<l;i++){s=_stringify(""+i,value,replacer,stack);a.push(s==null?"null":s)}ret="["+a.join(",")+"]"}else{for(p in value){if(!has.call(value,p))continue;if(typeof replacer=="object"&&!replacer[p])continue;if((s=_stringify(p,value,replacer,stack))!=null)a.push(json_escape(p)+":"+s)}ret="{"+a.join(",")+"}"}stack.pop();return ret;default:return undefined}}function value_of(v){return typeof v=="object"&&(v instanceof Number||v instanceof String||v instanceof Boolean)?v.valueOf():v}function is_array(a){return Object.prototype.toString.call(a)=="[object Array]"}function stringify(value){try{return JSON.stringify(value)}catch(e){return E.stringify(value)}}E.parse_fast=function(fmt){return E.parse_slow(fmt)};E.parse_slow=function(fmt){var _fmt=fmt,match=[],arg_names=0,cursor=1;var _f=[],out,arg,arg_s,argv,sign;function f(fn){_f.push(fn)}for(;_fmt;_fmt=_fmt.substring(match[0].length))(function(){if(match=/^[^%]+/.exec(_fmt)){var _match=match;f((function(){return out+=_match[0]}))}else if(match=/^%%/.exec(_fmt))f((function(){return out+="%"}));else if(match=/^%(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?(')?([bcdefoOsuxX])/.exec(_fmt)){var positional=match[1],keyword=match[2],sign=match[3];var pad_zero=match[4],pad_min=match[5],pad_max=match[6];var precision=match[7],thousand_grouping=match[8]=="'";var conversion=match[9],keyword_list=[],_cursor=cursor;if(keyword){arg_names|=1;var _keyword=keyword,kmatch;if(!(kmatch=/^([a-z_][a-z_\d]*)/i.exec(_keyword)))throw"sprintf: invalid keyword property name "+_keyword;keyword_list.push(kmatch[1]);while(_keyword=_keyword.substring(kmatch[0].length)){if(kmatch=/^\.([a-z_][a-z_\d]*)/i.exec(_keyword))keyword_list.push(kmatch[1]);else if(kmatch=/^\[(\d+)\]/.exec(_keyword))keyword_list.push(kmatch[1]);else throw"sprintf: invalid keyword format "+_keyword}}else arg_names|=2;if(arg_names===3){throw"sprintf: mixing positional and named placeholders is "+"not (yet) supported"}f((function(){sign=false}));if(keyword_list.length){f((function(){arg=argv[_cursor];for(var k=0;k<keyword_list.length&&arg!=null;k++)arg=arg[keyword_list[k]]}))}else if(positional)f((function(){arg=argv[positional]}));else{f((function(){arg=argv[_cursor]}));cursor++}if(/[^sO]/.test(conversion))f((function(){return arg=+arg}));switch(conversion){case"b":f((function(){arg_s=arg.toString(2)}));break;case"c":f((function(){arg_s=String.fromCharCode(arg)}));break;case"d":f((function(){arg=sprintf.to_int(arg);arg_s=""+arg}));if(thousand_grouping)f((function(){arg_s=sprintf.thousand_grouping(arg_s)}));break;case"e":f((function(){arg_s=arg.toExponential(precision?precision:undefined)}));break;case"f":if(precision)f((function(){arg_s=arg.toFixed(precision)}));else f((function(){arg_s=""+arg}));if(thousand_grouping)f((function(){arg_s=sprintf.thousand_grouping(arg_s)}));break;case"o":f((function(){arg_s=arg.toString(8)}));break;case"O":f((function(){arg_s=stringify(arg)}));break;case"u":f((function(){arg=arg>>>0;arg_s=""+arg}));break;case"x":f((function(){arg_s=arg.toString(16)}));break;case"X":f((function(){arg_s=arg.toString(16).toUpperCase()}));break;case"s":f((function(){arg_s=""+arg}));if(precision)f((function(){arg_s=arg_s.substring(0,precision)}));break}if(/[def]/.test(conversion)){if(sign)f((function(){if(arg>=0)arg_s="+"+arg_s}));f((function(){sign=arg_s[0]=="-"||arg_s[0]=="+"}))}var pad_chr=!pad_zero?" ":pad_zero=="0"?"0":pad_zero[1];f((function(){var pad_chrs=pad_chr.repeat(Math.max(+pad_max-arg_s.length,0));var arg_padded=!pad_max?arg_s:pad_min?arg_s+pad_chrs:sign&&pad_chr[0]=="0"?arg_s[0]+pad_chrs+arg_s.slice(1):pad_chrs+arg_s;out+=arg_padded}))}else throw"sprintf invalid format "+_fmt})();return function(_argv){argv=_argv;out="";for(var i=0;i<_f.length;i++)_f[i](argv);return out}};E.parse=E.parse_slow;E.vsprintf=function(fmt,argv,opt){if(opt){if(opt.fast)return E.parse_fast(fmt)([fmt].concat(argv));if(opt.slow)return E.parse_slow(fmt)([fmt].concat(argv))}return E.sprintf.apply(null,[fmt].concat(argv))};return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},5516:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON ISC
"use strict";(function(){var is_node=typeof module=="object"&&module.exports&&module.children;if(is_node);else;!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(6545)],__WEBPACK_AMD_DEFINE_RESULT__=function(array){var E={};E.rm_empty_last=function(a){if(a[a.length-1]==="")a.pop();return a};E.split_trim=function(s,sep,limit){return array.compact_self(s.split(sep,limit))};E.split_ws=function(s){return E.split_trim(s,/\s+/)};E.qw=function(s){if(Array.isArray(s)&&!s.raw)return s;return E.split_ws(!Array.isArray(s)?s:E.es6_str(arguments))};E.chomp=function(s){return s.replace(/\n$/,"")};E.split_crlf=function(s){return E.rm_empty_last(s.split(/\r?\n/))};E.split_nl=function(s){return E.rm_empty_last(s.split("\n"))};E.to_array_buffer=function(s){var buf=new ArrayBuffer(s.length),buf_view=new Uint8Array(buf),i;for(i=0;i<s.length;i++)buf_view[i]=s.charCodeAt(i);return buf};E.from_array_buffer=function(buf){return String.fromCharCode.apply(null,new Uint8Array(buf))};E.capitalize=function(s){s=""+s;return(s[0]||"").toUpperCase()+s.slice(1)};E.trunc=function(s,len){if(s.length<=len)return s;return s.slice(0,len)+"..."};E.template=function(strings){var keys=Array.prototype.slice.call(arguments,1);return function(){var values=arguments;var dict=values[values.length-1]||{};var result=[strings[0]];keys.forEach((function(key,i){var value=Number.isInteger(key)?values[key]:dict[key];result.push(value,strings[i+1])}));return result.join("")}};E.es6_str=function(args){var parts=args[0],s="";if(!Array.isArray(parts))return parts;s+=parts[0];for(var i=1;i<parts.length;i++){s+=args[i];s+=parts[i]}return s};E.align=function(){var str=E.es6_str(arguments),lines=str.split("\n");if(!lines[0])lines.shift();var spaces=Infinity;for(var i=0;i<lines.length;i++){var space=lines[i].match(/^\s*/)[0];if(space.length==lines[i].length)space=lines[i]="";else spaces=Math.min(spaces,space.length)}if(spaces>0&&spaces!=Infinity)lines=array.sed(lines,new RegExp("^ {"+spaces+"}"),"");return lines.join("\n")};E.nl2sp=function(){return E.es6_str(arguments).replace(/\n\s*/g," ")};E.nl2jn=function(){return E.es6_str(arguments).replace(/\n\s*/g,"")};E.nl2br=function(){return E.es6_str(arguments).replace(/\n\s*/g,"<br>")};E.detach=function(s){return(" "+s).slice(1)};E.hash=function(s){var hash=0;for(var i=0,l=s.length;i<l;i++)hash=(hash<<5)-hash+s.charCodeAt(i)>>>0;return hash};var alphabet="0123456789abcdefghijklmnopqrstuvwxyz";E.generate=function(len){len=len||12;var ret="";for(var i=0;i<len;i++)ret+=alphabet[Math.random()*alphabet.length|0];return ret};E.longest=function(){var i,s;for(i=0;i<arguments.length;i++)s=(arguments[i]||"").length>(s||"").length?arguments[i]:s;return s};E.trim=function(s){return(""+s).replace(/^[\s\u00a0\u200c]*/g,"").replace(/[\s\u00a0\u200c]*$/g,"")};function _encode_decode_prototype(s,opt,node_func,browser_func){var encode_decode=function(val){if(typeof process==="object")return node_func(val);return browser_func(val)};if(!opt.safe)return encode_decode(s);try{return encode_decode(s)}catch(e){return undefined}}E.b64encode=function(s,opt){opt=opt||{};return _encode_decode_prototype(s,opt,(function(val){return Buffer.from(val,opt.encoding).toString("base64")}),(function(val){return btoa(val)}))};E.b64decode=function(s,opt){opt=opt||{};return _encode_decode_prototype(s,opt,(function(val){return Buffer.from(val,"base64").toString(opt.encoding)}),(function(val){return atob(val)}))};var snake_case_regex=/(([A-Z](?![^A-Z]))+|[A-Z])[^A-Z]*|[^A-Z]+/g;E.to_snake_case=function(str){return Array.from((str||"").matchAll(snake_case_regex)).map((function(m){return m[0].toLowerCase()})).join("_")};E.wrap=function wrap(str,width,nbsp_to_space){nbsp_to_space=nbsp_to_space!==false;var lines=str.split("\n");if(lines.length>1){return lines.map((function(line){return wrap(line,width)})).join("\n")}var words=str.split(" ");var output="";var cur_line="";for(var i=0;i<words.length;i++){var word=words[i];var possible_line=cur_line?cur_line+" "+word:word;if(possible_line[width]){output+=cur_line+"\n";cur_line=word}else cur_line=possible_line}output+=cur_line;return nbsp_to_space?output.replace(/\u00A0/g," "):output};E.sp2nbsp=function(){return E.es6_str(arguments).replace(/ /g," ")};return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},5305:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON ISC
"use strict";(function(){var is_node=typeof module=="object"&&module.exports&&module.children;var qs;if(!is_node);else{var _require=require;qs=_require("querystring")}!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(1291),__webpack_require__(5516)],__WEBPACK_AMD_DEFINE_RESULT__=function(zutil,zstring){var assign=Object.assign;var E={};function replace_slashes(url){return url.replace(/\\/g,"/")}E.add_proto=function(url){if(!url.match(/^([a-z0-9]+:)?\/\//i))url="http://"+url;return url};E.rel_proto_to_abs=function(url){var proto=is_node?"http:":location.protocol;return url.replace(/^\/\//,proto+"//")};E.get_top_level_domain=function(host){var n=host.match(/\.([^.]+)$/);return n?n[1]:""};E.get_host=function(url){if(url.indexOf("chrome://")==0){var ch_host=url.split("chrome://")[1].split("/")[0];return ch_host}var n=replace_slashes(url).match(/^(https?:)?\/\/([^\/]+)\/.*$/);return n?n[2]:""};E.get_host_without_tld=function(host){return host.replace(/^([^.]+)\.[^.]{2,3}(\.[^.]{2,3})?$/,"$1")};var generic_2ld={com:1,biz:1,net:1,org:1,xxx:1,edu:1,gov:1,ac:1,co:1,or:1,ne:1,kr:1,jp:1,jpn:1,cn:1,mil:1,info:1,int:1};var non_generic_2ld=["bc.ca","bel.tr","bet.ar","blog.br","ca.us","ce.it","def.br","dn.ua","fl.us","g12.br","ga.us","gc.ca","go.cr","go.id","go.jp","go.ke","go.kr","go.th","gob.ar","gob.bo","gob.cl","gob.do","gob.ec","gob.es","gob.gt","gob.hn","gob.mx","gob.pa","gob.pe","gob.sv","gob.ve","gop.pk","gos.pk","gouv.fr","gouv.ht","govt.nz","gv.at","health.nz","hs.kr","idf.il","idv.tw","il.us","in.rs","in.th","in.ua","ind.in","inf.br","jus.br","kh.ua","kharkov.ua","kiev.ua","kommune.no","ks.ua","kyiv.ua","lazio.it","leg.br","lg.ua","lviv.ua","mb.ca","me.uk","mi.us","mil.by","mil.iq","mn.us","mus.br","my.id","nhs.uk","nic.in","nj.us","nm.us","ny.us","od.ua","odessa.ua","of.by","oh.us","pa.us","pe.kr","police.uk","pro.in","qc.ca","rep.kp","res.in","rv.ua","sch.id","te.ua","tx.us","web.id","web.tr"];var non_generic_2ld_re=domains_re(non_generic_2ld);E.get_root_domain=function(domain){if(E.is_ip(domain))return domain;var s=domain.split("."),root=s,len=s.length;if(non_generic_2ld_re.test(domain))root=s.slice(-3,len);else if(len>2){var hd=0;if(s[len-1]=="hola"){hd=2;if(s[len-2].match(/^\d+$/))hd=3}if(generic_2ld[s[len-2-hd]])root=s.slice(-3-hd,len-hd);else root=s.slice(-2-hd,len-hd)}return root.join(".")};E.is_domain_suffix=function(domain){domain="test."+domain;return E.get_root_domain(domain)==domain};E.get_domain_email=function(email){var match=email.toLowerCase().match(/^[a-z0-9_.\-+*%]+@(.*)$/);return match&&match[1]};E.get_root_domain_email=function(email){var domain=E.get_domain_email(email);return domain&&E.get_root_domain(domain)};E.get_path=function(url){var n=url.match(/^https?:\/\/[^\/]+(\/.*$)/);return n?n[1]:""};E.get_proto=function(url){var n=url.match(/^([a-z0-9]+):\/\//);return n?n[1]:""};E.get_host_gently=function(url){var n=replace_slashes(url).match(/^(?:(?:[a-z0-9]+?:)?\/\/)?([^\/]+)/);return n?n[1]:""};E.is_ip=function(host){var m=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/.exec(host);if(!m)return false;for(var i=1;i<=4;i++){if(+m[i]>255)return false}return true};E.is_ip_mask=function(host){var m=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/.exec(host);if(!m)return false;if(E.ip2num(host)==0)return false;var final=false;var check_num_mask=function(num){var arr=(num>>>0).toString(2).split(""),fin=false;for(var i=0;i<arr.length;i++){if(fin&&arr[i]=="1")return false;if(!fin&&arr[i]=="0")fin=true}return true};for(var i=1;i<=4;i++){if(+m[i]>255)return false;if(final&&+m[i]>0)return false;if(!final&&+m[i]<255){if(!check_num_mask(+m[i]))return false;final=true}}return!!final};E.ip2num=function(ip){var num=0;ip.split(".").forEach((function(octet){num<<=8;num+=+octet}));return num>>>0};E.num2ip=function(num){return(num>>>24)+"."+(num>>16&255)+"."+(num>>8&255)+"."+(num&255)};E.is_ip_subnet=function(host){var m=/(.+?)\/(\d+)$/.exec(host);return m&&E.is_ip(m[1])&&+m[2]<=32};E.cbl_key2sub=function(ip){return ip.replace(/_/g,".")+"/24"};E.is_ip_netmask=function(host){if(!host||typeof host.split!=="function")return false;var ips=host.split("/");if(ips.length!=2||!E.is_ip(ips[0])||!E.is_ip_mask(ips[1]))return false;return true};E.is_ip_range=function(host){if(typeof host.split!=="function")return false;var ips=host.split("-");if(ips.length!=2||!E.is_ip(ips[0])||!E.is_ip(ips[1]))return false;return E.ip2num(ips[0])<E.ip2num(ips[1])};E.is_ip_port=function(host){var m=/(.+?)(?::(\d{1,5}))?$/.exec(host);return m&&E.is_ip(m[1])&&!(+m[2]>65535)};E.is_valid_url=function(url){return/^(https?:\/\/)?([a-z0-9-]+\.)+[a-z0-9-]+(:\d+)?(\/.*)?$/i.test(url)};E.is_valid_domain=function(domain){return/^([a-z0-9]([a-z0-9-_]*[a-z0-9])?\.)+[a-z]{2,63}$/.test(domain)||/^(new-tab-page|hola-new-tab-page)$/.test(domain)||/^(hola-diagnostics|hola-settings|settings)$/.test(domain)};E.hola_domains=["hola.org","zspeed-cdn.com","h-vpn.org","holavpn.com","holavpnworld.com","holavpnextension.com","holavpninstaller.com","holabrowser.com","holafreevpn.com","holavpnrussia.com","hola-vpn.com","holax.io","holavpn.net","holavpnandroid.com","c6gj-static.net","su89-cdn.net","yd6n63ptky.com","yg5sjx5kzy.com","kbz0pwvxmv.com","wbzby2a2k9.com","hola-compat.com","x-cdn-static.com"];var additional_domains=["haffnetwork\\w{2}.com"];E.hola_ext_domains=["shoopit.com","toolip.io"];E.hola_browser_internal_domains=["new-tab-page","hola-new-tab-page","hola-diagnostics","hola-settings","settings"];function domains_re(arr){var domains=arr.join("|").replace(/\./g,"\\.");return new RegExp("^(.*\\.)?("+domains+")$")}function init_hola_domains_re(){var domains=E.hola_domains.concat(additional_domains).concat(E.hola_browser_internal_domains).concat(E.hola_ext_domains);return domains_re(domains)}var hola_domain_re=init_hola_domains_re();E.is_hola_domain=function(domain){return E.is_valid_domain(domain)&&domain.search(hola_domain_re)!=-1};E.is_hola_url=function(url){return E.is_hola_domain(E.get_host(url))};E.is_valid_email=function(email){if(!email)return false;var re=/^[a-z0-9_\-+*]+(?:\.[a-z0-9_\-+*]+)*@(.*)$/;var n=email.toLowerCase().match(re);return!!(n&&E.is_valid_domain(n[1]))};E.is_alias_email=function(email){if(!E.is_valid_email(email))return false;var n=email.toLowerCase().match(/^([a-z0-9_.\-+*]+)@.*$/);return!!(n&&/.+\+.+/.test(n[1]))};E.get_main_email=function(email){if(!E.is_valid_email(email))return;if(E.is_alias_email(email))return email.replace(/\+.+@/,"@");return email};E.is_ip_in_range=function(ips_range,ip){if(!E.is_ip_range(ips_range)||!E.is_ip(ip))return false;var ips=ips_range.split("-");var min_ip=E.ip2num(ips[0]),max_ip=E.ip2num(ips[1]);var num_ip=E.ip2num(ip);return num_ip>=min_ip&&num_ip<=max_ip};E.is_ip_local=function(ip){return E.is_ip_in_range("10.0.0.0-10.255.255.255",ip)||E.is_ip_in_range("172.16.0.0-172.31.255.255",ip)||E.is_ip_in_range("192.168.0.0-192.168.255.255",ip)||E.is_ip_in_range("169.254.0.0-169.254.255.255",ip)};E.host_lookup=function(lookup,host){var pos;while(1){if(host in lookup)return lookup[host];if((pos=host.indexOf("."))<0)return;host=host.slice(pos+1)}};E.uri_obj_href=function(uri){return(uri.protocol||"")+(uri.slashes?"//":"")+(uri.host?(uri.auth?uri.auth+"@":"")+uri.host:"")+uri.path+(uri.hash||"")};var protocol_re=/^((?:about|http|https|file|ftp|ws|wss):)?(\/\/)?/i;var host_section_re=/^(.*?)(?:[\/?#]|$)/;var host_re=/^(?:(([^:@]*):?([^:@]*))?@)?([a-zA-Z0-9._+-]*)(?::(\d*))?/;var path_section_re=/^([^?#]*)(\?[^#]*)?(#.*)?$/;var path_re_loose=/^(\/(?:.(?![^\/]*\.[^\/.]+$))*\/?)?([^\/]*?(?:\.([^.]+))?)$/;var path_re_strict=/^(\/(?:.(?![^\/]*(?:\.[^\/.]+)?$))*\/?)?([^\/]*?(?:\.([^.]+))?)$/;E.parse=function(url,strict){function re(expr,str){var m;try{m=expr.exec(str)}catch(e){m=null}if(!m)return m;for(var i=0;i<m.length;i++)m[i]=m[i]===undefined?null:m[i];return m}url=url||location.href;var uri={orig:url};url=replace_slashes(url);var m,remaining=url;if(!(m=re(protocol_re,remaining)))return{};uri.protocol=m[1];if(uri.protocol!==null)uri.protocol=uri.protocol.toLowerCase();uri.slashes=!!m[2];if(!uri.protocol&&!uri.slashes){uri.protocol="http:";uri.slashes=true}remaining=remaining.slice(m[0].length);if(!(m=re(host_section_re,remaining)))return{};uri.authority=m[1];remaining=remaining.slice(m[1].length);if(!(m=re(host_re,uri.authority)))return{};uri.auth=m[1];uri.user=m[2];uri.password=m[3];uri.hostname=m[4];uri.port=m[5];if(uri.hostname!==null){uri.hostname=uri.hostname.toLowerCase();uri.host=uri.hostname+(uri.port?":"+uri.port:"")}if(!(m=re(path_section_re,remaining)))return{};uri.relative=m[0];uri.pathname=m[1];uri.search=m[2];uri.query=uri.search?uri.search.substring(1):null;uri.hash=m[3];if(!(m=re(strict?path_re_strict:path_re_loose,uri.pathname)))return{};uri.directory=m[1];uri.file=m[2];uri.ext=m[3];if(uri.file=="."+uri.ext)uri.ext=null;if(!uri.pathname)uri.pathname="/";uri.path=uri.pathname+(uri.search||"");uri.href=E.uri_obj_href(uri);return uri};E.qs_parse=function(q,opt){var obj={};opt=opt||{};q=q.length?q.split("&"):[];var len=q.length;var unescape_val=opt.bin?function(val){return qs.unescapeBuffer(val,true).toString("binary")}:opt.safe?function(val){try{return decodeURIComponent(val.replace(/\+/g," "))}catch(e){return val}}:function(val){return decodeURIComponent(val.replace(/\+/g," "))};for(var i=0;i<len;++i){var x=q[i];var idx=x.indexOf("=");var kstr=idx>=0?x.substr(0,idx):x;var vstr=idx>=0?x.substr(idx+1):"";var k=unescape_val(kstr);var v=unescape_val(vstr);if(obj[k]===undefined)obj[k]=v;else if(Array.isArray(obj[k]))obj[k].push(v);else obj[k]=[obj[k],v]}if(!opt.disable_qid_parse){var extend_obj=function(){var obj_ext=JSON.parse(zstring.b64decode(obj.qid,opt));obj=assign(obj_ext,zutil.omit(obj,"qid"))};while(obj.qid){if(opt.safe)try{extend_obj()}catch(e){obj=zutil.omit(obj,"qid")}else extend_obj()}}return obj};function token_regex(s,end){return end?"^"+s+"$":s}E.http_glob_host=function(host,end){var port="";var parts=host.split(":");host=parts[0];if(parts.length>1)port=":"+parts[1].replace("*","[0-9]+");var n=host.match(/^(|.*[^*])(\*+)$/);if(n){host=E.http_glob_host(n[1])+(n[2].length==1?"[^./]+":"[^/]"+(n[1]?"*":"+"));return token_regex(host+port,end)}host=host.replace(/\*\*\./,"**").replace(/\*\./,"*").replace(/\./g,"\\.").replace(/\*\*/g,"(([^./]+\\.)+)?").replace(/\*/g,"[^./]+\\.");return token_regex(host+port,end)};E.http_glob_path=function(path,end){if(path[0]=="*")return E.http_glob_path("/"+path,end);var n=path.match(/^(|.*[^*])(\*+)([^*^\/]*)$/);if(n){path=E.http_glob_path(n[1])+(n[2].length==1?"[^/]+":".*")+E.http_glob_path(n[3]);return token_regex(path,end)}path=path.replace(/\*\*\//,"**").replace(/\*\//,"*").replace(/\//g,"\\/").replace(/\./g,"\\.").replace(/\*\*/g,"(([^/]+\\/)+)?").replace(/\*/g,"[^/]+\\/");return token_regex(path,end)};E.http_glob_url=function(url,end){var n=url.match(/^((.*):\/\/)?([^\/]+)(\/.*)?$/);if(!n)return null;var prot=n[1]?n[2]:"*";var host=n[3];var path=n[4]||"**";if(prot=="*")prot="https?";host=E.http_glob_host(host);path=E.http_glob_path(path);return token_regex(prot+":\\/\\/"+host+path,end)};E.root_url_cmp=function(a,b){var a_s=a.match(/^[*.]*([^*]+)$/);var b_s=b.match(/^[*.]*([^*]+)$/);if(!a_s&&!b_s)return false;var re,s;if(a_s&&b_s&&a_s[1].length>b_s[1].length||a_s&&!b_s){s=a_s[1];re=b}else{s=b_s[1];re=a}s=E.add_proto(s)+"/";if(!(re=E.http_glob_url(re,1)))return false;try{re=new RegExp(re)}catch(e){return false}return re.test(s)};E.qs_strip=function(url){return/^[^?#]*/.exec(url)[0]};E.qs_str=function(_qs){var q=[];for(var k in _qs){(Array.isArray(_qs[k])?_qs[k]:[_qs[k]]).forEach((function(v){q.push(encodeURIComponent(k)+"="+encodeURIComponent(v))}))}return q.join("&")};E.qs_add=function(url,_qs,opt){var u=E.parse(url),q=assign(u.query?E.qs_parse(u.query,opt):{},_qs);u.path=u.pathname+"?"+E.qs_str(q);return E.uri_obj_href(u)};E.qs_parse_url=function(url,opt){return E.qs_parse(url.replace(/(^.*\?)|(^[^?]*$)/,""),opt)};E.qs_pack_qid=function(_qs){return zstring.b64encode(JSON.stringify(_qs))};E.qs_str_qid=function(_qs){return E.qs_str({qid:E.qs_pack_qid(_qs)})};E.url_qs_encode_qid=function(url,opt){var u=E.parse(url),q=assign(u.query?E.qs_parse(u.query,opt):{});u.path=u.pathname+"?"+E.qs_str_qid(q);return E.uri_obj_href(u)};E.segments=function(url){var parsed=E.parse(url||location.href);var dir=parsed.directory||"/";if(dir=="/")return[""];return dir.split("/")};E.safe_redir=function(url,default_hostname){if(!url)return;var u=E.parse(url,true);var hostname=u.hostname||default_hostname;if(!/^https?:$/.test(u.protocol)||!hostname)return;if(E.is_hola_domain(hostname)||zutil.is_mocha()&&hostname=="localhost")return"https://"+hostname+encodeURI(u.path)};E.alt_holaorg=function(domain,kw){if(domain=="hola.org"&&kw&&kw.hola_org_blocked)return"hola-vpn.com";return domain};return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},901:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON
"use strict";(function(){var is_node=typeof module=="object"&&module.exports&&module.children;if(!is_node);else;!(__WEBPACK_AMD_DEFINE_RESULT__=function(){var E={};var win_versions={"10.0":"10.0",6.3:"8.1",6.2:"8",6.1:"7","6.0":"vista",5.2:"2003",5.1:"xp","5.0":"2000"};var arch_mapping={x86_64:"64",i686:"32",arm:"arm"};var check_hola=/\bhola_android\b/i;var check_hola_viewer=/\bHola help viewer\b/i;var check_opera=/\bOPR\b\/(\d+)/i;var check_edge=/\bEdge\b\/(\d+)/i;var check_xbox=/\bxbox\b/i;var check_ucbrowser=/\bUCBrowser\b\/(\d+)/i;var check_webview=/ Version\/(\d+)(\.\d)/;var check_chromium_edge=/\bEdg\/(\d+)/i;var is_browser=!is_node&&typeof self!="undefined";function is_ipad_os(ua){return/Macintosh/.test(ua)&&typeof navigator=="object"&&navigator.maxTouchPoints>1}function ios_ua(ua,safari_ver){var res;if(res=/(?:iPhone|iPad|iPod|iPod touch);.*?OS ([\d._]+)/.exec(ua)){var ios_ver=res[1];var is_chrome=/CriOS/.test(ua);var is_firefox=/FxiOS/.test(ua);var ucbrowser_ver=(check_ucbrowser.exec(ua)||[])[1];var is_ucbrowser=!!ucbrowser_ver;return{browser:"safari",version:safari_ver||ios_ver,ios:ios_ver,hola_viewer:check_hola_viewer.test(ua),chrome:is_chrome,firefox:is_firefox,ucbrowser:is_ucbrowser,ucbrowser_version:ucbrowser_ver,webview:/Twitter/.test(ua)?"twitter":/GSA\/\d+/.test(ua)?"googlesearch":/FBAV\/\d+/.test(ua)?"facebook":!safari_ver&&!is_chrome&&!is_firefox&&!is_ucbrowser}}}function check_chromium(ua){if(check_webview.test(ua)||/Android/.test(ua)||/ Mobile /.test(ua)||check_opera.test(ua)||check_chromium_edge.test(ua)){return false}var group="(?: (\\w*)\\/)?",ver="\\/[\\d\\.]+";var res=new RegExp("AppleWebKit"+ver+"(?: \\(.*\\))?"+group+".* Chrome"+ver+group+".* Safari"+ver+group).exec(ua);return res&&(res[1]||res[2]||res[3])}E.guess_browser=function(ua){var res;var nav=is_browser?self.navigator&&navigator:null;ua=ua||(is_browser?nav.userAgent:"");if(res=/\bOpera Mini\/(\d+)/.exec(ua))return{browser:"opera_mini",version:res[1]};var ucbrowser=check_ucbrowser.exec(ua);if(res=/[( ]MSIE ([6789]|10).\d[);]/.exec(ua))return{browser:"ie",version:res[1],xbox:check_xbox.test(ua)};if(res=/[( ]Trident\/\d+(\.\d)+.*rv:(\d\d)(\.\d)+[);]/.exec(ua))return{browser:"ie",version:res[2],xbox:check_xbox.test(ua)};if(res=/ Chrome\/(\d+)(\.\d+)+.* Safari\/\d+(\.\d+)+/.exec(ua)){var opera=check_opera.exec(ua);var edge;if(edge=check_edge.exec(ua))return{browser:"edge",version:edge[1]};var chromium_based=check_chromium(ua);var brands=nav&&nav.userAgentData&&nav.userAgentData.brands;var brand=brands&&brands.length&&brands[0]&&brands[0].brand;return{browser:"chrome",version:res[1],android:ua.match(/Android/),webview:ua.match(check_webview),hola_android:check_hola.test(ua),hola_browser:chromium_based=="Hola"||brand=="Hola",hola_viewer:check_hola_viewer.test(ua),chromium_based,edge:check_chromium_edge.test(ua),opera:opera&&!!opera[1],opera_version:opera?opera[1]:undefined,ucbrowser:ucbrowser&&!!ucbrowser[1],ucbrowser_version:ucbrowser?ucbrowser[1]:undefined,webos_app:/Web0S/.test(ua),samsung_browser:/SamsungBrowser/.test(ua),samsung:/(SAMSUNG|SM-)/i.test(ua),huawei:/HUAWEI/i.test(ua)}}if(res=/ QupZilla\/(\d+\.\d+\.\d+).* Safari\/\d+.\d+/.exec(ua))return{browser:"qupzilla",version:res[1]};if(res=/\(PlayStation (\d+) (\d+\.\d+)\).* AppleWebKit\/\d+.\d+/.exec(ua)){return{browser:"playstation"+res[1],version:res[2]}}if(res=/\(SMART-TV; Linux; Tizen ([0-9.]+)\) AppleWebkit\//.exec(ua))return{browser:"samsung_tizen",version:res[1]};if(res=/ Version\/(\d+)(\.\d)+.* Safari\/\d+.\d+/.exec(ua)){if(!ua.match(/Android/))return ios_ua(ua,res[1])||{browser:"safari",version:res[1]};return{browser:"chrome",version:res[1],android:true,webview:true,hola_android:check_hola.test(ua),ucbrowser:ucbrowser&&!!ucbrowser[1],ucbrowser_version:ucbrowser?ucbrowser[1]:undefined,samsung_browser:/SamsungBrowser/.test(ua),samsung:/(SAMSUNG|SM-)/.test(ua),huawei:/HUAWEI/.test(ua)}}if(res=/ (Firefox|PaleMoon)\/(\d+).\d/.exec(ua)){return{browser:"firefox",version:res[2],palemoon:res[1]=="PaleMoon"}}if(/Hola\/\d+\.\d+.*?(?:iPhone|iPad|iPod)/.exec(ua))return{browser:"safari",version:"Hola"};if(res=ios_ua(ua))return res;return{}};E.browser_to_string=function(browser){if(typeof browser!="object"||!browser.browser)return"unknown";var s=browser.browser=="ie"&&browser.version>11?"edge":browser.browser;if(browser.version)s+=" "+browser.version;if(browser.chrome)s+=" chrome";if(browser.firefox)s+=" firefox";if(browser.xbox)s+=" xbox";if(browser.android)s+=" android";if(browser.webview){s+=" webview";if(typeof browser.webview=="string")s+="-"+browser.webview}if(browser.chromium_based)s+=" chromium_based";if(browser.samsung_browser)s+=" samsung";if(browser.edge)s+=" edge";if(browser.opera){s+=" opera";if(browser.opera_version)s+="-"+browser.opera_version}if(browser.hola_android)s+=" hola_android";if(browser.hola_viewer)s+=" hola_viewer";if(browser.ucbrowser){s+=" ucbrowser";if(browser.ucbrowser_version)s+="-"+browser.ucbrowser_version}if(browser.palemoon)s+=" palemoon";if(browser.ios)s+=" ios";if(browser.webos_app)s+=" webos_app";return s?s:"unknown"};E.guess=function(ua,platform){var res;ua=ua||(is_browser?navigator.userAgent:"");platform=platform||(is_browser?navigator.platform:"");if(check_xbox.exec(ua))return{os:"xbox",mobile:false};if(res=/Windows(?: NT(?: (.*?))?)?[);]/.exec(ua)){return{os:"windows",version:win_versions[res[1]],release_version:res[1],arch:ua.match(/WOW64|Win64|x64/)?"64":"32",mobile:false}}if(/Windows Phone/.exec(ua))return{os:"winphone",mobile:true};if(/Macintosh/.exec(ua)){if(is_ipad_os(ua))return{os:"ios",mobile:true};if(res=/Macintosh.*; (?:Intel|PPC) Mac OS X (\d+[._]\d+)/.exec(ua)){return{os:"macos",version:res[1].replace("_","."),mobile:false}}return{os:"macos",mobile:false}}if(/Web0S.*SmartTV/.exec(ua)){return{os:"webos",version:/Chrome/.test(ua)?"3":"2",mobile:false,tv:true}}if(/droid.+aft(\w)( bui|\))/i.exec(ua))return{os:"fireos",mobile:false,tv:true};if(/(apple) ?tv/i.exec(ua))return{os:"tvos",mobile:false,tv:true};if(res=/(Android|Andr0id)(?: (\d+\.\d+))?/.exec(ua))return{os:"android",version:res[2],mobile:true};if(res=/(Linux|CrOS|OpenBSD|FreeBSD)(?: (x86_64|i686|arm))?/.exec(ua)){if(check_opera.test(ua)&&res[1]=="Linux"&&res[2]=="x86_64"&&/^Linux arm/.test(platform)){return{os:"android",mobile:true}}return{os:res[1].toLowerCase(),arch:arch_mapping[res[2]],nix:true,mobile:false}}if(res=/(?:iPhone|iPad|iPod|iPod touch);.*?OS (\d+[._]\d+)/.exec(ua))return{os:"ios",version:res[1].replace("_","."),mobile:true};if(/iPhone|iPad|iPod/.exec(ua))return{os:"ios",mobile:true};if(/PLAYSTATION/.exec(ua))return{os:"ps",mobile:false};if(/HitLeap Viewer/.exec(ua))return{os:"windows",mobile:false};return{}};E.guess_device=function(ua){var res;ua=ua||(is_browser?navigator.userAgent:"");if(res=/(iPhone|iPad|iPod)/.exec(ua))return{device:res[1].toLowerCase()};if(/Macintosh/.test(ua))return{device:is_ipad_os(ua)?"ipad":"mac"};return{}};E.support_fullscreen=function(){return!!(is_browser&&typeof document!="undefined"&&(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled))};E.support_hover=function(){if(!is_browser)return false;if(self.matchMedia&&self.matchMedia("(hover: hover)").matches)return true;return!E.guess().mobile};E.is_invalid=function(ua){return/^(python-request|python-urllib|blackberry)/i.test(ua)};return E}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},1291:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON ISC
"use strict";(function(){var node_util;var is_node=typeof module=="object"&&module.exports&&module.children;if(!is_node);else{node_util=require("util")}!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(6545)],__WEBPACK_AMD_DEFINE_RESULT__=function(array){var E={};E._is_mocha=undefined;E.is_mocha=function(){if(E._is_mocha!==undefined)return E._is_mocha;if(typeof process!="undefined"&&typeof process.env!="undefined")return E._is_mocha=process.env.IS_MOCHA||false;return E._is_mocha=false};E.is_lxc=function(){return is_node&&(+process.env.LXC||+process.env.ZLXC)};E.f_mset=function(flags,mask,bits){return flags&~mask|bits};E.f_lset=function(flags,bits,logic){return E.f_mset(flags,bits,logic?bits:0)};E.f_meq=function(flags,mask,bits){return(flags&mask)==bits};E.f_eq=function(flags,bits){return(flags&bits)==bits};E.f_cmp=function(f1,f2,mask){return(f1&mask)==(f2&mask)};E.xor=function(a,b){return!a!=!b};E.div_ceil=function(a,b){return Math.floor((a+b-1)/b)};E.ceil_mul=function(a,b){return E.div_ceil(a,b)*b};E.floor_mul=function(a,b){return Math.floor(a/b)*b};E.range=function(x,a,b){return x>=a&&x<=b};E.range.ii=function(x,a,b){return x>=a&&x<=b};E.range.ie=function(x,a,b){return x>=a&&x<b};E.range.ei=function(x,a,b){return x>a&&x<=b};E.range.ee=function(x,a,b){return x>a&&x<b};E.clamp=function(lower_bound,value,upper_bound){if(value<lower_bound)return lower_bound;if(value<upper_bound)return value;return upper_bound};E.revcmp=function(a,b){return a>b?-1:a<b?1:0};E.union_with=function(fn){var res={},args;if(arguments.length==2&&typeof arguments[1]=="object")args=arguments[1];else args=array.slice(arguments,1);for(var i=0;i<args.length;++i){for(var key in args[i]){var arg=args[i];res[key]=res.hasOwnProperty(key)?fn(res[key],arg[key]):arg[key]}}return res};function _clone_deep(obj){var i,n,ret;if(obj instanceof Array){ret=new Array(obj.length);n=obj.length;for(i=0;i<n;i++)ret[i]=obj[i]instanceof Object?_clone_deep(obj[i]):obj[i];return ret}else if(obj instanceof Date)return new Date(obj);else if(obj instanceof RegExp)return new RegExp(obj);else if(obj instanceof Function)return obj;ret={};for(i in obj)ret[i]=obj[i]instanceof Object?_clone_deep(obj[i]):obj[i];return ret}E.clone_deep=function(obj){if(!(obj instanceof Object))return obj;return _clone_deep(obj)};E.extend=function(obj){for(var i=1;i<arguments.length;i++){var source=arguments[i];if(!source)continue;for(var prop in source)obj[prop]=source[prop]}return obj};E.is_object=function(obj){return obj&&obj.constructor==Object};E.is_plain_object=function(obj){return!!obj&&!!obj.constructor&&(obj.constructor.name=="Object"||obj.constructor==Object)};E.extend_deep=function(obj){if(!E.is_plain_object(obj))return obj;for(var i=1;i<arguments.length;i++){var source=arguments[i];if(!source)continue;for(var prop in source){if(E.is_plain_object(source[prop])&&E.is_plain_object(obj[prop])){E.extend_deep(obj[prop],source[prop])}else obj[prop]=source[prop]}}return obj};E.extend_deep_del_null=function(obj){for(var i=1;i<arguments.length;i++){var source=arguments[i];if(!source)continue;for(var prop in source){if(E.is_plain_object(source[prop])){if(!E.is_plain_object(obj[prop]))obj[prop]={};E.extend_deep_del_null(obj[prop],source[prop])}else if(source[prop]==null)delete obj[prop];else obj[prop]=source[prop]}}return obj};E.defaults=function(obj){if(!obj)obj={};for(var i=1;i<arguments.length;i++){var source=arguments[i];if(source===undefined)continue;for(var prop in source){if(obj[prop]===undefined)obj[prop]=source[prop]}}return obj};E.defaults_deep=function(obj){if(obj!==undefined&&!E.is_plain_object(obj))return obj;for(var i=1;i<arguments.length;i++){var source=arguments[i];if(obj===undefined)obj=E.clone_deep(source);else if(E.is_plain_object(source)){for(var prop in source){var s=source[prop],d=obj[prop];if(d===undefined)obj[prop]=E.clone_deep(s);else E.defaults_deep(d,s)}}}return obj};E.clone=function(obj){if(!(obj instanceof Object))return obj;if(obj instanceof Array){var a=new Array(obj.length);for(var i=0;i<obj.length;i++)a[i]=obj[i];return a}return E.extend({},obj)};E.freeze_deep=function(obj){if(typeof obj=="object"){for(var prop in obj){if(obj.hasOwnProperty(prop))E.freeze_deep(obj[prop])}}return Object.freeze(obj)};E.equal_deep=function(a,b){var i;if(a===b)return true;if(!a||!b||a.constructor!==b.constructor)return false;if(a instanceof Function||a instanceof RegExp)return a.toString()==b.toString();if(a instanceof Date)return+a==+b;if(Array.isArray(a)){if(a.length!=b.length)return false;for(i=0;i<a.length;i++){if(!E.equal_deep(a[i],b[i]))return false}return true}if(E.is_plain_object(a)){var a_keys=Object.keys(a),b_keys=Object.keys(b);if(a_keys.length!=b_keys.length)return false;for(i=0;i<a_keys.length;i++){var key=a_keys[i];if(!E.equal_deep(a[key],b[key]))return false}return true}return false};E.reduce_obj=function(coll,key_cb,val_cb,merge_cb){if(coll==null)return{};if(val_cb===undefined&&key_cb!=null&&(key_cb.key||key_cb.value)){merge_cb=key_cb.merge;val_cb=key_cb.value;key_cb=key_cb.key}if(key_cb==null)key_cb=function(it){return it};else if(typeof key_cb=="string"){var kpath=E.path(key_cb);key_cb=function(it){return E.get(it,kpath)}}if(val_cb==null)val_cb=function(it){return it};else if(typeof val_cb=="string"){var vpath=E.path(val_cb);val_cb=function(it){return E.get(it,vpath)}}var obj={};if(Array.isArray(coll)){coll.forEach((function(item,i){var k=key_cb(item,i),v=val_cb(item,i);if(k===undefined||v===undefined)return;if(obj[k]!==undefined&&merge_cb)v=merge_cb(v,obj[k]);obj[k]=v}))}else if(typeof coll=="object"){Object.keys(coll).forEach((function(i){var k=key_cb(coll[i],i),v=val_cb(coll[i],i);if(k===undefined||v===undefined)return;if(obj[k]!==undefined&&merge_cb)v=merge_cb(v,obj[k]);obj[k]=v}))}return obj};E.flatten_obj=function(obj,delimiter){delimiter=delimiter||"_";if(!E.is_object(obj)&&!Array.isArray(obj))return obj;var res={},k,keys=Object.keys(obj);for(var i=0;i<keys.length;i++){k=keys[i];if(!E.is_object(obj[k])&&!Array.isArray(obj[k]))res[k]=obj[k];else{var o=E.flatten_obj(obj[k],delimiter),_keys=Object.keys(o);for(var j=0;j<_keys.length;j++)res[k+delimiter+_keys[j]]=o[_keys[j]]}}return res};E.map_obj=function(obj,fn){var ret={};for(var i in obj)ret[i]=fn(obj[i],i,obj);return ret};E.map_obj_keys=function(obj,fn){var ret={};for(var i in obj)ret[fn(i,obj[i],obj)]=obj[i];return ret};E.sort_obj=function(obj,fn){if(obj instanceof Array||typeof obj==="function"||!(obj instanceof Object)){return obj}var ret={},keys=Object.keys(obj).sort(fn);for(var i=0;i<keys.length;i++)ret[keys[i]]=E.sort_obj(obj[keys[i]],fn);return ret};E.forEach=function(obj,fn,_this){for(var i in obj)fn.call(_this,obj[i],i,obj)};E.each=E.forEach;E.find=function(obj,fn,_this){for(var i in obj){if(fn.call(_this,obj[i],i,obj))return obj[i]}};E.filter=function(obj,fn,_this){var ret={};for(var i in obj){if(fn.call(_this,obj[i],i,obj))ret[i]=obj[i]}return ret};E.find_prop=function(obj,prop,val){return E.find(obj,(function(o){return o[prop]===val}))};E.isspace=function(c){return/\s/.test(c)};E.isdigit=function(c){return c>="0"&&c<="9"};E.isalpha=function(c){return c>="a"&&c<="z"||c>="A"&&c<="Z"};E.isalnum=function(c){return E.isdigit(c)||E.isalpha(c)};E.obj_pluck=function(obj,prop){var val=obj[prop];delete obj[prop];return val};E.proto_keys=function(proto){var keys=[];for(var i in proto)keys.push(i);return keys};E.values=function(obj){var values=[];for(var i in obj)values.push(obj[i]);return values};E.min_by=function(_array,iteratee){var result;if(!_array==null)return result;var computed;for(var i=0;i<_array.length;i++){var value=_array[i];var current=iteratee(value);if(computed===undefined||current<computed){computed=current;result=value}}return result};E.path=function(path){if(Array.isArray(path))return path;path=""+path;if(!path)return[];return path.split(".")};E.get=function(o,path,def){path=E.path(path);for(var i=0;i<path.length;i++){if(!o||typeof o!="object"&&typeof o!="function"||!(path[i]in o))return def;o=o[path[i]]}return o};E.set=function(o,path,value){var orig=o;path=E.path(path);for(var i=0;i<path.length-1;i++){var p=path[i];o=o[p]||(o[p]={})}o[path[path.length-1]]=value;return orig};E.unset=function(o,path){path=E.path(path);for(var i=0;i<path.length-1;i++){var p=path[i];if(!o[p])return;o=o[p]}delete o[path[path.length-1]]};var has_unique={};E.has=function(o,path){return E.get(o,path,has_unique)!==has_unique};E.own=function(o,prop){return o!=null&&Object.prototype.hasOwnProperty.call(o,prop)};E.bool_lookup=function(a,split){var ret={},i;if(typeof a=="string")a=a.split(split||/\s/).filter(Boolean);for(i=0;i<a.length;i++)ret[a[i]]=true;return ret};E.clone_inplace=function(dst,src){if(dst===src)return dst;if(Array.isArray(dst)){for(var i=0;i<src.length;i++)dst[i]=src[i];dst.splice(src.length)}else if(typeof dst=="object"){var k;for(k in src)dst[k]=src[k];for(k in dst){if(!src.hasOwnProperty(k))delete dst[k]}}return dst};if(node_util&&node_util.inherits)E.inherits=node_util.inherits;else{E.inherits=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}E.inherit_init=function(obj,ctor,params){var orig_proto=Object.getPrototypeOf(obj);var ctor_proto=Object.assign({},ctor.prototype);Object.setPrototypeOf(ctor_proto,orig_proto);Object.setPrototypeOf(obj,ctor_proto);return ctor.apply(obj,params)};E.pick=function(obj){var i,j,o={};for(i=1;i<arguments.length;i++){var fields=E.ensure_array(arguments[i]);for(j=0;j<fields.length;j++){if(E.own(obj,fields[j]))o[fields[j]]=obj[fields[j]]}}return o};E.omit=function(obj,omit){var i,o={};obj=Object(obj);for(i in obj){if(!omit.includes(i))o[i]=obj[i]}return o};E.is_empty=function(v){return v==null||typeof v=="number"&&isNaN(v)||typeof v=="string"&&v==""};E.omit_empty=function(obj){var i,o={};obj=Object(obj);for(i in obj){if(!E.is_empty(obj[i]))o[i]=obj[i]}return o};E.if_set=function(val,o,name){if(val!==undefined)o[name]=val};E.escape_dotted_keys=function(obj,repl){if(!Array.isArray(obj)&&!E.is_plain_object(obj))return obj;repl=repl||"_";for(var prop in obj){if(E.own(obj,prop)){var new_prop=prop.replace(/\./g,repl);if(prop!=new_prop){obj[new_prop]=obj[prop];delete obj[prop]}if(Array.isArray(obj[new_prop])){obj[new_prop].forEach((function(e){E.escape_dotted_keys(e,repl)}))}else if(E.is_plain_object(obj[new_prop]))E.escape_dotted_keys(obj[new_prop],repl)}}};E.ensure_array=function(v,split){if(v==null||Array.isArray(v))return v||[];if(split&&typeof v=="string")return v.split(split==true?/[ ,]+/:split).filter(Boolean);return[v]};E.has_own=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)};E.purge=function(obj){for(var key in obj){if(E.has_own(obj,key))delete obj[key]}return obj};E.noop=function(){};return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},6262:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON ISC
"use strict";(function(){var is_node=typeof module=="object"&&module.exports&&module.children;if(is_node);else;!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(4996),__webpack_require__(3787)],__WEBPACK_AMD_DEFINE_RESULT__=function(sprintf,conv){var E={};var ver_regexp=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;E._expand=function(ver){var v;if(!ver)return"";if(!(v=ver_regexp.exec(ver)))return;return sprintf("%03d.%03d.%03d",+v[1],+v[2],+v[3])};E.expand=conv.cache_str_fn(E._expand);E._trim=function(ver){var v;if(!ver)return"";if(!(v=ver_regexp.exec(ver)))return;return""+ +v[1]+"."+ +v[2]+"."+ +v[3]};E.trim=conv.cache_str_fn(E._trim);E._cmp=function(v1,v2){if(!v1||!v2)return+!!v1-+!!v2;var _v1=(""+v1).split("."),_v2=(""+v2).split("."),i;for(i=0;i<_v1.length&&i<_v2.length&&+_v1[i]==+_v2[i];i++);if(_v1.length==i||_v2.length==i)return _v1.length-_v2.length;return+_v1[i]-+_v2[i]};E.cmp=conv.cache_str_fn2(E._cmp);E._valid=function(v){return ver_regexp.test(""+v)};var version_valid_cache={};E.valid=function(v){var cache=version_valid_cache,res;v=""+v;if(v in cache)return cache[v];if(res=E._valid(v))cache[v]=res;return res};function iter_ver(version,cb){var v;if(!E.valid(version))return version;v=version.split(".");for(var i=v.length-1;i>=0&&!cb(v,i);i--);return v.join(".")}E.inc=function(version){return iter_ver(version,(function(v,i){if(v[i]<999){v[i]=+v[i]+1;return true}v[i]=0}))};E.dec=function(version){return iter_ver(version,(function(v,i){if(v[i]>0){v[i]=+v[i]-1;return true}v[i]=999}))};E.get_max=function(versions,cmp){var v,i;versions=versions.sort(cmp||function(v1,v2){return E.cmp(v2.version,v1.version)});for(i=0;i<versions.length;i++){v=versions[i];if(+v.isbranch||!+v.soft_tag||!+v.onsymbol||v.repository!="zon"||!E.valid(v.version)){continue}return v.version}};E.cmp_get_min=function(versions,cmp){if(versions.length<=0)return;return versions.sort(cmp?function(v1,v2){return-cmp(v1,v2)}:function(v1,v2){return-E.cmp(v2,v1)})[0]};E.hash=function(ver){return conv.md5("wQ"+ver+"\n",8)};E.ver2int=function(ver){var m=ver_regexp.exec(ver);return m&&+m[1]*1e6+ +m[2]*1e3+ +m[3]};E.int2ver=function(n){if(!n)return"";var n3=n%1e3;n=n/1e3|0;var n2=n%1e3;n=n/1e3|0;return n+"."+n2+"."+n3};E.get_major_minor=function(ver){return ver&&ver.replace(/^(\d+(\.\d+)?).*$/,"$1")};E.win_build2ver=function(v){if(!/^\d+\.\d+/.test(v))v="0.0";var vv=v.split(".");var ver=+vv.slice(0,2).join(".");var build=vv.length>=3?+vv[2]:0;return ver>=10&&build>=21996?"v11":ver>=10?"v10":ver>=6.3?"v8.1":ver>=6.2?"v8":ver>=6.1?"v7":ver>=6?"vista":ver>=5.2?"xp":"other"};return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},9824:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var module;
// LICENSE_CODE ZON ISC
"use strict";(function(){var process,cluster;var is_node=typeof module=="object"&&module.exports&&module.children;if(!is_node){process={env:{}}}else{if(is_node){process=global.process||require("_process");require("./config.js");cluster=require("cluster");var worker_threads={isMainThread:true};try{worker_threads=require("worker_threads")}catch(e){}var version=require("./version.js").version}}!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(6545),__webpack_require__(932),__webpack_require__(1291),__webpack_require__(4996),__webpack_require__(5317),__webpack_require__(4336)],__WEBPACK_AMD_DEFINE_RESULT__=function(array,date,zutil,sprintf,rate_limit,zescape){var E,_zerr;var env=process.env;var zerr=function(msg){_zerr(L.ERR,arguments)};E=zerr;E.zerr=zerr;var L=E.L={EMERG:0,ALERT:1,CRIT:2,ERR:3,WARN:4,NOTICE:5,INFO:6,DEBUG:7};var perr_pending=[];var LINV=E.LINV={};for(var k in L)LINV[L[k]]=k;["debug","info","notice","warn","err","crit"].forEach((function(l){var level=L[l.toUpperCase()];E[l]=function(){return _zerr(level,arguments)}}));E.assert=function(exp,msg){if(!exp)zerr.crit(msg)};E.json=function(o,replacer,space){try{return JSON.stringify(o,replacer,space)||""}catch(e){return"[circular]"}};E.is=function(level){return level<=E.level};["debug","info","notice","warn","err"].forEach((function(l){var level=L[l.toUpperCase()];E.is[l]=function(){return level<=E.level}}));E.perr=function(id,info,opt){E._zerr(!opt||opt.level===undefined?L.ERR:opt.level,["perr "+id+" "+E.json(info)]);if(perr_pending&&perr_pending.length<100)perr_pending.push(Array.from(arguments))};var perr_hooks=[];E.add_perr_hook=perr_hooks.push.bind(perr_hooks);var perr_dropped={};var perr_orig=E.perr;function wrap_perr(perr_fn){var send=perr_fn,pre_send;if(typeof perr_fn!="function"){send=perr_fn.send;pre_send=perr_fn.pre_send}return function(id,info,opt){opt=opt||{};var _rate_limit=opt.rate_limit||{};var ms=_rate_limit.ms||date.ms.HOUR,count=_rate_limit.count||10;var disable_drop_count=_rate_limit.disable_drop_count;var rl_hash=perr_orig.rl_hash=perr_orig.rl_hash||{};var rl=rl_hash[id]=rl_hash[id]||{};var level=opt.level===undefined?L.ERR:opt.level;if(pre_send)pre_send(id,info,opt);perr_hooks.filter((function(h){return h.ids.test(id)})).forEach((function(h){h.fn(id,info,opt)}));if(opt.rate_limit===false||rate_limit(rl,ms,count)){if(perr_dropped[id]){if(!disable_drop_count&&info&&typeof info!="string")info.w=perr_dropped[id];perr_dropped[id]=null}return send(id,info,opt)}perr_dropped[id]=(perr_dropped[id]||0)+1;if(info&&typeof info!="string")info=zerr.json(info);E._zerr(level,["perr %s %s rate too high %s %d %d",id,info,zerr.json(rl),ms,count])}}E.perr_install=function(install_fn){E.perr=wrap_perr(install_fn(perr_orig,perr_pending||[]));perr_pending=null};function err_has_stack(err){return err instanceof Error&&err.stack}E.e2s=function(err){if(!is_node&&err_has_stack(err)){var e_str=""+err,e_stack=""+err.stack;return e_stack.startsWith(e_str)?e_stack:e_str+" "+e_stack}return err_has_stack(err)?""+err.stack:""+err};E.on_exception=undefined;var in_exception;E.set_exception_handler=function(prefix,err_func){E.on_exception=function(err){if(!(err instanceof TypeError||err instanceof ReferenceError)||err.sent_perr||err.message=="Failed to fetch"){return}if(in_exception)return;in_exception=1;err.sent_perr=true;err_func((prefix?prefix+"_":"")+"etask_typeerror",null,err);in_exception=0}};E.on_unhandled_exception=undefined;E.catch_unhandled_exception=function(func,obj){return function(){var args=arguments;try{return func.apply(obj,Array.from(args))}catch(e){E.on_unhandled_exception(e)}}};E.set_level=function(level){var prev="L"+LINV[E.level];level=level||env.ZERR;if(!level)return prev;var val=L[level]||L[level.replace(/^L/,"")];if(val!==undefined)E.level=val;return prev};E.get_stack_trace=function(opt){if(!opt)opt={};if(opt.limit===undefined)opt.limit=Infinity;if(opt.short===undefined)opt.short=true;var old_stack_limit=Error.stackTraceLimit;if(opt.limit)Error.stackTraceLimit=opt.limit;var stack=zerr.e2s(new Error);if(opt.limit)Error.stackTraceLimit=old_stack_limit;if(opt.short){stack=stack.replace(/^.+util\/etask.+$/gm,"    ...").replace(/( {4}\.\.\.\n)+/g,"    ...\n")}return stack};E.log=[];E.log.max_size=200;E.log_tail=function(size){return(E.log||[]).join("\n").substr(-(size||4096))};function log_tail_push(msg){E.log.push(msg);if(E.log.length>E.log.max_size)E.log.splice(0,E.log.length-E.log.max_size/2)}var zerr_format=function(args){return args.length<=1?args[0]:sprintf.apply(null,args)};var email_pattern=/[A-Za-z0-9_.-]+(@|%40)[A-Za-z0-9.-]+/gm;E.hide_sensitive=function(msg){if(Array.isArray(msg))return msg.map((function(m){return E.hide_sensitive(m)}));if(typeof msg!="string"&&!(msg instanceof String))return msg;if(!msg.includes("@")&&!msg.includes("%40"))return msg;return msg.replace(email_pattern,zescape.hide_email)};if(is_node){E.ZEXIT_LOG_DIR=env.ZEXIT_LOG_DIR||"/tmp/zexit_logs";E.prefix="";E.prefix_fn=null;E.level=L.NOTICE;E.flush=function(){};E.set_log_buffer=function(on){if(!on){if(E.log_buffer){E.flush();E.log_buffer(0)}return}E.log_buffer=require("log-buffer");E.log_buffer(32*1024);E.flush=function(){E.log_buffer.flush()};setInterval(E.flush,1e3).unref()};var node_init=function(){if(zutil.is_mocha()){E.level=L.WARN;return}E.prefix=(!cluster.isMaster?"C"+cluster.worker.id+" ":"")+(!worker_threads.isMainThread?"T"+worker_threads.threadId+" ":"")};var init=function(){if(is_node)node_init();E.set_level()};init();var __zerr=function(level,args){var k=Object.keys(L);var dyn_prefix;if(E.prefix_fn){args=Array.from(args);dyn_prefix=E.prefix_fn(level,args)}var prefix=(dyn_prefix||"")+(E.hide_timestamp?"":E.prefix+date.to_sql_ms()+" ");var msg=E.hide_sensitive(zerr_format(args));if(env.CURRENT_SYSTEMD_UNIT_NAME)prefix="<"+level+">"+prefix;var res=prefix+k[level]+": "+msg;console.error(res);log_tail_push(res)};E.set_logger=function(logger,no_buf){__zerr=function(level,args){var msg=E.hide_sensitive(zerr_format(args));logger(level,msg);if(!no_buf)log_tail_push(E.prefix+date.to_sql_ms()+": "+msg)}};E.get_logger=function(){return __zerr};_zerr=function(level,args){if(level>E.level)return;__zerr(level,args)};E._zerr=_zerr;E.zexit=function(args){var stack;if(err_has_stack(args)){stack=args.stack;__zerr(L.CRIT,[E.e2s(args)])}else{var e=new Error;stack=e.stack;__zerr(L.CRIT,arguments)}if((args&&args.code)!="ERR_ASSERTION")console.error("zerr.zexit was called",(new Error).stack);E.flush();if(process.zon&&process.zon.main){var LCRIT=2;var LCONSOLE=256;var emb_zutil=process.binding("zutil");emb_zutil.zerr(LCRIT|LCONSOLE,"perr node_zexit "+E.e2s(args));process.exit(1)}if(env.NODE_ENV=="production"){var conf=require("./conf.js");var zcounter_file=require("./zcounter_file.js");zcounter_file.inc("server_zexit");args=zerr_format(arguments);write_zexit_log({id:"lerr_server_zexit",info:""+args,ts:date.to_sql(),backtrace:stack,version,app:conf.app});E.flush()}debugger;process.exit(1)};var write_zexit_log=function(json){try{var file=require("./file.js");file.mkdirp(E.ZEXIT_LOG_DIR);file.write_atomic_e(E.ZEXIT_LOG_DIR+"/"+date.to_log_file()+"_zexit_"+process.pid+".log",E.json(json))}catch(e){E.zerr(E.e2s(e))}}}else{var chrome=self.chrome;E.log=[];var L_STR=E.L_STR=["EMERGENCY","ALERT","CRITICAL","ERROR","WARNING","NOTICE","INFO","DEBUG"];E.log.max_size=200;E.conf=self.conf;E.level=self.is_tpopup?L.CRITICAL:E.conf&&E.conf.zerr_level?L[self.conf.zerr_level]:L.WARN;var console_method=function(l){return l<=L.ERR?"error":!chrome?"log":l===L.WARN?"warn":l<=L.INFO?"info":"debug"};var logger_fn;_zerr=function(l,args){var s;try{var fmt=""+args[0];var fmt_args=Array.prototype.slice.call(args,1);s=(fmt+(fmt_args.length?" "+E.json(fmt_args):"")).substr(0,1024);var prefix=(E.hide_timestamp?"":date.to_sql_ms()+" ")+L_STR[l]+": ";if(E.is(l)){Function.prototype.apply.bind(console[console_method(l)],console)(E.hide_sensitive([prefix+fmt].concat(fmt_args)));if(logger_fn)logger_fn(l,E.hide_sensitive(zerr_format(args)))}log_tail_push(E.hide_sensitive(prefix+s))}catch(err){try{console.error("ERROR in zerr "+(err.stack||err),arguments)}catch(e){}}if(l<=L.CRIT)throw new Error(s)};E._zerr=_zerr;E.set_logger=function(logger){logger_fn=logger};var post=function(url,data){var use_xdr=typeof XDomainRequest=="function"&&!("withCredentials"in XMLHttpRequest.prototype);var req=use_xdr?new XDomainRequest:new XMLHttpRequest;req.open("POST",url);if(req.setRequestHeader){req.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")}req.send(zescape.qs(data));return req};var perr_transport=function(id,info,opt){opt=zutil.clone(opt||{});var qs=opt.qs||{},data=opt.data||{};data.is_json=1;if(info&&typeof info!="string")info=zerr.json(info);if(opt.err&&!info)info=""+(opt.err.message||zerr.json(opt.err));data.info=info;qs.id=id;if(!opt.no_zerr){zerr._zerr(opt.level,["perr "+id+(info?" info: "+info:"")+(opt.bt?"\n"+opt.bt:"")])}return post(zescape.uri(E.conf.url_perr+"/perr",qs),data)};var perr=function(perr_orig,pending){while(pending.length)perr_transport.apply(null,pending.shift());return perr_transport};E.perr_install(perr)}return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()},5513:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4850);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _util_util_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1291);var _util_util_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_util_util_js__WEBPACK_IMPORTED_MODULE_1__);var _util_zerr_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9824);var _util_zerr_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_util_zerr_js__WEBPACK_IMPORTED_MODULE_2__);var _util_etask_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6386);var _util_etask_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_util_etask_js__WEBPACK_IMPORTED_MODULE_3__);var _util_date_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(932);var _util_date_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_util_date_js__WEBPACK_IMPORTED_MODULE_4__);var _bext_vpn_ui_react_util_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2626);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5250);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6__);var _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6357);var _bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7345);var _bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8__);var _util_storage_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1032);var _util_storage_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_util_storage_js__WEBPACK_IMPORTED_MODULE_9__);var conf__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(9641);
// LICENSE_CODE ZON
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6___default().assert_ui("be_ui_context");const{SEC}=_util_date_js__WEBPACK_IMPORTED_MODULE_4___default().ms,{perr}=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"];const E={};const{CG}=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default();E.App_context=react__WEBPACK_IMPORTED_MODULE_0___default().createContext();E.Provider=class App_context_provider extends _bext_vpn_ui_react_util_js__WEBPACK_IMPORTED_MODULE_5__.Z.PureComponent{constructor(...args){super(...args);_defineProperty(this,"state",{enabled:true,is_tpopup:_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6___default().is_tpopup(),src_country:null,ip:null,rule:null,user:null,is_premium:false,is_ultra:false,trial:null,trial_state:null,is_trial_expired:null,trial_need_signin:null,is_watermark_small:false,is_watermark_popcorn:false,ten_min_trial_popup:false,banner_5minutes_left:false,banner_5minutes_left_timeout:false,mitm_dialog:null,url:"",root_url:"",redirects:[],busy_info:{},busy:false,error:false,inited:false,proxy_error:false,dev_mode:false,ext_conflict:false,incognito_allowed:false,no_permission:false,agree_ts:1,watermark_pos:null,is_onboarding_flow:false,onboarding_flow_country:"",is_blocked_by_av:false,set_watermark_pos:pos=>this.set_watermark_pos(pos),set_error:error=>this.setState({error}),force_trial_update:()=>this.update_trial(),hola_url:conf__WEBPACK_IMPORTED_MODULE_10__.url_site+"/"})}componentDidMount(){const _this=this;this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){this.catch((e=>{perr("be_ui_context_init_err",undefined,{err:e});_this.setState({error:e})}));if(!_this.props.tpopup_type&&_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_ext_active())_this.update_info();yield _this.update_url();yield _this.update_location();yield _this.update_enabled();yield _this.update_user();yield _this.update_trial();yield _this.update_mitm();yield _this.update_status();yield _this.update_conflict();yield _this.update_no_permission();yield _this.update_agree_ts();yield _this.update_suspended();yield _this.update_dev_mode();yield _this.update_rule();yield _this.update_proxy_error();yield _this.update_watermark_pos();yield _this.update_onboarding_flow();yield _this.update_onboarding_flow_country();_this.update_av_block();_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"url_changed",_this.update_url);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"location_changed",_this.update_location);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"enabled_changed",_this.update_enabled);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"trial_start trial_wait_start trial_wait_stop "+"trial_wait_end trial_change rule_changed svc_change "+"svc_info_changed",_this.update_trial);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"mitm_change rule_changed",_this.update_mitm);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"trial_end",_this.on_trial_end);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"user_changed",_this.update_user);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"rule_changed",_this.update_rule);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"ext_active_changed",_this.update_rule);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"ext_suspended_changed",_this.update_rule);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"status_changed",_this.update_status);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"set_tab_state",_this.on_tab_state);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"ext_conflict_changed",_this.update_conflict);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"no_permission_changed",_this.update_no_permission);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"agree_ts_changed",_this.update_agree_ts);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"ext_suspended_changed",_this.update_suspended);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"dev_mode_changed",_this.update_dev_mode);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"user_action_error",_this.on_user_action_error);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"tab_load_err",_this.update_proxy_error);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"is_blocked_by_av_changed",_this.update_av_block);_this.setState({inited:true,incognito_allowed:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].is_incognito_allowed(),hola_url:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_selected_url({name:"hola",url:conf__WEBPACK_IMPORTED_MODULE_10__.url_site+"/"})})})))}componentDidUpdate(prev_props,prev_state){let{state,props}=this;let changed_root_url=prev_state.root_url!=state.root_url;let changed_url=prev_state.url!=state.url;let changed_user=prev_state.user!=state.user;if(changed_root_url||changed_user){this.update_trial();this.update_mitm();this.update_rule()}if(changed_url)this.update_watermark_pos();if(!props.tpopup_type&&state.rule&&_util_util_js__WEBPACK_IMPORTED_MODULE_1___default().get(prev_state,"rule.country")!=_util_util_js__WEBPACK_IMPORTED_MODULE_1___default().get(state,"rule.country")){_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].trigger_bg("popup_open",state.rule)}if(prev_state.busy!=state.busy){this.clear_timer("busy_timer");this.clear_timer("very_busy_timer");if(state.busy&&!props.tpopup_type){this.set_timer("busy_timer",(()=>{perr("be_ui_vpn_busy_slow",state.busy_info);this.set_timer("very_busy_timer",(()=>{perr("be_ui_vpn_busy_very_slow",state.busy_info)}),13*SEC)}),7*SEC)}}}setState(state){return _util_etask_js__WEBPACK_IMPORTED_MODULE_3___default().cb_apply(super.setState,this,[state])}update_info(){_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].update_svc_info();_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].refresh_user({force_premium:true,reason:"popup_open"})}update_location(){const{country,ip}=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_location()||{};this.setState({src_country:country,ip});this.clear_timer("country_timer");if(country){if(this.no_country_perr_sent&&!this.props.tpopup_type)perr("be_ui_vpn_no_country_recover",{country},{err:true});return}if(!this.props.tpopup_type){this.set_timer("country_timer",(()=>{_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].no_country_perr();this.no_country_perr_sent=true}),3*SEC)}}update_rule(){let _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){let tab_id=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_tab_id(),url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_url();_this.setState({rule:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_enabled_rule({tab_id,url}),disabled_rule:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_disabled_rule({tab_id,url})})})))}update_proxy_error(){let _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){let tab_id=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_tab_id();let proxy_error=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_tab_load_err(tab_id);_this.setState({proxy_error})})))}update_mitm(){let _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){const root_url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_root_url();_this.setState({mitm_dialog:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_mitm_dialog(root_url)})})))}update_status(){let _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){const wait=300-(Date.now()-(_this.update_status_ts||0));if(wait>0)yield _util_etask_js__WEBPACK_IMPORTED_MODULE_3___default().sleep(wait);let s={busy_info:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_busy_info()};s.busy=s.busy_info.busy;_this.setState(s);_this.update_status_ts=Date.now()})))}on_tab_state(event){if(!["fix_vpn_err","set_rule_err"].includes(event.curr))return;this.setState({error:true});if(!this.props.tpopup_type)perr("be_ui_vpn_tab_state",{state:event})}on_user_action_error(event){if(!_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_enabled())return;perr("be_ui_user_action_error",undefined,{err:event});this.setState({error:true})}update_url(){let _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){let root_url_prev=_this.state.root_url;let url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_url(),root_url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_root_url();let redirects=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_redirect_urls();_this.setState({url,root_url,redirects});if(root_url_prev&&root_url_prev!=root_url&&!_this.props.tpopup_type){let info={root_url,root_url_prev,ext_enabled:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_ext_active(),ext_suspended:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_ext_suspended()};if(window.hola)info.t=Date.now()-window.hola.t.l_start;perr("be_ui_vpn_root_url_changed",info,{err:true})}})))}update_enabled(){this.setState({enabled:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_enabled()})}update_user(){let _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){let is_premium=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_is_premium();let is_ultra=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_is_ultra();let user=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_user();if(!user)return void _this.setState({user,is_premium,is_ultra});_this.setState({is_premium,is_ultra,user:{is_paid:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].is_paid(),display_name:user.displayName,verified:user.verified,hola_uid:user.hola_uid,no_log:user.no_log,email:_util_util_js__WEBPACK_IMPORTED_MODULE_1___default().get(user.emails,"0.value")}})})))}update_trial(){let _this=this;let _ten_min_trial_popup=this.state.ten_min_trial_popup;let _ten_min_trial_popup_slide=this.state.ten_min_trial_popup_slide;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){const root_url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_root_url();const user=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_user();const is_premium=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_is_premium();let trial=null,trial_state;let is_trial_expired=false;let need_trial=false;let trial_need_signin=false;let is_watermark_small=false;let is_watermark_popcorn=false;let is_watermark_hidden=false;let can_hide_watermark=false;let can_skip_signin=false;let is_unlimited_trial=false;let ten_min_trial_popup=false;let ten_min_trial_popup_slide="";let banner_5minutes_left=false;let banner_5minutes_left_timeout=false;let prices_per_week=false;if(!is_premium){trial=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_trial_active(root_url);trial_state=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_trial_active(root_url,true);is_trial_expired=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].is_trial_expired(root_url);need_trial=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].need_trial(root_url);trial_need_signin=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].trial_need_signin(root_url);is_watermark_small=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default().get_trial_conf(trial,"small_watermark");ten_min_trial_popup_slide=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default().get_trial_conf(trial,"ten_min_trial_popup_slide");const nonblock_slide=_util_storage_js__WEBPACK_IMPORTED_MODULE_9___default().get("nonblock_slide_"+ten_min_trial_popup_slide);ten_min_trial_popup=!nonblock_slide&&_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default().get_trial_conf(trial,"ten_min_trial_popup");is_watermark_popcorn=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default().get_trial_conf(trial,"popcorn_watermark");is_watermark_hidden=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default().get_trial_conf(trial,"is_watermark_hidden");banner_5minutes_left=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default().get_trial_conf(trial,"banner_5minutes_left");banner_5minutes_left_timeout=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default().get_trial_conf(trial,"banner_5minutes_left_timeout");can_hide_watermark=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].can_hide_watermark(root_url);can_skip_signin=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].can_skip_signin(root_url);is_unlimited_trial=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].is_unlimited_trial(root_url);prices_per_week=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default().get_trial_conf(trial_state,"prices_per_week")}let new_ui=(yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_trial_conf("new_ui"))||CG("debug.new_ui");_util_zerr_js__WEBPACK_IMPORTED_MODULE_2___default().notice("ui context update_trial root_url: %s, "+"user: %s, is_premium: %s, trial: %s, expired: %s, "+"trial_need_signin: %s, is_watermark_hidden: %s, "+"can_hide_watermark: %s, can_skip_signin: %s, "+"need_trial: %d, is_unlimited_trial: %s",root_url,!!user,is_premium,!!trial,is_trial_expired,trial_need_signin,is_watermark_hidden,can_hide_watermark,can_skip_signin,need_trial,is_unlimited_trial);_this.setState({trial,trial_state,is_trial_expired,need_trial,trial_need_signin,is_watermark_small,is_watermark_popcorn,is_watermark_hidden,can_hide_watermark,can_skip_signin,is_unlimited_trial,new_ui,ten_min_trial_popup,ten_min_trial_popup_slide,banner_5minutes_left,banner_5minutes_left_timeout,prices_per_week});if((_ten_min_trial_popup!=ten_min_trial_popup||_ten_min_trial_popup_slide!=ten_min_trial_popup_slide)&&ten_min_trial_popup){_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].set_tpopup_type("nonblock_popup")}})))}on_trial_end(){_util_zerr_js__WEBPACK_IMPORTED_MODULE_2___default().notice("ui context on_trial_end %s",this.state.root_url);const _this=this;this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){yield _this.update_trial();if(_this.state.is_premium){perr("be_ui_trial_end_on_premium",null,{err:true});return}if(!_this.state.trial&&_this.state.is_tpopup&&_this.props.tpopup_type!="watermark"){_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].set_tpopup_type("watermark")}})))}update_conflict(){this.setState({ext_conflict:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_ext_conflict()})}update_no_permission(){this.setState({no_permission:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_no_permission()})}update_agree_ts(){this.setState({agree_ts:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_agree_ts()})}update_suspended(){this.setState({suspended:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_ext_suspended()})}update_dev_mode(){this.setState({dev_mode:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_dev_mode()})}update_watermark_pos(){const _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){_this.setState({watermark_pos:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_watermark_pos(_this.state.url)})})))}update_onboarding_flow(){const _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){_this.setState({is_onboarding_flow:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_is_onboarding_flow(_this.state.url)})})))}update_onboarding_flow_country(){const _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){_this.setState({onboarding_flow_country:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_onboarding_flow_country(_this.state.url)})})))}update_av_block(){let blocked=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_is_blocked_by_av();this.setState({is_blocked_by_av:blocked});if(blocked)_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].verify_antivirus_block()}set_watermark_pos(pos){this.setState({watermark_pos:pos});_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].set_watermark_pos(this.state.url,pos)}render(){return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(E.App_context.Provider,{value:this.state},this.props.children)}};const __WEBPACK_DEFAULT_EXPORT__=E},8239:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _bext_vpn_ui_locale_en_json__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3846);var _util_etask_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6386);var _util_etask_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_util_etask_js__WEBPACK_IMPORTED_MODULE_1__);var _util_string_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5516);var _util_string_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_util_string_js__WEBPACK_IMPORTED_MODULE_2__);var _bext_pub_util_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7345);var _bext_pub_util_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_3__);var _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6357);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5250);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_5__);
// LICENSE_CODE ZON
const{qw}=_util_string_js__WEBPACK_IMPORTED_MODULE_2___default();const E=get_message;E.locale_curr=E.locale_en=_bext_vpn_ui_locale_en_json__WEBPACK_IMPORTED_MODULE_0__;E.locales=qw`af ar az be bg bn bs ca cs cy da de el es et eu fa fi fr ga gl
   gu he hi hr ht hu hy id is it ja ka km kn ko ku lt lv mk mr ms mt my nl no
   pl pt pt_BR ro ru sk sl sq sr sv sw ta te th tl tr uk ur vi zh_CN zh_TW en`;if(_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_3___default().browser()=="edge")E.locales=[];E.is_rtl=()=>/^(ar|he|fa|ur)$/.test(E.locale);E.set_locale=l=>{_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__["default"].set_storage_locale(l);window.location.reload()};function get_message(id,vals,locale){let s,msg=E.locale_curr[id]||_bext_vpn_ui_locale_en_json__WEBPACK_IMPORTED_MODULE_0__[id];if(locale)msg=E.locale==locale&&E.locale_curr[id]||_bext_vpn_ui_locale_en_json__WEBPACK_IMPORTED_MODULE_0__[id];if(!msg){if(false){}s=id}else s=msg;if(!vals)return s;for(let i=0;i<vals.length;i++)s=s.replace("$"+(i+1),vals[i]);return s}E.init=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_1___default()((function*(){let hola_locale=yield _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_5___default().get_hola_cookie("i18next");let storage_locale=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__["default"].get_storage_locale();let locale=storage_locale||hola_locale||"en";if(!E.locales.includes(locale)){let navlang=(navigator.language||"").replace("-","_");let choices=[navlang,navlang.substr(0,navlang.indexOf("_")),"en"];for(let i=0;i<choices.length;i++){if(E.locales.includes(choices[i])){locale=choices[i];break}}}E.locale=locale;if(E.locale=="en")return;__webpack_require__(1328)(`./${E.locale}.json`).then((locale_curr=>{E.locale_curr=locale_curr;this.continue()}),(err=>{_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_3___default().perr("be_lang_err",{locale:E.locale,err},{err});E.locale="en";this.continue()}));yield this.wait()}));const __WEBPACK_DEFAULT_EXPORT__=E},2626:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4850);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _util_zerr_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9824);var _util_zerr_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_util_zerr_js__WEBPACK_IMPORTED_MODULE_1__);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5250);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_2__);
// LICENSE_CODE ZON
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const E={};const LONG_CB_MS=500;E.PureComponent=class PureComponent extends react__WEBPACK_IMPORTED_MODULE_0___default().PureComponent{constructor(...args){super(...args);_defineProperty(this,"timers",{});_defineProperty(this,"events",{})}componentWillUnmount(){let t0=Date.now();let a=Object.keys(this.timers);a.forEach((name=>this.clear_timer(name)));a=Object.keys(this.events);a.forEach((event=>this.off(event)));if(this._componentWillUnmount)this._componentWillUnmount();let t1=Date.now();if(t1-t0>LONG_CB_MS){_util_zerr_js__WEBPACK_IMPORTED_MODULE_1___default().warn("long cb componentWillUnmount %s took %sms",this.displayName,t1-t0)}if(this.sp){this.sp.return();delete this.sp}}etask(task){let name=this.constructor.displayName||this.constructor.name;this.sp=this.sp||_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().new_etask("Component_"+name);this.sp.spawn(task);return task}has_timer(name){return!!this.timers[name]}set_timer(name,cb,ms){this.clear_timer(name);this.timers[name]={cb,ms,timer:_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().set_timeout((()=>this.on_timer(name)),ms)}}clear_timer(name){let t=this.timers[name];if(!t)return;_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().clear_timeout(t.timer);delete this.timers[name]}on_timer(name){let t=this.timers[name];if(!t)return _util_zerr_js__WEBPACK_IMPORTED_MODULE_1___default()("timer not found %s",name);try{let t0=Date.now();t.cb();let t1=Date.now();if(t1-t0>LONG_CB_MS){_util_zerr_js__WEBPACK_IMPORTED_MODULE_1___default().warn("long cb timer %s:%s took %sms",this.displayName,name,t1-t0)}}catch(e){_util_zerr_js__WEBPACK_IMPORTED_MODULE_1___default()("timer %s error %s",name,e)}this.clear_timer(name)}on(obj,event,cb,call_on_init){let _this=this;this.off(obj,event,cb);let e=this.events[event]=this.events[event]||{a:[]};let cb2=function(){let t0=Date.now();let ret=cb.apply(_this,arguments);let t1=Date.now();if(t1-t0>LONG_CB_MS){_util_zerr_js__WEBPACK_IMPORTED_MODULE_1___default().warn("long cb event %s:%s took %sms",_this.displayName,event,t1-t0)}return ret};e.a.push({obj,cb,cb2});obj.on(event,cb2);if(call_on_init)cb2()}off(obj,event,cb){if(event===undefined&&cb===undefined){event=obj;let e=this.events[event];if(!e)return;let a=Object.assign([],e.a);return a.forEach((ee=>this.off(ee.obj,event,ee.cb)))}_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().assert(event!=undefined&&cb!=undefined,new Error("invalid off params"));let e=this.events[event];if(!e)return;let i=e.a.findIndex((ee=>ee.cb===cb&&ee.obj===obj));if(i==-1)return;let ee=e.a.splice(i,1)[0];ee.obj.off(event,ee.cb2);if(!e.a.length)delete this.events[event]}};const __WEBPACK_DEFAULT_EXPORT__=E},6357:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var conf__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9641);var underscore__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8763);var underscore__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_1__);var _util_storage_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1032);var _util_storage_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_util_storage_js__WEBPACK_IMPORTED_MODULE_2__);var _util_util_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1291);var _util_util_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_util_util_js__WEBPACK_IMPORTED_MODULE_3__);var _util_etask_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6386);var _util_etask_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_util_etask_js__WEBPACK_IMPORTED_MODULE_4__);var _util_escape_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(4336);var _util_escape_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_util_escape_js__WEBPACK_IMPORTED_MODULE_5__);var _util_url_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5305);var _util_url_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_util_url_js__WEBPACK_IMPORTED_MODULE_6__);var _util_zerr_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(9824);var _util_zerr_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_util_zerr_js__WEBPACK_IMPORTED_MODULE_7__);var _util_date_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(932);var _util_date_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_util_date_js__WEBPACK_IMPORTED_MODULE_8__);var _util_array_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(6545);var _util_array_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_util_array_js__WEBPACK_IMPORTED_MODULE_9__);var _util_string_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(5516);var _util_string_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_util_string_js__WEBPACK_IMPORTED_MODULE_10__);var _svc_vpn_pub_common_ui_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4191);var _svc_vpn_pub_common_ui_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_svc_vpn_pub_common_ui_js__WEBPACK_IMPORTED_MODULE_11__);var _svc_account_pub_membership_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(6467);var _svc_account_pub_membership_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_svc_account_pub_membership_js__WEBPACK_IMPORTED_MODULE_12__);var _util_country_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2569);var _util_country_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_util_country_js__WEBPACK_IMPORTED_MODULE_13__);var _bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1211);var _bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14__);var _svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(843);var _svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15__);var _bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(7345);var _bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16__);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5250);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17__);var _protocol_pub_countries_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(3958);var _protocol_pub_countries_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(_protocol_pub_countries_js__WEBPACK_IMPORTED_MODULE_18__);var _bext_pub_backbone_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(6969);var _bext_pub_backbone_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(_bext_pub_backbone_js__WEBPACK_IMPORTED_MODULE_19__);var _bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(8239);var _util_version_util_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(6262);var _util_version_util_js__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(_util_version_util_js__WEBPACK_IMPORTED_MODULE_21__);
// LICENSE_CODE ZON
_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().assert_ui("be_ui_api");_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default().set_zerr(_util_zerr_js__WEBPACK_IMPORTED_MODULE_7___default());_util_zerr_js__WEBPACK_IMPORTED_MODULE_7___default().set_exception_handler("be",((id,info,err)=>perr(id,info,{err})));const E=new(_bext_pub_backbone_js__WEBPACK_IMPORTED_MODULE_19___default().model)({model_name:"ui_api"});const{assign}=Object,{root2url}=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default(),{qw}=_util_string_js__WEBPACK_IMPORTED_MODULE_10___default();const{chrome}=window,{CG}=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default(),{ms}=_util_date_js__WEBPACK_IMPORTED_MODULE_8___default();const{www_host}=conf__WEBPACK_IMPORTED_MODULE_0__;const v3=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().is_v3;const ping_bg_api=()=>{const et=_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default().wait();const ping=()=>_bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14___default().backbone.client.ping("bg_ui_api",500,(ret=>{if(ret.error){_util_zerr_js__WEBPACK_IMPORTED_MODULE_7___default()("ping bg failed %s",_util_zerr_js__WEBPACK_IMPORTED_MODULE_7___default().json(ret));ping()}else et.continue()}));ping();return et};const init_bg_api=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){let module;while(!(module=_bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14___default().backbone.client.start("bg_ui_api"))){_util_zerr_js__WEBPACK_IMPORTED_MODULE_7___default()(`bg_ui_api start failed, retrying`);yield _util_etask_js__WEBPACK_IMPORTED_MODULE_4___default().sleep(300)}const et=_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default().wait();const cb=()=>{if(!module.get("_backbone_client_started"))return;module.off("change:_backbone_client_started",cb);et.continue()};module.on_init("change:_backbone_client_started",cb);yield et;return module}));let _date_diff;let update_ts=server_time_ts=>{if(server_time_ts)_date_diff=server_time_ts-performance.now()};E.now=()=>{if(_date_diff&&_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().check_min_ver(CG("use_server_ts_min_ver")))return Math.round(performance.now()+_date_diff);return Date.now()};E.init=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){if(E.inited)return;E.inited=true;_bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14___default().init();yield ping_bg_api();E.bg_ui_api=yield init_bg_api();update_ts(yield E.get_server_ts());E.listenTo(E.bg_ui_api,"body_click",(e=>{if(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup()&&e.connection_id==E.get_connection_id())E.trigger("body_click")}));E.listenTo(E.bg_ui_api,"trial_end",(trial=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){if(yield E.trial_match_url(trial,E.get_url()))E.trigger("trial_end")}))));E.listenTo(E.bg_ui_api,"trial_wait_start",(trial=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){if(yield E.trial_match_url(trial,E.get_url()))E.trigger("trial_wait_start")}))));E.listenTo(E.bg_ui_api,"trial_wait_stop",(trial=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){if(yield E.trial_match_url(trial,E.get_url()))E.trigger("trial_wait_stop")}))));E.listenTo(E.bg_ui_api,"trial_wait_end",(trial=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){if(yield E.trial_match_url(trial,E.get_url()))E.trigger("trial_wait_end",trial)}))));E.listenTo(E.bg_ui_api,"trial_start",(trial=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){if(!(yield E.trial_match_url(trial,E.get_url())))return;if(yield E.get_trial_active(E.get_root_url()))E.trigger("trial_start")}))));E.listenTo(E.bg_ui_api,"trial_change",(trial=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){if(!trial||(yield E.trial_match_url(trial,E.get_url())))E.trigger("trial_change",trial)}))));E.listenTo(E.bg_ui_api,"mitm_change",(root_url=>{if(E.get_root_url()==root_url)E.trigger("mitm_change")}));E.listenTo(E.bg_ui_api,"tab_url_updated",((id,url)=>{if(!_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup()||!url||id!=E.get_tab_id()||url==_util_util_js__WEBPACK_IMPORTED_MODULE_3___default().get(window,"hola.tpopup_opt.url")){return}_util_util_js__WEBPACK_IMPORTED_MODULE_3___default().set(window,"hola.tpopup_opt.url",url);E.trigger("url_changed")}));E.listenTo(E.bg_ui_api,"local_time_change",(ts=>update_ts(ts)));E.listenTo(E.bg_ui_api,"active_url_changed",(e=>E.trigger("url_changed")));document.addEventListener("click",E.cancel_autoclose);const events=qw`force_trial mouseleave mouseenter url_changed
        tab_id_changed country_changed enabled_changed bg_main_inited
        user_changed membership_changed rule_changed ext_active_changed
        status_changed settings_changed tab_load_err vpn_status_changed
        svc_info_changed svc_version_changed protect_changed
        ext_conflict_changed agree_ts_changed dev_mode_changed set_tab_state
        location_changed ext_suspended_changed no_permission_changed
        bext_config_changed close_trial_suggestion trial_wait_start
        user_message_changed is_blocked_by_av_changed`;if(false){}events.forEach((event=>E.listenTo(E.bg_ui_api,event,((...args)=>E.trigger(event,...args)))));_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().set_ajax_cb((req=>E.perr_ajax(req)));_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().set_bext_config_cb((()=>E.get_bext_config()));_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().set_now_cb((()=>E.now()));_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().set_ab_test_report_cb(((...args)=>E.ab_test_report(...args)));yield _bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_20__.Z.init();if(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup()){_util_util_js__WEBPACK_IMPORTED_MODULE_3___default().set(window,"hola.tpopup_opt.url",yield E.get_tab_url(E.get_tab_id()))}else{E.force_bext_config_update();E.update_user_geo_block()}if(!_util_storage_js__WEBPACK_IMPORTED_MODULE_2___default().get("first_ui_show_ts")&&_util_version_util_js__WEBPACK_IMPORTED_MODULE_21___default().cmp(E.get_install_version(),"1.206.693")>=0){_util_storage_js__WEBPACK_IMPORTED_MODULE_2___default().set("first_ui_show_ts",Date.now());perr("be_ui_first_show")}E.update_full_browser_vpn_mode()}));E.uninit=()=>{if(!E.inited)return;_util_storage_js__WEBPACK_IMPORTED_MODULE_2___default().set("popup_close_ts",Date.now());E.inited=false;_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().set_ajax_cb(null);_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().set_bext_config_cb(null);for(let et of bg_et_active)et.return();bg_et_active=[];_bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14___default().backbone.client.stop("bg_ui_api");E.bg_ui_api=null;E.stopListening()};const perr=E.perr=(id,info,opt,new_name)=>wrap_etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){info=info||{};opt=opt||{};if(opt.with_log)opt={...opt,ui_log:_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().get_zerr_log()};let{err}=opt;let bt=opt.bt||err&&_util_zerr_js__WEBPACK_IMPORTED_MODULE_7___default().e2s(err);if(err&&err.hola_info){bt="status "+err.hola_info.status+" "+err.hola_info.method+" "+err.hola_info.url+" text "+(""+err.hola_info.response_text).substr(0,256)+bt}let trial_info;if(opt.add_trial_info&&(trial_info=yield E.get_trial_perr_info())){if(trial_info.timeline)opt.filehead=trial_info.timeline+"\n\n"+(opt.filehead||"");assign(info,{cycle_stats:trial_info.cycle_stats,trial_state:trial_info.state})}if(err&&err.etask)err=underscore__WEBPACK_IMPORTED_MODULE_1___default().omit(err,"etask");opt={...opt,is_tpopup:_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup(),err,bt};if(E.bg_ui_api){try{return yield wrap_etask(E.bg_ui_api.fcall("perr",[id,info,opt,new_name]))}catch(e){_util_zerr_js__WEBPACK_IMPORTED_MODULE_7___default()("bg perr failed "+_util_zerr_js__WEBPACK_IMPORTED_MODULE_7___default().e2s(e))}}return yield wrap_etask(_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().perr(id,info,opt,new_name))})));E.set_enabled=on=>{perr("be_ui_click_"+(on?"on":"off"));if(E.get_ext_conflict())return;E.bg_ui_api.fcall("set_enabled",[on])};E.login=(close,unblock_opt,force)=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){if(unblock_opt){yield E.unblock_after_login(assign({tab_id:E.get_tab_id()},unblock_opt))}E.open_login_popup({root_url:E.get_root_url(),force});if(close)E.close_popup()}));E.push_event=(name,opt)=>E.bg_ui_api.ecall("push_event",[name,opt]);E.close_popup=()=>{if(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup())E.close_tpopup();else window.close()};E.open_page=(url,curr_tab)=>{const{pathname,query}=_util_url_js__WEBPACK_IMPORTED_MODULE_6___default().parse(url);const is_hola_url=_util_url_js__WEBPACK_IMPORTED_MODULE_6___default().is_hola_url(url);const open_url=is_hola_url&&query?_util_url_js__WEBPACK_IMPORTED_MODULE_6___default().url_qs_encode_qid(url):url;if(["/ultra","/plus","/premium"].includes(pathname)){const qs=query&&_util_url_js__WEBPACK_IMPORTED_MODULE_6___default().qs_parse(query)||{};const info=_util_util_js__WEBPACK_IMPORTED_MODULE_3___default().pick(qs,"ref","plan_id");let rules=E.get_rules();info.rules_count=rules&&rules.unblocker_rules&&Object.keys(rules.unblocker_rules).length||0;perr("be_open_payment_page",info,{add_trial_info:true});E.open_payment_page(open_url);return}if(curr_tab)E.update_tab(E.get_tab_id(),open_url);else E.open_new_tab({url:open_url,force_active:true})};E.open_plus_page=(root_url,ref)=>{E.open_page(E.plus_ref(ref,{root_url}))};E.search_popular=url=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){yield E.set_force_suggestion(E.get_tab_id(),true);E.open_page(url,true);E.close_popup()}));E.open_popular=({root_url,src_country,country})=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){let url=root2url(root_url);if(!country){let popular=yield E.get_popular_countries({root_url,src_country});country=popular[0]}yield E.unblock_action({url,country});E.open_page(url,true);E.close_popup()}));E.open_ext_settings=()=>{E.open_new_tab({url:`chrome://extensions/?id=${chrome.runtime.id}`,force_active:true})};let force_trial=({url,root_url,tab_id,country,redirects,src})=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){const is_tpopup=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup();let close=true;this.finally((()=>{if(!is_tpopup&&close)E.close_popup()}));if(!is_tpopup&&(yield E.tpopup_is_connected(tab_id))){E.trigger_force_trial({country,tab_id});return this.return()}if(yield E.can_start_trial_silently(root_url)){try{if(yield E.start_trial(root_url)){yield bg_ui_api_call("unblock_action",{tab_id,url,country,src:src||"trial"});close=false;return}}catch(e){perr("be_ui_silent_trial_start_err",{root_url,country},{err:e})}}for(let r of redirects)yield E.set_site_storage(r,"force_trial",{country,tab_id,src});if(is_tpopup)return void E.set_tpopup_type("watermark");let active=E.get_root_url();if(redirects.some((r=>_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().is_same_site(r,active)))){return yield E.do_tpopup(tab_id,root_url)}E.open_page(root2url(root_url),true)}));let autoclose_t;E.schedule_autoclose=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){let autoclose_popup=yield E.get_trial_conf("autoclose_popup");if(autoclose_popup===false)return;E.cancel_autoclose();autoclose_t=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().set_timeout((()=>E.close_popup()),2e3)}));E.cancel_autoclose=()=>{_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().clear_timeout(autoclose_t)};E.unblock_action=opt=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){let tab_id=E.get_tab_id();let{url,country,disable,skip_trial}=opt;let root_url=_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(url);if(!E.get_ext_active()||E.get_ext_suspended()){perr("be_ui_vpn_set_enabled_mismatch");E.trigger("user_action_error");return}if(disable)perr("be_ui_vpn_stop",{root_url,country});if(false){}if(!disable&&(yield E.trial_need_signin(root_url))&&!_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().must_verify_email(E.get_user())){E.login(!_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup(),opt,true);return}try{let is_stub=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_stub_url(url,E.get_is_premium())&&!_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().full_browser_mode();if(!disable&&!is_stub&&!skip_trial&&(yield E.need_trial(root_url))){let redirects=[root_url];if(opt.redirects){for(let u of opt.redirects){let r=_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(u);if(r!=root_url)redirects.push(r)}}return yield force_trial({url,root_url,tab_id,country,redirects,src:opt.src})}if(!disable&&_util_storage_js__WEBPACK_IMPORTED_MODULE_2___default().get_int("auto_favorites"))E.add_favorite({root_url,country});yield bg_ui_api_call("unblock_action",{tab_id,...opt});perr("be_ui_vpn_script_set_ok",assign({tab_id,root_url},opt))}catch(e){perr("be_ui_vpn_script_set_err",assign({tab_id,root_url},opt),{err:e});E.trigger("user_action_error",e)}}));E.get_all_countries=()=>{let blacklist=CG("exclude_countries")||[];return _protocol_pub_countries_js__WEBPACK_IMPORTED_MODULE_18___default().proxy_countries.bext.filter((c=>c.toLowerCase()!="kp"&&!blacklist.includes(c.toLowerCase())))};E.is_premium_country=(country,trial_state)=>{if(E.get_is_premium()||!country)return false;return(_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().get_trial_conf(trial_state,"premium_countries2")||[]).includes(country.toLowerCase())};E.get_popular_ratings=({root_url,src_country})=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){if(!root_url)return _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().get_popular_country({});let rule_ratings=yield E.get_popup_rating_cache(root_url);if(!Array.isArray(rule_ratings)){try{let opt={root_url,src_country,limit:20,vpn_only:true};let rule=yield E.get_enabled_rule({tab_id:E.get_tab_id(),url:root2url(root_url)});if(rule&&rule.country)opt.proxy_country=rule.country;rule_ratings=yield E.get_rule_ratings(opt);yield E.set_popup_rating_cache(root_url,rule_ratings)}catch(e){perr("be_ui_vpn_rule_ratings_err",{root_url},{err:e})}}let invalid_countries=[];rule_ratings=Array.isArray(rule_ratings)&&rule_ratings.filter((r=>{let c=r.proxy_country.toUpperCase();if(_protocol_pub_countries_js__WEBPACK_IMPORTED_MODULE_18___default().proxy_countries.bext.includes(c))return true;invalid_countries.push(c)}));if(invalid_countries.length){perr("be_ui_vpn_rating_invalid_countries",{invalid_countries,rule_ratings},{rate_limit:{count:1}})}if(CG("disable_new_rule_ratings")){return _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().get_popular_country_old({host:root_url,rule_ratings})}return _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().get_popular_country({host:root_url,rule_ratings})}));const get_popular_by_ratings=({root_url,src_country,ratings,prev_country,suggested_countries})=>{let site_conf=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().get_site_conf(root_url);let suggestion_conf=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().get_suggestion_conf(site_conf,src_country);let suggested=((suggestion_conf||{}).proxy||[]).filter((c=>c!="*"));let popular=ratings.map((r=>r.proxy_country));let res=suggested.concat(popular.filter((p=>!suggested.includes(p))));if(prev_country){const elm=prev_country.toUpperCase();_util_array_js__WEBPACK_IMPORTED_MODULE_9___default().rm_elm(res,elm);res.unshift(elm)}if(suggested_countries&&res.length<suggested_countries.length){let limit=suggested_countries.length;res=res.concat(suggested_countries.map((c=>c.toUpperCase())).filter((c=>!res.includes(c)))).slice(0,limit)}return res};E.get_popular_countries=({root_url,src_country,prev_country})=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){let ratings=yield E.get_popular_ratings({root_url,src_country});let suggested_countries=yield E.get_trial_conf("suggested_countries");return get_popular_by_ratings({root_url,src_country,ratings,prev_country,suggested_countries})}));E.get_default_countries=({root_url,src_country,prev_country})=>{let ratings=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().get_popular_country({host:root_url});return get_popular_by_ratings({root_url,src_country,ratings,prev_country})};E.get_popular_sites=limit=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){let list=(yield E.get_unblocking_rate(limit||6))||[];let root_urls=list.map((p=>p.root_url));return{list,top_urls:root_urls}}));E.get_site_category=root_url=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){let list=(yield E.get_unblocking_rate(200))||[];let site=list.find((item=>item.root_url==root_url));return site&&site.category}));E.get_redirect_urls=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){if(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup())return[];let list,tab_id=E.get_tab_id();list=yield E.get_redirect_list(tab_id);if(!list||!list.length)return[];list=list.map(root2url).filter((u=>!_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_skip_url(u)));list.push(E.get_url());for(let url of list){if(yield E.get_force_premium_rule(_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(url),{tab_url:url})){return[]}}return list}));E.click_working=({src})=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){let url=E.get_url(),tab_id=E.get_tab_id();yield E.increment_vpn_work_yes();let rule=yield E.get_enabled_rule({tab_id,url});E.send_vpn_work_report({rule,src})}));E.click_not_working=p=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){let{src,send_logs,src_country,clean_cookie}=p;let url=E.get_url(),tab_id=E.get_tab_id();let root_url=_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(url);try{let rule=yield E.get_enabled_rule({tab_id,url});if(!rule){return void perr("be_ui_vpn_no_rule",{country:src_country,root_url,url})}if(clean_cookie)yield E.clean_cookies(rule.name,true);E.fix_vpn({rule,root_url,url,tab_id,src_country});E.trigger_not_working({tab_id,src});E.send_fix_it_report({rule,send_logs,src,clean_cookie})}catch(e){perr("be_ui_vpn_fix_it_err",{tab_id,root_url},{err:e});E.trigger("user_action_error",e)}}));E.click_star=rating=>{E.set_vpn_last_rating(rating);if(rating==5&&!E.get_rate_on_store())E.open_rate_us()};E.need_rating=()=>{if(E.get_is_premium()||E.get_rate_on_store())return false;let vpn_work_yes=E.get_vpn_work_yes()||0;let rating=E.get_vpn_last_rating()||0;let n=CG("rate_us.show_every_nth_click",3);return rating<5&&vpn_work_yes%n==1};E.get_force_premium_rule=(root_url,opt)=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){if(E.get_is_premium())return false;return yield E.bg_ui_api.ecall("get_force_premium_rule",[root_url,opt])}));E.tpopup_close_click=src=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){const type=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().get_tpopup_type();if(type=="watermark"||type=="suggestion")return void E.set_tpopup_type("watermark");const root_url=E.get_root_url();const period=E.get_is_premium()?"default":"session";yield E.set_dont_show_again({root_url,src,period,tab_id:E.get_tab_id(),type:null});E.close_tpopup(true)}));E.allow_skip_url=trial_state=>{let url=E.get_url();if(_util_url_js__WEBPACK_IMPORTED_MODULE_6___default().is_hola_url(url)){let stub_rule_on_hola_site=CG("stub_rule_on_hola_site")||_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().get_trial_conf(trial_state,"stub_rule_on_hola_site");if(stub_rule_on_hola_site)return true}return _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_new_tab(url)};E.set_locale=l=>{if(l==_bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_20__.Z.locale)return;perr("be_popup_lang",{locale:l},{rate_limit:{count:20}});_bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_20__.Z.set_locale(l)};E.get_locale=()=>_bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_20__.Z.locale;E.get_locales=()=>_bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_20__.Z.locales;E.resize_tpopup=opt=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){try{return yield E.bg_ui_api.ecall("resize_tpopup",[E.get_connection_id(),opt])}catch(e){console.error("resize_tpopup err %o",e)}}));E.show_tpopup=()=>E.bg_ui_api.ecall("show_tpopup",[E.get_connection_id()]);E.close_tpopup=hide_anim=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){if(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().get_tpopup_mode()=="window")return window.close();if(hide_anim){document.body.classList.add("hide_anim");yield _util_etask_js__WEBPACK_IMPORTED_MODULE_4___default().sleep(1e3)}if(E.bg_ui_api)E.bg_ui_api.ecall("close_tpopup",[E.get_connection_id()]);else _util_zerr_js__WEBPACK_IMPORTED_MODULE_7___default()("cannot close tpopup: no bg_ui_api")}));E.no_country_perr=()=>{perr("be_ui_vpn_no_country",{url:E.get_url(),be_info:{country:E.get_country(),location:E.get_location()},status:{rmt:E.get_bg_main_status()+" "+(E.get_bg_main_inited()?"inited":"not_inited"),be_vpn:E.get_vpn_status(),be_rule:E.get_rule_status(),be_info:E.get_info_status()}})};E.is_busy=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){return(yield E.get_busy_info()).busy}));E.get_busy_info=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){let info={rule_status_opt:E.get_rule_status_opt(),rule_busy:E.get_rule_status()=="busy",ext_busy:E.get_info_status()=="busy",main_busy:E.get_bg_main_status()=="busy",svc_busy:E.get_svc_status()=="busy"};info.tab_state=yield E.get_tab_state(E.get_tab_id());info.stoppping=_util_util_js__WEBPACK_IMPORTED_MODULE_3___default().get(info.rule_status_opt,"desc","").includes("Stopping")||info.tab_state=="disable_rule";info.error=info.tab_state&&info.tab_state.includes("err");info.busy=info.ext_busy||info.main_busy||E.get_enabled()&&!info.error&&!info.stoppping&&(info.tab_state!="idle"||info.rule_busy||info.svc_busy);return info}));E.reload_ext=(opt,force)=>{const do_reload=()=>{_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().set_timeout((()=>{try{_util_zerr_js__WEBPACK_IMPORTED_MODULE_7___default().notice("going for full reload")}catch(e){}_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().reload_ext_native()}),500)};if(_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().reload_ext(do_reload,force?100:ms.DAY)){perr("be_popup_reload_ext","r."+opt.info,{rate_limit:{count:20},err:new Error("")})}};E.send_issue_report=info=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){try{info.bg_log=yield E.get_log()}catch(e){info.bg_log_err=e}perr("be_issue_report",info)}));E.get_problem_mailto_url=opt=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){opt=opt||{};const info=yield E.get_product_info();return _util_escape_js__WEBPACK_IMPORTED_MODULE_5___default().mailto_url({to:opt.to||"help_be@"+www_host,subject:"Problem with Hola extension",body:"(Please include a brief explanation of the problem and "+"a screenshot if possible)\n\n"+"Information automatically generated about my problem:\n"+info.map((item=>`${item.name}: ${item.value}`)).join("\n")})}));E.aj_event=id=>{perr(id)};E.get_connection_id=()=>_util_util_js__WEBPACK_IMPORTED_MODULE_3___default().get(window,"hola.tpopup_opt.connection_id");E.set_tpopup_type=type=>E.trigger("set_tpopup_type",type);E.get_trial_left=trial=>trial?Math.max(trial.expire_ts-E.now(),0):0;E.get_root_url=()=>_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(E.get_url())||"";E.get_url=()=>_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup()?_util_util_js__WEBPACK_IMPORTED_MODULE_3___default().get(window,"hola.tpopup_opt.url"):E.get_active_tab_url()||"";E.get_tab_id=()=>_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup()?_util_util_js__WEBPACK_IMPORTED_MODULE_3___default().get(window,"hola.tpopup_opt.tab_id"):E.get_active_tab_id();E.reload_tab=tab_id=>E.reload_tab_by_id(tab_id||E.get_tab_id());E.is_tab_active=()=>E.get_active_tab_id()==E.get_tab_id();E.get_timings=()=>{const res={};if(!performance.getEntriesByType)return res;for(let item of performance.getEntriesByType("mark"))res[item.name+"_ms"]=Math.round(item.startTime);return res};E.get_vpn_tpopup_initial_size=()=>({width:360,height:545});E.plus_ref=(ref,extra,ultra)=>{extra=assign({},extra);let rules=E.get_rules();if(extra.root_url){let is_active=rules&&underscore__WEBPACK_IMPORTED_MODULE_1___default().some(rules.unblocker_rules,(rule=>rule.enabled&&(rule.name==extra.root_url||_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_all_browser(rule))));if(!is_active)delete extra.root_url}ref=(E.get_ref_prefix()||"")+(ref||"");return _util_escape_js__WEBPACK_IMPORTED_MODULE_5___default().uri(E.hola_url()+(ultra?"/ultra":"/plus"),assign({ref,uuid:E.get_uuid()},extra))};E.is_fullscreen=()=>_util_util_js__WEBPACK_IMPORTED_MODULE_3___default().get(window,"hola.tpopup_opt.fullscreen");const get_watermark_pos_key=(url,pos_conf)=>{if(!url||!pos_conf)return;if(E.is_fullscreen()&&pos_conf.fullscreen)return"fullscreen";let pathname=_util_url_js__WEBPACK_IMPORTED_MODULE_6___default().parse(url).pathname;let keys=Object.keys(pos_conf);for(let key of keys){let re=_util_url_js__WEBPACK_IMPORTED_MODULE_6___default().http_glob_host(key);if(new RegExp("^"+re+"$").test(pathname))return key}};E.get_is_onboarding_flow=url=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){let root_url=_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(url);let is_onboarding_flow=yield E.get_site_storage(root_url,"is_onboarding_flow")||false;return is_onboarding_flow}));E.get_onboarding_flow_country=url=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){let root_url=_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(url);let onboarding_flow_country=yield E.get_site_storage(root_url,"onboarding_flow_country")||"";return onboarding_flow_country}));E.get_watermark_pos=url=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){let root_url=_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(url);let pos;let pos_conf=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().get_site_conf(root_url,"watermark.pos")||{};let pos_key=get_watermark_pos_key(url,pos_conf);if(pos_key&&(pos=yield E.get_site_storage(root_url,`${pos_key}_watermark_pos`))){return pos}if(pos_key&&(pos=pos_conf[pos_key]))return pos;if(pos=yield E.get_site_storage(root_url,"watermark_pos"))return pos;if(pos=pos_conf.default)return pos;if(pos=_util_storage_js__WEBPACK_IMPORTED_MODULE_2___default().get("default_watermark_pos"))return pos;return CG(`geo_popup.watermark.position`)||"bottom_right"}));E.set_watermark_pos=(url,pos)=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){let root_url=_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(url);let pos_conf=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().get_site_conf(root_url,"watermark.pos")||{};let pos_key=get_watermark_pos_key(url,pos_conf);yield E.set_site_storage(root_url,pos_key?`${pos_key}_watermark_pos`:"watermark_pos",pos)}));E.request_permission=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){let res=yield _util_etask_js__WEBPACK_IMPORTED_MODULE_4___default().cb_apply(chrome.permissions.request,[{origins:[v3?"*://*/*":"<all_urls>"]}]);perr(res?"be_request_permission_allowed":"be_request_permission_denied")}));E.trigger_bg=(...args)=>E.bg_ui_api&&E.bg_ui_api.ecall("trigger",[...args]);let render_perr_sent=false;E.send_render_stats=()=>{if(render_perr_sent)return;let count=(_util_storage_js__WEBPACK_IMPORTED_MODULE_2___default().get_int("ui_popup_render_count")||0)+1;_util_storage_js__WEBPACK_IMPORTED_MODULE_2___default().set("ui_popup_render_count",count);let err=window.hola.err,info=E.get_timings();_util_util_js__WEBPACK_IMPORTED_MODULE_3___default().if_set(_util_util_js__WEBPACK_IMPORTED_MODULE_3___default().get(err,"require"),info,"require");_util_util_js__WEBPACK_IMPORTED_MODULE_3___default().if_set(count,info,"count");let is_tpopup=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup();let url=E.get_url(),root_url=_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(url);perr("be_popup_render"+(info.popup_render_ms>4e3?"_slow":""),info);if(is_tpopup)perr("be_tpopup_open",{root_url,url});else E.set_has_opened_popup();E.push_event(is_tpopup?"tpopup_render":"popup_render",{url});render_perr_sent=true};E.get_payment_conf=trial_state=>{if(!trial_state)return CG("payment",{});let trial_payment_conf=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().get_trial_conf(trial_state,"payment",{});if(!trial_payment_conf)return CG("payment",{});return assign({},CG("payment"),trial_payment_conf)};const prev_ab_state={};const get_replace_plan=(plans_ab_tests,replace_plans_from)=>{if(!plans_ab_tests)return;if(replace_plans_from){const ab_test=plans_ab_tests[replace_plans_from];if(ab_test&&ab_test.enabled)return ab_test.replace}_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){prev_ab_state.ab_state=yield E.get_ab_states()}));for(const k in prev_ab_state.ab_state){const ab_test=plans_ab_tests[k];if(ab_test&&ab_test.enabled&&prev_ab_state.ab_state[k]=="on")return ab_test.replace}};E.get_plans=(src,trial_state,opt={})=>{let payment_conf=E.get_payment_conf(trial_state);let plan_ids;if(typeof src=="string"){plan_ids=src=="ext_popup"?payment_conf.ext_popup_plan_ids:src=="wm_popup"?payment_conf.wm_popup_plan_ids:src=="wm_banner"?payment_conf.wm_banner_plan_ids:payment_conf.plan_ids;plan_ids=plan_ids||payment_conf.plan_ids}else{let trial_plans=opt.mm_plans?payment_conf.mm_plan_ids:payment_conf.trial_plan_ids;plan_ids=src?trial_plans:payment_conf.watermark_plan_ids}plan_ids=plan_ids||["3y","1y","1m"];let all_plans=payment_conf.all_plans||[{period:"1 M",id:"1m",price:11.95},{period:"1 Y",id:"1y",price:83.88}];const replace_plan=get_replace_plan(payment_conf.plans_ab_tests,payment_conf.replace_plans_from);const plans=_svc_vpn_pub_common_ui_js__WEBPACK_IMPORTED_MODULE_11___default().fill_plans_info(plan_ids,all_plans,{replace_plan});if(replace_plan)plans.sort(((a,b)=>a.day_price-b.day_price));if(payment_conf.sorting_ext){plans.sort(((a,b)=>{const a_pos=payment_conf.sorting_ext.indexOf(a.id);const b_pos=payment_conf.sorting_ext.indexOf(b.id);return a_pos-b_pos}))}return plans};E.get_best_plan=plans=>underscore__WEBPACK_IMPORTED_MODULE_1___default().min(plans,(p=>p.month_price==null?undefined:p.month_price));E.get_popular_plan=(trial_state,plans)=>{let payment_conf=E.get_payment_conf(trial_state);let popular=payment_conf&&payment_conf.popular_plan;return popular&&plans.find((p=>p.id==popular))};E.get_bonus_plan=()=>{let plan_ids=[CG("payment.bonus_plan_id")||"1y"].concat(CG("payment.trial_plan_ids",["3y","1y","1m"]));let all_plans=CG("payment.all_plans",[{period:"1 Y",id:"1y",price:83.88}]);return _svc_vpn_pub_common_ui_js__WEBPACK_IMPORTED_MODULE_11___default().fill_plans_info(plan_ids,all_plans,{replace_plan:get_replace_plan(CG("payment.plans_ab_tests"))})[0]};let canvas;const get_text_width=(text,font)=>{if(!text)return 0;canvas=canvas||document.createElement("canvas");let context=canvas.getContext("2d");context.font=font;let metrics=context.measureText(text);return Math.ceil(metrics.width)};E.get_font_size=(text,style,max_width)=>{let font_size=parseInt(style.fontSize,10);let width=get_text_width(text,`${style.fontWeight} ${style.fontSize} ${style.fontFamily}`);return width>max_width?Math.floor(font_size*max_width/width):font_size};E.format_price=(price,currency)=>_util_country_js__WEBPACK_IMPORTED_MODULE_13___default().format_price(currency,(price||0).toFixed(2));E.time2str=(t,round_days,short)=>{let n,str;if(t<ms.MIN){n=Math.round(t/ms.SEC);str=short?"sec":"second"}else if(t<ms.HOUR){n=Math.round(t/ms.MIN);str=short?"min":"minute"}else if(!round_days||t<ms.DAY){n=Math.round(t/ms.HOUR);str=short?"h":"hour"}else{n=Math.round(t/ms.DAY);str=short?"d":"day"}if(n!=1&&!short)str+="s";return`${n} ${str}`};E.get_user_currency=src_country=>{let currency=(_util_country_js__WEBPACK_IMPORTED_MODULE_13___default().code2currency(src_country||"")||"").toLowerCase();return _svc_account_pub_membership_js__WEBPACK_IMPORTED_MODULE_12___default().get_plan_currency(E.get_plans()[0],currency)};E.get_local_price=(user_currency,plan)=>{let{price,month_price,week_price,regular_price,discount_percent}=plan;let prefix="$";let local_price=user_currency&&plan.currency&&plan.currency[user_currency.toLowerCase()];if(local_price&&local_price.price){price=local_price.price;week_price=local_price.week_price;month_price=local_price.month_price;regular_price=local_price.regular_price;discount_percent=local_price.discount_percent;prefix=_util_country_js__WEBPACK_IMPORTED_MODULE_13___default().currency2prefix(user_currency).toUpperCase()}return{price,week_price,month_price,regular_price,prefix,discount_percent}};E.need_trial_dialog=root_url=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){return _bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().check_min_ver(CG("ext_trial_dialog_min_ver"))&&(yield E.need_trial(root_url))&&(yield E.is_trial_expired(root_url))&&!(yield E.trial_need_signin(root_url))}));E.hola_hostname=()=>{if(CG("disable_hola_hostname_fallback"))return www_host;return E.get_hola_conn_hostname()||www_host};E.hola_url=()=>"https://"+E.hola_hostname();E.is_signup_bonus_allowed=()=>!E.get_user()&&!_util_util_js__WEBPACK_IMPORTED_MODULE_3___default().get(E.get_uuid_info(),"has_user");E.start_survey=survey_id=>{_util_storage_js__WEBPACK_IMPORTED_MODULE_2___default().set("survey_start_ts",E.now());E.open_page(`https://${www_host}/survey/${survey_id}`)};E.ui_show=ui_name=>{if(!ui_name||!CG("ui_events.ui_show.enabled"))return;const rate_limit=CG("ui_events.ui_show.rate_limit");perr("be_ui_show",{ui_name},{rate_limit})};E.ui_click=(ui_name,cta_name)=>{if(!ui_name||!cta_name||!CG("ui_events.ui_click.enabled"))return;const rate_limit=CG("ui_events.ui_click.rate_limit");perr("be_ui_click",{ui_name,cta_name},{rate_limit})};E.ui_hover=(ui_name,cta_name)=>{if(!ui_name||!cta_name||!CG("ui_events.ui_hover.enabled"))return;const rate_limit=CG("ui_events.ui_hover.rate_limit");perr("be_ui_hover",{ui_name,cta_name},{rate_limit})};E.get_favorites=()=>{let items=_util_storage_js__WEBPACK_IMPORTED_MODULE_2___default().get_json("favorite_sites");items=Array.isArray(items)?items:[];items=items.filter((item=>item.root_url));return items};E.add_favorite=({root_url,country})=>{const favorites=E.get_favorites().slice();favorites.push({root_url,country});_util_storage_js__WEBPACK_IMPORTED_MODULE_2___default().set_json("favorite_sites",favorites);return favorites};E.del_favorite=root_url=>{const favorites=E.get_favorites().filter((site=>site.root_url!=root_url));_util_storage_js__WEBPACK_IMPORTED_MODULE_2___default().set_json("favorite_sites",favorites);return favorites};const bg_attributes=qw`is_premium is_ultra ext_active enabled bext_config
    uuid active_tab_url active_tab_id rules user membership
    vpn_last_rating rate_on_store country location user_id ref_prefix
    dev_mode agree_ts ext_conflict svc_info svc_version
    vpn_status rule_status rule_status_opt
    info_status svc_status bg_main_status bg_main_inited vpn_work_yes
    rate_us_count ext_suspended no_permission uuid_info hola_conn_hostname
    install_ts install_version is_blocked_by_av`;bg_attributes.forEach((attr=>E["get_"+attr]=()=>E.bg_ui_api&&E.bg_ui_api.get(attr)));let bg_functions=qw`get_tab_load_err get_enabled_rule send_vpn_work_report
    send_fix_it_report trigger_not_working set_dont_show_again
    get_dont_show_rules is_dont_show get_rule_ratings fix_vpn set_rule
    fetch_rules rule_task_cancel_all force_bext_config_update
    stop_vpn pause_videos resume_videos
    close_tab_tpopup get_trial_active set_trial
    get_trial_wait get_next_trial_ts
    move_trial_time is_trial_expired get_trials_info refresh_user
    refresh_anonymous logout resend_verification_email set_vpn_last_rating
    get_redirect_list mitm_set_ignore mitm_set_unblock mitm_remove_rule
    set_login_redirect set_email_verify_url get_mitm_rules
    get_unblocking_rate_url get_unblocking_rate set_dev_mode update_svc_info
    is_paid set_enabled_for_browser get_disabled_rule
    tpopup_is_connected hola_api_call perr_ajax
    bg_vpn_recover set_agree_ts bg_main_recover open_new_tab
    open_be_tab open_rate_us open_web_store update_tab get_log
    set_force_suggestion do_tpopup vpn_change_agent trigger_force_trial
    need_trial get_force_premium_rules increment_vpn_work_yes get_tab_state
    get_product_info reset_trial is_incognito_allowed trial_match_url
    set_rate_us_count is_verified get_site_storage set_site_storage
    get_popup_rating_cache set_popup_rating_cache need_upgrade_msg
    click_upgrade init_monitor_active uninit_monitor_active set_dbg_conf
    get_dbg_conf reset_rate_us get_storage_locale set_storage_locale
    open_login_popup get_tab_url
    trial_need_signin get_trial_period get_last_trial_end_ts
    get_server_ts get_total_cycle_time get_used_cycle_time
    get_remaining_cycle_time get_trial_perr_info get_selected_url
    trial_start_wait trial_stop_wait is_trial_wait_ended
    trial_hide_watermark can_hide_watermark can_skip_signin skip_signin
    get_used_trial_time close_bonus_tooltip get_debug_peer_info change_peer
    get_mitm_dialog reload_tab_by_id focus_on_tab set_has_opened_popup
    need_ext_pin_tip shown_ext_pin_tip
    is_unlimited_trial debug_set_install_ts debug_set_install_ver
    update_full_browser_vpn_mode can_start_trial_silently
    start_trial dev_get dev_set dev_force_tpopup is_user_geo_blocked
    get_trial_conf update_user_geo_block clean_cookies
    get_suggested_survey_id notify_survey_suggested ab_test_report
    refresh_icon reset_uuid unblock_after_login
    get_ab_states open_payment_page close_nonblock_slide fix_ext_conflict
    check_ext_conflict enable_full_browser_fallback verify_antivirus_block`;if(false){}const bg_et_parent=conf__WEBPACK_IMPORTED_MODULE_0__.firefox_web_ext&&qw`get_unblocking_rate
    unblock_action set_trial get_trial_perr_info check_unblockig_rate
    get_tpopup_opt`;let bg_et_active=[];const wrap_etask=(e,name)=>_util_etask_js__WEBPACK_IMPORTED_MODULE_4___default()((function*(){if(!e)return;if(!conf__WEBPACK_IMPORTED_MODULE_0__.firefox_web_ext)return yield e;this.on("finally",(()=>{let idx=bg_et_active.indexOf(this);if(idx!=-1)bg_et_active.splice(idx,1)}));e.spawn_parent(this);bg_et_active.push(this);return yield e}));const bg_ui_api_call=(f,...args)=>{let e=E.bg_ui_api&&E.bg_ui_api.ecall(f,[...args]);if(bg_et_parent&&bg_et_parent.includes(f)&&e&&e.constructor&&e.constructor.name=="Etask"){return wrap_etask(e,f)}return e};bg_functions.forEach((f=>E[f]=(...args)=>bg_ui_api_call(f,...args)));const __WEBPACK_DEFAULT_EXPORT__=E},2075:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var conf__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9641);var underscore__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8763);var underscore__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_1__);var react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4850);var react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);var classnames__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(793);var classnames__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__);var _util_storage_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1032);var _util_storage_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_util_storage_js__WEBPACK_IMPORTED_MODULE_4__);var _util_util_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1291);var _util_util_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_util_util_js__WEBPACK_IMPORTED_MODULE_5__);var _util_date_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(932);var _util_date_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_util_date_js__WEBPACK_IMPORTED_MODULE_6__);var _util_etask_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6386);var _util_etask_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_util_etask_js__WEBPACK_IMPORTED_MODULE_7__);var _bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(8239);var _bext_pub_util_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(7345);var _bext_pub_util_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_9__);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(5250);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_10__);var _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(6357);var _bext_vpn_ui_context_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5513);
// LICENSE_CODE ZON
function _extends(){_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const E={};const{useRef,useEffect,useState,useContext}=react__WEBPACK_IMPORTED_MODULE_2___default();const{ms}=_util_date_js__WEBPACK_IMPORTED_MODULE_6___default();const{App_context}=_bext_vpn_ui_context_js__WEBPACK_IMPORTED_MODULE_12__["default"];const{www_host}=conf__WEBPACK_IMPORTED_MODULE_0__;const{perr}=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"];const T=E.T=props=>{if(typeof props=="string")return(0,_bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_8__.Z)(props);const{children}=props;if(typeof children=="string")return(0,_bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_8__.Z)(children.replace(/\s+/g," "));if(Array.isArray(children)){let obj=[],str=[];for(let v of children){if(typeof v=="string")str.push(v);else{obj.push(v);str.push("$"+obj.length)}}let translated=(0,_bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_8__.Z)(str.join("")).split(/(\$\d+)/);return translated.map((v=>{let m=v.match(/\$(\d+)/);return m?obj[m[1]-1]:v}))}console.error("<T> must receive text to translate. Received: ",children);return null};const pad=num=>("000"+num).slice(-2);E.Link_mailto=function Link_mailto({to="help_be@"+www_host,on_click}){const href=E.use_etask((()=>_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_problem_mailto_url({to})));if(!href)return null;return react__WEBPACK_IMPORTED_MODULE_2___default().createElement("a",{href,target:"report_mailto",onClick:on_click},to,react__WEBPACK_IMPORTED_MODULE_2___default().createElement("iframe",{name:"report_mailto",style:{display:"none"}}))};E.format_time=({time,hide_hours})=>{let sec=Math.floor(Math.max(time,0)/1e3);let hrs=Math.floor(sec/(60*60));sec-=hrs*60*60;let min=Math.floor(sec/60);sec-=min*60;let timer=[pad(min),pad(sec)];if(!hide_hours)timer.unshift(pad(hrs));return timer.join(":")};E.use_trial_timer=()=>{const{trial,trial_state,root_url}=useContext(App_context);const remaining_cycle_time=E.use_etask((()=>_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_remaining_cycle_time(root_url)),0,[root_url,trial]);const used_cycle_time=E.use_etask((()=>_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_used_cycle_time(root_url,true)),0,[root_url,trial]);const used_trial_time=E.use_etask((()=>_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_used_trial_time(root_url,true)),0,[root_url,trial]);let type=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_9___default().get_trial_conf(trial_state,"timer_type","cycle_countdown");const expire_ts=trial?trial.expire_ts:0;const start_ts=trial?trial.interval_ts||trial.start_ts:0;let add_time=0;if(type=="cycle_timer")add_time=used_cycle_time;else if(type=="trial_timer")add_time=used_trial_time;else if(type=="cycle_countdown")add_time=remaining_cycle_time;else if(type=="trial_countdown")add_time=0;return{type,start_ts,expire_ts,add_time}};E.use_trial_progress=()=>{const{trial,trial_state,root_url}=useContext(App_context);const trial_period=E.use_etask((()=>_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_trial_period(root_url)),0,[root_url]);const total_cycle_time=E.use_etask((()=>_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_total_cycle_time(root_url,true)),0,[root_url]);const remaining_cycle_time=E.use_etask((()=>_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_remaining_cycle_time(root_url)),0,[root_url,trial]);const type=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_9___default().get_trial_conf(trial_state,"progress_type","cycle");const total_time=type=="cycle"?total_cycle_time:trial_period;const add_time=type=="cycle"?remaining_cycle_time:0;const update_interval=Math.max(total_time/100,1e3);const end_ts=trial?trial.expire_ts+add_time:0;const remaining=E.use_countdown(end_ts,update_interval);const percent=total_time?Math.max(Math.min(Math.floor(100-100*remaining/total_time),100),1):0;const hide_dots=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_9___default().get_trial_conf(trial_state,"hide_watermark_progress_dots");const dots=!hide_dots&&type=="cycle"&&trial_period?Math.max(Math.floor(total_time/trial_period)-1,0):0;return{percent,end_ts,trial_period,total_time,hide_dots,dots}};const use_hover=(el,def=false)=>{const[hover,set_hover]=useState(def);useEffect((()=>{if(!el)return void set_hover(false);const on_enter=()=>set_hover(true);const on_leave=()=>set_hover(false);el.addEventListener("mouseenter",on_enter);el.addEventListener("mouseleave",on_leave);return()=>{el.removeEventListener("mouseenter",on_enter);el.removeEventListener("mouseleave",on_leave)}}),[el]);return{hover,set_hover}};E.use_hover=use_hover;const Dots=()=>{const[step,set_step]=useState(0);useEffect((()=>{let t=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_10___default().set_timeout((()=>set_step((step+1)%3)),500);return()=>_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_10___default().clear_timeout(t)}),[step]);return react__WEBPACK_IMPORTED_MODULE_2___default().createElement("span",{className:"dots"},".".repeat(step+1))};E.Dots=Dots;const Btn=({light,disabled,arrow=true,children,...rest})=>{let cls=classnames__WEBPACK_IMPORTED_MODULE_3___default()("btn",light&&"btn-light",disabled&&"btn-disabled");return react__WEBPACK_IMPORTED_MODULE_2___default().createElement("div",_extends({className:cls},rest),children,!!arrow&&react__WEBPACK_IMPORTED_MODULE_2___default().createElement("div",{className:"btn-arrow"}))};E.Btn=Btn;E.is_mouse_over=(el,event)=>{if(!el)return false;let r=el.getBoundingClientRect();let x=event.clientX,y=event.clientY;return x>=r.left&&x<=r.right&&y>=r.top&&y<=r.bottom};const Month_price=({currency,price,max_width,font_size})=>{let style={fontWeight:"bold",fontSize:font_size,fontFamily:"Montserrat"};let text=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].format_price(price,currency);style.fontSize=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_font_size(text,style,max_width);return react__WEBPACK_IMPORTED_MODULE_2___default().createElement("div",{className:"month-price",style},text)};E.Month_price=Month_price;const Mitm_btn=({root_url,enable,on_click})=>react__WEBPACK_IMPORTED_MODULE_2___default().createElement("div",{className:"action-button mitm-unblock",onClick:on_click},react__WEBPACK_IMPORTED_MODULE_2___default().createElement("div",{className:enable?"unlock-anim":"lock-anim"},react__WEBPACK_IMPORTED_MODULE_2___default().createElement("div",{className:"power-switch"}),react__WEBPACK_IMPORTED_MODULE_2___default().createElement("div",{className:"img-wrapper"},react__WEBPACK_IMPORTED_MODULE_2___default().createElement("div",{className:"lock-img"}),react__WEBPACK_IMPORTED_MODULE_2___default().createElement("div",{className:"unlock-img"}),react__WEBPACK_IMPORTED_MODULE_2___default().createElement("div",{className:"strike-line"}))),react__WEBPACK_IMPORTED_MODULE_2___default().createElement("div",{className:"title"},enable?react__WEBPACK_IMPORTED_MODULE_2___default().createElement(T,null,"Unblock ",react__WEBPACK_IMPORTED_MODULE_2___default().createElement("b",null,root_url)):react__WEBPACK_IMPORTED_MODULE_2___default().createElement(T,null,"Continue without VPN")));E.Mitm_btn=Mitm_btn;E.use_previous=value=>{const ref=useRef();useEffect((()=>void(ref.current=value)),[value]);return ref.current};E.use_busy=()=>{const{busy}=useContext(App_context);const[finishing,set_finishing]=useState(false);const prev_busy=E.use_previous(busy);const need_finish=prev_busy&&!busy;useEffect((()=>{if(!need_finish)return void set_finishing(false);set_finishing(true);const t=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_10___default().set_timeout((()=>set_finishing(false)),1200);return()=>_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_10___default().clear_timeout(t)}),[busy]);return{busy:busy||need_finish||finishing,finishing:need_finish||finishing}};E.on_outside_click=(ref,cb,arr)=>{useEffect((()=>{const click_outside=e=>{if(ref.current&&!ref.current.contains(e.target)&&!e.target.closest(".tooltip")&&cb){cb()}};const body_click=()=>cb();setTimeout((()=>{if(document.body)document.body.addEventListener("click",click_outside);_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].on("body_click",body_click)}),30);return()=>{if(document.body)document.body.removeEventListener("click",click_outside);_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].off("body_click",body_click)}}),arr||[])};E.use_etask=(task,def,inputs)=>{const[data,set_data]=useState(def);useEffect((()=>{const et=_util_etask_js__WEBPACK_IMPORTED_MODULE_7___default()((function*(){set_data(yield task())}));return()=>et.return()}),inputs||[]);return data};E.use_timer=(ts,interval=1e3)=>{const[time,set_time]=useState(ts>0?_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].now()-ts:0);useEffect((()=>{const et=_util_etask_js__WEBPACK_IMPORTED_MODULE_7___default()((function*(){while(true){set_time(ts>0?_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].now()-ts:0);yield _util_etask_js__WEBPACK_IMPORTED_MODULE_7___default().sleep(interval)}}));return()=>et.return()}),[ts,interval]);return time};E.use_countdown=(ts,interval=1e3)=>{const prev_ts=E.use_previous(ts);const initial_value=Math.max(ts-_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].now(),0);const[time,set_time]=useState(initial_value);useEffect((()=>{const et=_util_etask_js__WEBPACK_IMPORTED_MODULE_7___default()((function*(){let t;while((t=ts-_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].now())>0){set_time(t);yield _util_etask_js__WEBPACK_IMPORTED_MODULE_7___default().sleep(Math.min(t,interval))}set_time(0)}));return()=>et.return()}),[ts,interval]);return prev_ts!=ts?initial_value:time};const use_enter_effect=({close,on_enter,on_exit,delay,immidiate})=>{const[state,set_state]=useState(immidiate?"entered":"entering");useEffect((()=>{const do_enter=()=>{if(on_enter)on_enter();set_state("entered")};if(!delay)return void do_enter();const t=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_10___default().set_timeout(do_enter,delay);return()=>_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_10___default().clear_timeout(t)}),[]);return{enter_state:state,close:!close?null:()=>{if(on_exit)on_exit();set_state("exiting");_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_10___default().set_timeout((()=>close()),300)}}};E.use_enter_effect=use_enter_effect;E.use_popular_countries=({root_url,src_country,prev_country})=>E.use_etask((()=>_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_popular_countries({root_url,src_country,prev_country})),_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_default_countries({root_url,src_country,prev_country}),[root_url,src_country,prev_country]);E.use_trial_dialog=({wait_end_cb})=>{const{trial,trial_state,root_url}=useContext(App_context);const[trial_changed,set_trial_changed]=useState(0);const[waited,set_waited]=useState(false);const autostart_after_wait=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_9___default().get_trial_conf(trial_state,"autostart_after_wait");const wait_end_ts=trial_state&&trial_state.wait_end_ts||0;const survey_id=E.use_etask((()=>_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_suggested_survey_id()),null);const on_wait_end=trial_obj=>{if(waited)return;set_waited(true);if(wait_end_cb)wait_end_cb(_util_util_js__WEBPACK_IMPORTED_MODULE_5___default().get(trial_obj,"conf.autostart_after_wait"))};useEffect((()=>{const inc_trial_changed=()=>set_trial_changed(trial_changed+1);_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].on("trial_change",inc_trial_changed);_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].on("bext_config_changed",inc_trial_changed);_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].on("trial_wait_end",on_wait_end);return()=>{_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].off("trial_change",inc_trial_changed);_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].off("bext_config_changed",inc_trial_changed);_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].off("trial_wait_end",on_wait_end)}}),[trial_changed]);const[state,set_state]=useState({last_trial_end_ts:null,next_trial_ts:0,total_wait:0,total_cycle_time:0,wait_screen_time:0,remaining_cycle_time:0,is_wait_ended:false,inited:false});useEffect((()=>{if(!waited&&state.is_trial_wait_ended)on_wait_end(trial_state)}),[state]);useEffect((()=>{const et=_util_etask_js__WEBPACK_IMPORTED_MODULE_7___default()((function*(){set_state({last_trial_end_ts:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_last_trial_end_ts(root_url),next_trial_ts:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_next_trial_ts(root_url,true),total_wait:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_trial_wait(root_url),total_cycle_time:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_total_cycle_time(root_url),wait_screen_time:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_total_cycle_time(root_url,true),remaining_cycle_time:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].get_remaining_cycle_time(root_url),is_trial_wait_ended:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].is_trial_wait_ended(root_url),inited:true})}));return()=>et.return()}),[trial,trial_changed,root_url]);const[start_error,set_start_error]=useState(false);const start_trial_fn=unblock_opt=>_util_etask_js__WEBPACK_IMPORTED_MODULE_7___default()((function*(){if(yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].trial_need_signin(root_url)){yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].unblock_action(unblock_opt);close();return}try{set_start_error(false);yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].start_trial(root_url);yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].unblock_action(unblock_opt);close()}catch(e){let err=e.toString();if(err.includes("trial_forbidden_waiting")||err.includes("trial_forbidden_limit")){_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].force_bext_config_update(true);_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].perr("be_ui_start_trial_err_limit",{},{add_trial_info:true});return}if(err.includes("trial_forbidden_domain")){_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].force_bext_config_update(true);_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].perr("be_ui_start_trial_err_disabled",{},{add_trial_info:true});close();return}_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].perr("be_ui_start_trial_err",{err},{add_trial_info:true});set_start_error(true)}}));const cycle_wait=E.use_countdown(state.next_trial_ts,10*ms.SEC)&&!waited;const now=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].now();const waiting=wait_end_ts>now;const is_wait_ended=waited||state.is_trial_wait_ended;const need_start_wait=state.total_wait&&!is_wait_ended&&!waiting;let status;if(!state.inited)status="";else if(waiting||cycle_wait)status="waiting";else if(need_start_wait)status="before_wait";else if(is_wait_ended)status="waited";else status="initial";useEffect((()=>{if(!status)return;perr(`geo_trial_${status}_show`,{},{add_trial_info:true},true)}),[status]);const send_upgrade_perr=()=>{perr(`geo_trial_${status}_click_upgrade`,{},true,{add_trial_info:true})};const send_free_perr=()=>{perr(`geo_trial_${status}_click_free`,{},true,{add_trial_info:true})};return{cycle_wait,waiting,wait_end_ts,waited:is_wait_ended,need_start_wait,status,autostart_after_wait,start_error,start_trial_fn,survey_id,send_upgrade_perr,send_free_perr,...state}};E.use_timer_progress=({end_ts,total,path_length,min_length,el})=>{const[force_update,set_force_update]=useState(0);const time_left=Math.min(Math.max(end_ts-_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].now(),0),total);const time_passed=total-time_left;let progress_length=path_length*time_passed/total;if(min_length)progress_length=Math.max(progress_length,min_length);const offset=total?path_length-progress_length:path_length;useEffect((()=>{if(!el||!total)return;if(total>=30*ms.MIN){const t=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_10___default().set_timeout((()=>set_force_update(force_update+1)),10*ms.SEC);return()=>_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_10___default().clear_timeout(t)}const anim=el.animate([{strokeDashoffset:offset},{strokeDashoffset:0}],{duration:time_left,fill:"both"});return()=>anim.cancel()}),[time_left,offset,total,force_update,el]);return{strokeDasharray:path_length,strokeDashoffset:offset}};E.use_ui_show=ui_name=>{useEffect((()=>{if(ui_name)_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_11__["default"].ui_show(ui_name)}),[ui_name])};E.add_rule_ref=(rule,ref)=>rule&&rule.mitm?"mitm_"+(ref||""):ref;E.use_ref=()=>{const[current,set_current]=useState(null);const fn=v=>set_current(v);fn.current=current;return fn};const A=react__WEBPACK_IMPORTED_MODULE_2___default().forwardRef(((props,ref)=>react__WEBPACK_IMPORTED_MODULE_2___default().createElement("a",_extends({ref,target:"_blank",rel:"noopener noreferrer"},props),props.children)));E.A=A;if(false){}const __WEBPACK_DEFAULT_EXPORT__=E},4191:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var module;// LICENSE_CODE ZON
"use strict";let is_node=typeof module=="object"&&module.exports&&module.children;if(is_node);else;!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(4850),__webpack_require__(793),__webpack_require__(1291),__webpack_require__(6467)],__WEBPACK_AMD_DEFINE_RESULT__=function(React,cn,zutil,zmembership){const E={};const{assign}=Object;E.format_time=ms=>{let pad=num=>("000"+num).slice(-2);let sec=Math.floor(ms/1e3);let days=Math.floor(sec/(60*60*24));sec-=days*60*60*24;let hours=Math.floor(sec/(60*60));sec-=hours*60*60;let mins=Math.floor(sec/60);sec-=mins*60;if(days==1&&hours==0){days=0;hours=24}return(days?days+"d ":"")+(hours||days?hours+"h ":"")+pad(mins)+"m "+pad(sec)+"s"};E.get_plan_display_options=plan=>{const{regular_price,price,free_period,renewal_price}=plan;const show_line_through_regular_price=regular_price&&regular_price!=price&&!free_period;return{show_line_through_regular_price,show_plus_free:free_period,show_renewal_billing_label:renewal_price}};const get_price_obj=(plan,currency,{days,months,free_months,regular_monthly})=>{const regular_monthly_price=currency=="usd"?regular_monthly&&regular_monthly.price:regular_monthly&&regular_monthly.currency&&regular_monthly.currency[currency]&&regular_monthly.currency[currency].price;const werf_regular_monthly_price=currency=="usd"?regular_monthly&&regular_monthly.price:regular_monthly&&regular_monthly.currency&&regular_monthly.currency[currency]&&(regular_monthly.currency[currency].werf_price||regular_monthly.currency[currency].price);const{price,renewal_price}=plan;const werf_price=plan.werf_price||plan.price;const werf_renewal_price=plan.werf_renewal_price||plan.renewal_price;const regular_price=months&&regular_monthly_price?regular_monthly_price*(months+free_months||0):renewal_price;const werf_regular_price=months&&werf_regular_monthly_price?werf_regular_monthly_price*(months+free_months||0):werf_renewal_price;const discount=regular_price?regular_price-price:null;const month_price=months?werf_price==83.99?6.99:+(werf_price/months).toFixed(2):null;const week_price=month_price?+(month_price/4).toFixed(2):null;const day_price=days?+(werf_price/days).toFixed(2):null;const regular_month_price=months&&werf_regular_price?+(werf_regular_price/(months+free_months||0)).toFixed(2):null;const discount_percent=discount?Math.round(100*discount/regular_price):null;const erf_amount=plan.werf_price?+(plan.price-plan.werf_price).toFixed(2):null;return{price,werf_price,regular_price,werf_regular_price,month_price,week_price,day_price,regular_month_price,discount,discount_percent,renewal_price,werf_renewal_price,erf_amount}};E.get_period_units=period=>{const{count,unit}=zmembership.parse_period(period)||{};const months=unit=="M"?count:unit=="Y"?12*count:0;const days=unit=="D"?count:unit=="W"?count*7:unit=="M"?count*30:unit=="Y"?365*count:0;return{days,months}};const fill_plan_info=(plan,{add,replace,regular_monthly}={})=>{const id=plan.id;const m=zmembership.parse_period(plan.period);if(!m)return;const{count:period_count_original,unit:period_type_original}=m;const period_type=period_type_original;const period_name=zmembership.period_unit_names[period_type];const period_name_original=period_name;let period_count=period_count_original;const{months,days}=E.get_period_units(plan.period);const{months:free_months}=E.get_period_units(plan.free_period);let currency;if(E.is_month_on)period_count=months;if(plan.currency){currency={};for(const c in plan.currency){const cur=plan.currency[c];currency[c]=assign({bluesnap:!!cur.bluesnap_id,stripe:!!cur.stripe_id,paypal:!!cur.paypal_id,avangate:!!cur.avangate_id},cur,get_price_obj(cur,c,{days,months,free_months,regular_monthly}))}}const short_name=zmembership.get_plan_short_name(plan.period);return assign({},add,{id,short_name,name:`${short_name} Plan`,period_count,period_type,period_name,every:period_count_original>1?period_count_original+" "+period_name_original+"s":period_name_original,currency,bluesnap:!!plan.bluesnap_id,paypal:!!plan.paypal_id,stripe:!!plan.stripe_id,avangate:!!plan.avangate_id,is_plan:true},zutil.pick(plan,"type","base_plan","period","avangate_id","avangate_product","net","paypal_id","paypal_test_id","bluesnap_id","bluesnap_test_id","bluesnap_ext_id","bluesnap_ext_test_id","stripe_id","stripe_test_id","free_period","fallback_plan","title","erf"),get_price_obj(plan,"usd",{days,months,free_months,regular_monthly}),replace)};E.fill_plans_info=(plan_ids,all_plans,{discount_base,replace_plan,add})=>{let regular_monthly=all_plans.find((p=>{const search_if=replace_plan&&replace_plan[p.id];const replace_plan_obj=search_if?all_plans.find((r=>r.id==search_if)):null;const period=replace_plan_obj?replace_plan_obj.period:p.period;return discount_base&&discount_base==p.id||period.match(/1\s?m/i)&&plan_ids.includes(p.id)}))||{};if(regular_monthly){const search_if=replace_plan&&replace_plan[regular_monthly.id];const replace_plan_obj=search_if?all_plans.find((r=>r.id==search_if)):null;if(replace_plan_obj)regular_monthly=replace_plan_obj}let plans=plan_ids.map((id=>{let replace=replace_plan&&replace_plan[id];id=replace&&replace.id||replace||id;replace=replace&&typeof replace=="object"?replace:{};if(id=="free"){return assign({period:"free",id:"free",name:"Free",price:"Free"},{})}const plan=all_plans.find((p=>p.id==id));if(!plan)return;return fill_plan_info(plan,{add,regular_monthly,replace})}));return plans.filter((p=>!!p))};E.Sitepic=class Sitepic extends React.PureComponent{constructor(...args){super(...args);_defineProperty(this,"state",{no_image:false});_defineProperty(this,"on_img_error",(event=>{event.target.onerror=null;this.setState({no_image:true})}));_defineProperty(this,"on_click",(event=>this.props.activate(event,this.props)))}render(){let{state,props}=this;let src=props.image||"";if(props.is_landing){src=/netflix\.com\.jpg/.test(props.image)?props.sitepic_netflix:/fubo\.tv\.png/.test(props.image)?props.sitepic_fubo:/france\.tv\.png/.test(props.image)?props.sitepic_france:props.image}let sitepic_cls=cn("ui_sitepic2",props.sitepic_class,{ui_sitepic2_noimage:state.no_image,premium_site:props.premium_site!==undefined&&props.premium_site,free_site:props.premium_site!==undefined&&!props.premium_site,ui_sitepic2_unblocking:props.unblocking,ui_sitepic2_active:props.unblocking,ui_sitepic_disabled:props.disabled,ui_sitepic2_orange:props.orange});let is_shaded=props.is_shaded||state.no_image;return React.createElement("div",{className:sitepic_cls},React.createElement("a",{className:"ui_sitepic2_body",onClick:this.on_click},React.createElement("div",{className:"ui_status",style:{display:"none"}},React.createElement("div",{className:"ui_status_label"})),is_shaded&&React.createElement("div",{className:"ui_sitepic2_shade ui_sitepic2_shade_bg_1"},React.createElement("span",{className:"ui_sitepic2_shade_siteurl"},props.link),React.createElement("div",{className:"ui_sitepic2_shade_sitename"},React.createElement("span",{className:"ui_sitepic2_shade_sitename_img"},React.createElement("img",{src:"//favicon.yandex.net/favicon/test.com"})),React.createElement("span",{className:"ui_sitepic2_shade_sitename_title"},props.title))),React.createElement("div",{className:"ui_sitepic2_overlay"},React.createElement("div",{className:"sprite"}),React.createElement("div",{className:"status"},"Unblocking ",props.title)),React.createElement("div",{className:"ui_sitepic2_promotion"},"Add Hola to unblock ",props.title),React.createElement("div",{className:"ui_sitepic2_img"},React.createElement("img",{src,onError:this.on_img_error,alt:`${props.title} website image`}))))}};E.Menu_icon=function Menu_icon({img,id,img_urls=[]}){return React.createElement("div",{className:cn("menu-icon","menu-icon-"+id)},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1"},React.createElement("use",{xlinkHref:img_urls[0]||`${img}#${id}_1`})),React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1"},React.createElement("use",{xlinkHref:img_urls[1]||`${img}#${id}_2`})))};return E}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},4118:module=>{"use strict";module.exports=JSON.parse('{"BUILDTYPE_DEBUG":false,"ZON_VERSION":"1.230.678","_RELEASE":true,"_RELEASE_LEVEL":2}')}}]);
//# sourceMappingURL=https://hola.org/be_source_map/1.230.678/75.bundle.js.map?build=nopeer_v3