(()=>{function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw a}}}}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o,i=null!==(o=sessionStorage.getItem("bis_data"))?JSON.parse(o):null,a=i?i.config.facebookConfig.videoDetectorConfigNew:null,u=i?i.id+"_w":null;var l="SCRIPT",s="XML_HTTP_REQUEST",f="INSTREAM_CONFIG",c="MARKETPLACE_VIDEO_AD",v="FEED_VIDEO_AD",d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",l={detectionTime:Date.now()/1e3|0,videoId:e,videoUrl:t,previewImageUrl:r,audioUrl:n,linkDisplay:o,userName:i,adName:a,adLogo:u};return l},A=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new RegExp(t,"i"),o=e.match(r);if(!o)return!1;if(o.groups&&n)return 0===o.groups[n].search(/\"/)?o.groups[n].replace(/\"/,""):o.groups[n];var i=o.filter((function(e){return e}));return!!i[1]&&i[1]},E=function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=r?a.PARSERS.filter((function(e){return e.TYPE===r})):a.PARSERS,u=t(i);try{var l=function(){var t=n.value;if(t.CHECKER.some((function(t){return e.includes(t)})))switch(r){case f:setTimeout((function(){return _(t,e,o)}),0);break;case c:setTimeout((function(){return S(t,e,o)}),0);break;case v:setTimeout((function(){return h(t,e,o)}),0);break;default:setTimeout((function(){return R(t,e)}),0)}};for(u.s();!(n=u.n()).done;)l()}catch(e){u.e(e)}finally{u.f()}},h=function(e,n){try{var r="".concat(n).replace(/\}(\r|\n)/g,"}BIS_SEPARATOR").split(/BIS_SEPARATOR/g),o=e.CHECKER;r=r.filter((function(e){return o.some((function(t){return new RegExp(t).test(e)}))}));var i=[];if(r.length){var a,u=t(r);try{for(u.s();!(a=u.n()).done;){var l=a.value,s=l;"string"==typeof l&&(s=JSON.parse(l));var f=O(s,e),c=I(s,e),v=D(s,e),A=g(s,e.PATH_USER_NAME),E=d(v,f,"",c,"",A);v&&f&&i.push(E)}}catch(e){u.e(e)}finally{u.f()}i.forEach((function(e){setTimeout(H(e,"FACEBOOK_VIDEO_DATA"),0)}))}}catch(e){}},_=function(e,n,r){var o=[],i=[];try{o.push(JSON.parse(n)),setTimeout(H({url:r,requestMethod:"POST",content:o},"FACEBOOK_INSTREAM_DATA"),0)}catch(a){(o="".concat(n).replace(/\}(\r|\n)/g,"}BIS_SEPARATOR").split(/BIS_SEPARATOR/g)).forEach((function(n,r){if(!(n.length<=3)&&e.CHECKER.some((function(e){return n.includes(e)}))){var o,a=JSON.parse(n),u=a,l=a,s=t(e.PATH_NODES);try{for(s.s();!(o=s.n()).done;){var f=o.value,c=e.PATH_NODES.indexOf(f),v=e.PATH_NODES.length-1;c!==v&&u[f]&&(u=u[f]),c===v&&u[f]&&((u=u[f]).length?u.forEach((function(t){t.bisLinks={aboutPageLink:y(t,e.PATH_USER_ID)},t.video_id=p(t,e.PATH_VIDEO_ID),i.push(t)})):(u.bisLinks={aboutPageLink:y(u,e.PATH_USER_ID)},u.video_id=p(u,e.PATH_VIDEO_ID),i.push(u)))}}catch(e){s.e(e)}finally{s.f()}var d,A=t(e.PATH_ALL_VIDEO);try{var E=function(){var n=d.value,r=e.PATH_ALL_VIDEO.indexOf(n),o=e.PATH_ALL_VIDEO.length-1;if(r!==o&&l[n]&&(l=l[n]),"string"!=typeof n&&r===o&&n.length)if(l.length)l.forEach((function(e,r){var o=i[r];if(o.video_id===e.video_id){var a,u=t(n);try{for(u.s();!(a=u.n()).done;){var l=a.value;if(e[l]){o[l]=e[l];break}}}catch(e){u.e(e)}finally{u.f()}}}));else if(1===i.length){var a=i[0];if(a.video_id===l.video_id){var u,s=t(n);try{for(s.s();!(u=s.n()).done;){var f=u.value;if(l[f]){a[f]=l[f];break}}}catch(e){s.e(e)}finally{s.f()}}}};for(A.s();!(d=A.n()).done;)E()}catch(e){A.e(e)}finally{A.f()}}})),i.forEach((function(e){setTimeout(H({url:r,requestMethod:"POST",content:e},"FACEBOOK_INSTREAM_DATA"),0)}))}},p=function(e,n){var r,o=e,i=null,a=t(n);try{for(a.s();!(r=a.n()).done;){var u=r.value,l=n.indexOf(u),s=n.length-1;l!==s&&o[u]&&(o=o[u]),l===s&&o[u]&&(i=o[u])}}catch(e){a.e(e)}finally{a.f()}return parseInt(i,10)},y=function(e,n){var r,o=e,i=null,a=t(n);try{for(a.s();!(r=a.n()).done;){var u=r.value,l=n.indexOf(u),s=n.length-1;l!==s&&o[u]&&(o=o[u]),l===s&&o[u]&&(i="https://www.facebook.com/".concat(o[u],"/about"))}}catch(e){a.e(e)}finally{a.f()}return i},R=function(e,t){t=t.replace(/ /g,"");var n=A(t,e.VIDEO_ID);if(n){var r=null,o=null,i="",u="",l="";e.VIDEO_HD_URL&&(r=A(t,e.VIDEO_HD_URL,e.GROUP_NAME_VIDEO_URL)),e.VIDEO_SD_URL&&!r&&(o=A(t,e.VIDEO_SD_URL)),e.LINK_DISPLAY&&(l=A(t,e.LINK_DISPLAY)),a.VIDEO_AUDIO_URL&&(i=(i=A(t,e.VIDEO_AUDIO_URL))?i.split("\\").join(""):i),e.THUMBNAIL&&(u=(u=A(t,e.THUMBNAIL))?u.split("\\").join(""):u);var s=r||o;if(s){s=s.split("\\").join("");var f=d(n,s,i,u,l);setTimeout(H(f,"FACEBOOK_VIDEO_DATA"),0)}}},S=function(e,n){try{var r="".concat(n).replace(/\}(\r|\n)/g,"}BIS_SEPARATOR").split(/BIS_SEPARATOR/g),o=e.CHECKER;r=r.filter((function(e){return o.some((function(t){return new RegExp(t).test(e)}))}));var i=[];if(r.length){var a,u=t(r);try{for(u.s();!(a=u.n()).done;){var l=a.value,s=l;"string"==typeof l&&(s=JSON.parse(l));var f=T(s,e),c=O(s,e),v=I(s,e),A=D(s,e),E=g(s,e.PATH_NAME),h=g(s,e.PATH_LOGO),_=d(A,c,f,v,"","",E,h);A&&c&&i.push(_)}}catch(e){u.e(e)}finally{u.f()}i.forEach((function(e){setTimeout(H(e,"FACEBOOK_VIDEO_DATA"),0)}))}}catch(e){}},g=function(e,n){var r,o=null,i=t(n);try{for(i.s();!(r=i.n()).done;)for(var a=r.value,u=a.length,l=e,s=0;s<u;s++){var f=a[s],c=u-1;if(!l[f])break;s!==c&&(l=l[f]),s===c&&(o=l[f])}}catch(e){i.e(e)}finally{i.f()}return o},T=function(e,n){var r,o="",i=t(n.PATH_AUDIO_URL);try{for(i.s();!(r=i.n()).done;)for(var a=r.value,u=a.length,l=e,s=0;s<u;s++){var f=a[s],c=u-1;if(!l[f])break;s!==c&&l[f]&&(l=l[f]),s===c&&l[f]&&(o=l[f])}}catch(e){i.e(e)}finally{i.f()}return o},O=function(n,r){var o,i=null,a=t(r.PATH_VIDEO_URL);try{for(a.s();!(o=a.n()).done;)for(var u=o.value,l=u.length,s=n,f=0;f<l;f++){var c=u[f],v=l-1;if(!s[c]&&c.includes&&!c.includes("%%%"))break;if(f!==v&&s[c]&&(s=s[c]),f===v){if(c.includes&&c.includes("%%%")){var d=e(c.split("%%%"),2),A=d[0],E=d[1];if(s[A]||s[E]){i=s[A]?s[A]:s[E];break}}s[c]&&(i=s[c])}}}catch(e){a.e(e)}finally{a.f()}return i},I=function(e,n){var r,o=null,i=t(n.PATH_THUMBNAIL);try{for(i.s();!(r=i.n()).done;)for(var a=r.value,u=a.length,l=e,s=0;s<u;s++){var f=a[s],c=u-1;if(!l[f])break;s!==c&&l[f]&&(l=l[f]),s===c&&l[f]&&(o=l[f])}}catch(e){i.e(e)}finally{i.f()}return o},D=function(e,n){var r,o=null,i=t(n.PATH_VIDEO_ID);try{for(i.s();!(r=i.n()).done;)for(var a=r.value,u=a.length,l=e,s=0;s<u;s++){var f=a[s],c=u-1;if(!l[f])break;s!==c&&l[f]&&(l=l[f]),s===c&&l[f]&&(o=l[f])}}catch(e){i.e(e)}finally{i.f()}return o},b=function(e,t){t=String(t);var n=a.PARSER_CONFIG[e];return n.SEPARATOR?t.split(n.SEPARATOR):[t]},m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=b(t,e);r.forEach((function(e){setTimeout((function(){return E(e,t,n)}),0)}))},H=function(e,t){return function(){!function(e,t,n){try{var r={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:n,from:e,to:e.substring(0,e.length-2),content:t};window.postMessage(r)}catch(e){}}(u,e,t)}};if(null!=a&&a.PARSER_CONFIG.SCRIPT.USE){var P=function(){var e,n=t(document.querySelectorAll("script"));try{for(n.s();!(e=n.n()).done;){var r=e.value;r.hasAttribute("bis_use")||(r.setAttribute("bis_use","true"),m(r.innerHTML,l))}}catch(e){n.e(e)}finally{n.f()}};P(),setInterval(P,a.PARSER_CONFIG.SCRIPT.INTERVAL_MS||5e3)}if(null!=a&&a.PARSER_CONFIG.LISTEN_HTTP_REQUESTS){var L=XMLHttpRequest.prototype.open,N=XMLHttpRequest.prototype.setRequestHeader,C=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.setRequestHeader=function(){var e=arguments[0].toLowerCase(),t=arguments[1];this.requestHeaders||(this.requestHeaders={}),this.requestHeaders[e]=t,N.apply(this,arguments)},XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],L.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){var e=this.onreadystatechange;return this.onreadystatechange=function(){var t=this,n=a.MATCH_URLS,r=a.MATCH_HEADERS,o=this.requestHeaders?Object.keys(this.requestHeaders):null,i=a.PARSER_CONFIG.INSTREAM_CONFIG,u=a.PARSER_CONFIG.MARKETPLACE_VIDEO_AD,l=a.PARSER_CONFIG.FEED_VIDEO_AD,d=!1,A=null,E=null;if(o&&(d=o.some((function(e){if(r[e]&&r[e].includes(t.requestHeaders[e]))return A=e,E=t.requestHeaders[e],!0}))),4===this.readyState&&n.filter((function(e){return e.indexOf(t.responseURL)})).length>0)if(d)switch(!0){case i.USE&&i.HEADERS[A].includes(E):setTimeout((function(){return m(t.response,f,t.responseURL)}),0);break;case u.USE&&u.HEADERS[A].includes(E):setTimeout((function(){return m(t.response,c,t.responseURL)}),0);break;case l.USE&&l.HEADERS[A].includes(E):setTimeout((function(){return m(t.response,v,t.responseURL)}),0)}else setTimeout((function(){return m(t.response,s)}),0);if(e)return e.apply(this,arguments)},C.apply(this,arguments)}}window.addEventListener("message",(function(e){if(e.data.attribute&&"bis-text"===e.data.attribute)for(var n=Array.from(document.querySelectorAll("canvas")),r=null,o=e.data.attribute,a=i.config.facebookConfig.PATH_TO_CANVAS_TEXT,u=0,l=n;u<l.length;u++){var s=l[u];if(!Object.entries(s).some((function(e){if(e[0].search(/reactFiber/)>=0)return r=e[0],!0})))return void s.setAttribute(o,"");var f,c=s[r],v=t(a);try{for(v.s();!(f=v.n()).done;){var d=f.value;c[d]&&(c=c[d])}}catch(e){v.e(e)}finally{v.f()}s.setAttribute(o,c)}}))})();